window.ThriveLeads=window.ThriveLeads||{},ThriveLeads.LineChart=Backbone.Model.extend({defaults:function(){return{id:"",title:"",renderTo:"",type:"line",data:[]}},initialize:function(){var t=this.get("title"),e=this.get("type"),i=this.get("renderTo");this.chart=this.dochart(t,e,i)},redraw:function(){var t=this.get("title"),e=this.get("data"),i=this.get("x_axis"),a=this.get("y_axis"),r=[],n=this.get("x_axis").length;for(var h in e){r.push(e[h].id);var s=this.chart.get(e[h].id);s&&null!==s?s.setData(e[h].data):this.chart.addSeries(e[h],!1,!1)}for(h=0;h<this.chart.series.length;h++)r.indexOf(this.chart.series[h].options.id)<0&&(this.chart.series[h].remove(!1),h--);this.chart.get("time_interval").setCategories(i),this.chart.xAxis[0].update({tickInterval:n>13?Math.ceil(n/13):1}),this.chart.setTitle({text:t}),this.chart.yAxis[0].axisTitle&&this.chart.yAxis[0].axisTitle.attr({text:a}),this.chart.redraw(),this.chart.hideLoading()},showLoading:function(){this.chart.showLoading()},hideLoading:function(){this.chart.hideLoading()},dochart:function(t,e,i){return new Highcharts.Chart({chart:{type:e,renderTo:i,style:{fontFamily:"Open Sans,sans-serif"}},colors:ThriveLeads.const.CHART_COLORS,yAxis:{allowDecimals:!1,title:{text:"Conversions"},min:0},xAxis:{id:"time_interval"},credits:{enabled:!1},title:{text:t},tooltip:{shared:!1,useHTML:!0,formatter:function(){return"scatter"!=this.series.type&&this.x+"<br/>"+this.series.name+": <b>"+this.y+"</b>"}},plotOptions:{series:{dataLabels:{shape:"callout",backgroundColor:"rgba(0, 0, 0, 0.75)",style:{color:"#FFFFFF",textShadow:"none"}},events:{legendItemClick:function(){"scatter"==this.type&&(this.visible?jQuery(".highcharts-data-labels").hide():jQuery(".highcharts-data-labels").show())}}}}})}}),ThriveLeads.PieChart=Backbone.Model.extend({defaults:function(){return{id:"",title:"",data:[]}},initialize:function(){var t=this.get("title");this.get("data"),this.chart=this.dopie(t)},redraw:function(){var t=this.get("title"),e=this.get("data");this.get("x_axis"),this.chart.series[0].setData(e),this.chart.setTitle(t),this.chart.redraw(),this.chart.hideLoading()},showLoading:function(){this.chart.showLoading()},hideLoading:function(){this.chart.hideLoading()},dopie:function(t){return new Highcharts.Chart({chart:{renderTo:"tve-report-chart",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},colors:ThriveLeads.const.CHART_COLORS,credits:{enabled:!1},title:{text:t},plotOptions:{pie:{allowPointSelect:!1,cursor:"default",showInLegend:!0,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},tooltip:{formatter:function(){return this.key+": "+parseInt(this.y)}},series:[{type:"pie",name:t}]})}}),ThriveLeads.BarChart=Backbone.Model.extend({defaults:function(){return{id:"",data:[],colors:[]}},initialize:function(){var t=this.get("renderTo"),e=this.get("data"),i=this.get("colors"),a=0,r=100,n=100;for(var h in e)e[h][0]<r&&(r=e[h][0]),e[h][e[h].length-1]>a&&(a=e[h][e[h].length-1]),(e[h][e[h].length-1]-e[h][0])/2<n&&(n=(e[h][e[h].length-1]-e[h][0])/2);for(var h in r=r>n/3?r-n/3:0,a+=n/3,e){for(var s,o=[],d=1;d<e[h].length;d++)o.push({data:[{low:e[h][d-1],high:e[h][d]}]});s=(e[h][0]+e[h][e[h].length-1])/2,this.doChart(o,s,r,a,i[h],t+"-"+h)}},showLoading:function(){this.chart.showLoading()},hideLoading:function(){this.chart.hideLoading()},doChart:function(t,e,i,a,r,n){return new Highcharts.Chart({chart:{renderTo:n,type:"columnrange",inverted:!0,height:50,width:240,spacing:[10,10,10,10]},colors:r,plotOptions:{columnrange:{grouping:!1}},title:{text:""},xAxis:{title:{text:""},labels:{enabled:!1},lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0},yAxis:{title:{text:""},labels:{enabled:!1},plotLines:[{color:"#000000",value:e,width:1,zIndex:100}],min:i,max:a,lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0},legend:{enabled:!1},credits:{enabled:!1},tooltip:{enabled:!1},series:t})}});