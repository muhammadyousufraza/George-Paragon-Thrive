(()=>{var t,e;window.TVO_Front=window.TVO_Front||{},TVO_Front.models=TVO_Front.models||{},TVO_Front.collections=TVO_Front.collections||{},jQuery,Backbone.emulateHTTP=!0,TVO_Front.models.Base=Backbone.Model.extend({idAttribute:"id",sync:function(t,e,i){var o;return(i=i||{}).cache=!1,_.isUndefined(TVO_Front.nonce)||_.isNull(TVO_Front.nonce)||(o=i.beforeSend,i.beforeSend=function(t){if(t.setRequestHeader("X-WP-Nonce",TVO_Front.nonce),o)return o.apply(this,arguments)}),Backbone.sync(t,e,i)}}),TVO_Front.collections.Base=Backbone.Collection.extend({sync:function(t,e,i){var o;return(i=i||{}).cache=!1,i.url=this.url,_.isUndefined(TVO_Front.nonce)||_.isNull(TVO_Front.nonce)||(o=i.beforeSend,i.beforeSend=function(t){if(t.setRequestHeader("X-WP-Nonce",TVO_Front.nonce),o)return o.apply(this,arguments)}),Backbone.sync(t,e,i)}}),TVO_Front.models.Shortcode=TVO_Front.models.Base.extend({url:function(){return TVO_Front.routes.shortcodes+"/"+this.get("id")}}),TVO_Front.collections.Shortcodes=TVO_Front.collections.Base.extend({model:TVO_Front.models.Shortcode,url:TVO_Front.routes.shortcodes,parse:function(t){return t.forEach((function(t){TVO_Front.selected_template&&t.id==TVO_Front.selected_template?t.active=1:t.active=0,t.display=t.config.display,t.testimonials=t.config.testimonials.length,t.config.tags?t.tags=t.config.tags.length:t.tags=0})),t},comparator:function(t){return-t.get("id")}}),TVO_Front.models.Tag=TVO_Front.models.Base.extend({}),TVO_Front.collections.Tags=TVO_Front.collections.Base.extend({model:TVO_Front.models.Tag,url:TVO_Front.routes.tags}),TVO_Front.models.Testimonial=TVO_Front.models.Base.extend({}),TVO_Front.collections.Testimonials=TVO_Front.collections.Base.extend({model:TVO_Front.models.Testimonial,url:TVO_Front.routes.testimonials}),window.TVO_Front=window.TVO_Front||{},TVO_Front.objects=TVO_Front.objects||{},t=jQuery,e=Backbone.Router.extend({$element:"#tvo-testimonial-display",view:null,routes:{start:"start","pre-select":"preSelect","select-testimonials(/:id)":"selectTestimonials","select-tags(/:id)":"selectTags","display-options":"displayOptions","save-list":"saveList"},backNextButtons:function(e,i){0===e.length?t(".tvo-back").attr("href","").hide():t(".tvo-back").attr("href","#"+e).show(),0===i.length?t(".tvo-next").attr("href","").hide():t(".tvo-next").attr("href","#"+i).show()},start:function(){this.view&&this.view.remove(),void 0!==TVO_Front.preloader&&TVO_Front.preloader.show(),this.backNextButtons("",""),TVO_Front.objects.Shortcodes=new TVO_Front.collections.Shortcodes;var e=this.view=new TVO_Front.views.Shortcodes({collection:TVO_Front.objects.Shortcodes});TVO_Front.objects.selectedTestimonials=new TVO_Front.collections.Testimonials,TVO_Front.objects.selectedTags=[],TVO_Front.objects.editShortcode="",TVO_Front.objects.Shortcodes.fetch({data:{type:"display"},success:function(){e.render()}}),t(this.$element).html(this.view.$el)},preSelect:function(){this.view&&this.view.remove(),TVO_Front.objects.selectedTestimonials=new TVO_Front.collections.Testimonials,TVO_Front.objects.selectedTags=[],this.view=new TVO_Front.views.PreSelectView,this.backNextButtons("",""),t(this.$element).html(this.view.render().$el)},selectTestimonials:function(e){this.view&&this.view.remove(),void 0!==TVO_Front.preloader&&TVO_Front.preloader.show(),this.backNextButtons("pre-select","display-options"),TVO_Front.objects.currentSelection="testimonials",TVO_Front.objects.Testimonials=new TVO_Front.collections.Testimonials;var i=this;TVO_Front.objects.Testimonials.fetch({data:{status:TVO_Front.const.ready_to_display_status},success:function(){var t;if(!e||isNaN(e)?t=TVO_Front.active_config?TVO_Front.active_config.testimonials:[]:(t=TVO_Front.objects.Shortcodes.get(e).get("config").testimonials,TVO_Front.objects.editShortcode=e),0===TVO_Front.objects.selectedTestimonials.length)for(var o in t)TVO_Front.objects.selectedTestimonials.add(TVO_Front.objects.Testimonials.get(t[o]));i.view.render()}}),this.view=new TVO_Front.views.SelectTestimonials,t(this.$element).html(this.view.$el)},selectTags:function(e){this.view&&this.view.remove(),void 0!==TVO_Front.preloader&&TVO_Front.preloader.show(),this.backNextButtons("pre-select","save-list"),TVO_Front.objects.currentSelection="tags",TVO_Front.objects.Tags=new TVO_Front.collections.Tags,TVO_Front.objects.Tags.fetch({success:function(){var t;if(!e||isNaN(e))t=TVO_Front.active_config?TVO_Front.active_config.tags:[],TVO_Front.objects.max_testimonials=TVO_Front.active_config?TVO_Front.active_config.max_testimonials:100;else{var i=TVO_Front.objects.Shortcodes.get(e);t=i.get("config").tags,TVO_Front.objects.editShortcode=e,TVO_Front.objects.max_testimonials=i.max_testimonials}0===TVO_Front.objects.selectedTags.length&&(TVO_Front.objects.selectedTags=t instanceof Array?t:[],TVO_Front.objects.selectedTags=TVO_Front.objects.selectedTags.map((function(t){return parseInt(t,10)}))),TVO_Front.objects.TagsList.render()}}),TVO_Front.objects.TagsList=this.view=new TVO_Front.views.SelectTags,TVO_Front.objects.selectedTags instanceof Array||(TVO_Front.objects.selectedTags=[]),t(this.$element).html(this.view.$el)},displayOptions:function(){this.view&&this.view.remove(),this.backNextButtons("select-testimonials","save-list"),TVO_Front.objects.selectedTestimonials&&0!==TVO_Front.objects.selectedTestimonials.length?TVO_Front.objects.selectedTestimonials.length<2?this.saveList():(this.view=new TVO_Front.views.TestimonialDisplayOptions({collection:TVO_Front.objects.selectedTestimonials}),t(this.$element).html(this.view.render().$el)):this.selectTestimonials()},saveList:function(){var e;this.view&&this.view.remove(),e="testimonials"===TVO_Front.objects.currentSelection?TVO_Front.objects.selectedTestimonials.length>1?"display-options":"select-testimonials":"select-tags",this.backNextButtons(e,""),TVO_Front.objects.Testimonials=new TVO_Front.collections.Testimonials,this.view=new TVO_Front.views.SaveTestimonialList({collection:TVO_Front.objects.Testimonials}),t(this.$element).html(this.view.render().$el)}}),t((function(){parent.location.hash="",TVO_Front.router=new e,t(document).on("click","#tvo_display_testimonial_settings, #tvo_display_testimonial_template",(function(){document.location.hash=""}))})),window.TVO_Front=window.TVO_Front||{},TVO_Front.views=TVO_Front.views||{},TVO_Front.objects=TVO_Front.objects||{},_.templateSettings={evaluate:/<#([\s\S]+?)#>/g,interpolate:/<#=([\s\S]+?)#>/g,escape:/<#-([\s\S]+?)#>/g},function(t){t((function(){TVO_Front.tpl=function(e,i){var o=t("script#tve-"+e.replace(/\//g,"-")).html()||"";return i?_.template(o)(i):_.template(o)},TVO_Front.views.GenericItem=Backbone.View.extend({initialize:function(t){this.template=TVO_Front.tpl(t.template)},render:function(){return this.$el.html(this.template()),this}}),TVO_Front.views.Shortcodes=Backbone.View.extend({events:{"click .tvo-create-testimonial-list":"createShortcode"},initialize:function(){this.template=TVO_Front.tpl("create-testimonial")},renderOne:function(t){if(0!=t.get("testimonials")||0!=t.get("tags")){var e=new TVO_Front.views.ShortcodeItem({template:"shortcode-box",className:"tvo-shortcode-box-container tvo-row",model:t});this.$("#tvo-testimonial-shortcode-list").prepend(e.render().$el)}},render:function(){return this.$el.html(this.template()),this.$("#tvo-testimonial-shortcode-list .tvo-shortcode-box").not(".tvo-create-testimonial-list").remove(),this.collection.sort(),this.collection.each(this.renderOne,this),void 0!==TVO_Front.preloader&&TVO_Front.preloader.hide(),this},createShortcode:function(){delete TVO_Front.active_config}}),TVO_Front.views.ShortcodeItem=Backbone.View.extend({events:{"click .tvo-edit-title":"editTitle","change .tvo-edit-title-input":"saveTitle","keyup .tvo-edit-title-input":"saveTitleKeyup","blur .tvo-edit-title-input":"closeEditTitle","click .tvo-copy-shortcode":"copyShortcode","click .tvo-delete-shortcode":"deleteShortcode","click .tvo-existing-shortcode-template":"selectExistingTemplate"},initialize:function(t){this.template=TVO_Front.tpl(t.template)},render:function(){return this.$el.html(this.template()),this},editTitle:function(e){var i=t(e.currentTarget),o=this.$(".tvo-testimonial-title").hide();this.$(".tve_lightbox_input").show().val(o.text().trim()).focus().select(),i.hide(),e.stopPropagation()},saveTitle:function(t){var e=t.currentTarget.value;e!=this.model.get("name")&&(this.model.set("name",e),this.$(".tvo-testimonial-edit-title-box .tvo-testimonial-title").html(e),this.model.save()),this.closeEditTitle()},saveTitleKeyup:function(t){27===t.which?this.closeEditTitle():13===t.which&&this.saveTitle()},closeEditTitle:function(){this.$(".tvo-edit-title-input").hide(),this.$(".tvo-testimonial-title,.tvo-edit-title").show()},copyShortcode:function(){var e=this.model.attributes;delete e.id,e.type=e.config.type,t.ajax({headers:{"X-WP-Nonce":TVO_Front.nonce},cache:!1,url:TVO_Front.routes.shortcodes,type:"POST",data:e}).done((function(t){TVO_Front.router.start()})).always((function(){}))},deleteShortcode:function(){var t=this;this.model.destroy({success:function(e,i){t.$el.remove()}})},selectExistingTemplate:function(){var e=this.model.get("config");e.template=TVO_Front.init_template,t(document).trigger("tvo.get.shortcode",e)}}),TVO_Front.views.PreSelectView=Backbone.View.extend({currentSelection:"",events:{"click .tvo-select-tags":"selectTags","click .tvo-select-testimonials":"selectTestimonials"},initialize:function(t){this.template=TVO_Front.tpl("pre-select")},render:function(){return this.$el.html(this.template()),void 0!==TVO_Front.preloader&&TVO_Front.preloader.hide(),this},selectTags:function(){TVO_Front.router.navigate("#select-tags",{trigger:!0})},selectTestimonials:function(){TVO_Front.router.navigate("#select-testimonials",{trigger:!0})}}),TVO_Front.views.SelectTestimonials=Backbone.View.extend({className:"tve_scT tve_green",testimonialsPagination:null,events:{"click .tvo-testimonial-item":"addTestimonial","keyup .tvo-testimonials-search":"searchTestimonials","change #tvo-testimonial-select-all":"checkUncheckTestimonials","change .tvo-filter-content":"filterContent"},initialize:function(){this.template=TVO_Front.tpl("select-testimonials")},updateTestimonialCount:function(t){this.$(".tvo_testimonials_count b").html(t)},addTestimonial:function(t){var e=parseInt(t.currentTarget.value,10);if(t.currentTarget.checked)TVO_Front.objects.selectedTestimonials.push(TVO_Front.objects.Testimonials.get(e));else{var i=TVO_Front.objects.selectedTestimonials.get(e);i&&TVO_Front.objects.selectedTestimonials.remove(i)}this.updateTestimonialCount(TVO_Front.objects.selectedTestimonials.length),this.showContinueButton()},showContinueButton:function(){TVO_Front.objects.selectedTestimonials.length>0?jQuery(".tvo-next").show():jQuery(".tvo-next").hide()},filterContent:function(t){"summary"===t.currentTarget.value?this.$(".tvo-testimonial-content-full").addClass("tvd-hide"):this.$(".tvo-testimonial-content-summary").addClass("tvd-hide"),this.$(".tvo-testimonial-content-"+t.currentTarget.value).removeClass("tvd-hide")},checkUncheckTestimonials:function(e){var i=jQuery(e.currentTarget);this.$(".tvo-testimonial-item").each((function(){var e=t(this);e.is(":checked")!==i.is(":checked")&&e.trigger("click")})),this.showContinueButton()},searchTestimonials:function(){var t=this.$(".tvo-testimonials-search").val(),e=this.$("#tvo-filter-tags").val(),i=this.$("#tvo-filter-title").val(),o=this.$("#tvo-filter-image").val(),s=this.$("#tvo-from-value").val(),n=this.$("#tvo-to-value").val(),r=this.$("#tvo-testimonial-word-count-check").is(":checked");this.testimonialsPagination.changePage(null,{search_by:t,tags:e,title_filter:i,image_filter:o,count_from_filter:s,count_to_filter:n,check_word_count:r})},renderSelectTags:function(){var t=this.$("#tvo-filter-tags"),e=this;t.data("select2")&&t.select2("destroy"),t.select2({tags:!0,multiple:!0,data:TVO_Front.all_tags,placeholder:"Select tags to filter content"}).on("select2:select",(function(t){e.searchTestimonials()})).on("select2:unselect",(function(t){t.params.originalEvent&&(e.searchTestimonials(),t.params.originalEvent.stopPropagation())}))},renderFilterTitle:function(){var t=this.$("#tvo-filter-title"),e=this;t.on("change",(function(i){"any"===t.val()&&t.val("select-title"),e.searchTestimonials()}))},renderFilterImage:function(){var t=this.$("#tvo-filter-image"),e=this;t.on("change",(function(i){"any"===t.val()&&t.val("select-image"),e.searchTestimonials()}))},renderWordCount:function(){var e=this.$("#tvo-from-value"),i=this.$("#tvo-to-value"),o=this.$("#tvo-testimonial-word-count-check"),s=this.$(".tvo-filter-error-message"),n=this;e.keyup((function(t){n.searchWordCount(t,e,i,o,s)})),i.keyup((function(t){n.searchWordCount(t,e,i,o,s)})),o.change((function(r){o.is(":checked")?n.searchWordCount(r,e,i,t(this),s):n.searchTestimonials()}))},searchWordCount:function(t,e,i,o,s){var n=this,r=!0,a=e.val(),l=i.val(),c=new RegExp("^([0-9]*)$");(13===t.keyCode||o.is(":checked"))&&(parseInt(l)<parseInt(a)&&(n.showErrorMessage(e,i,s,TVO_Front.translations.bigger_value),r=!1),c.test(l)&&c.test(a)||(n.showErrorMessage(e,i,s,TVO_Front.translations.only_numbers),r=!1),(r||""==a&&""==l)&&(s.hide(),n.searchTestimonials()))},showErrorMessage:function(t,e,i,o){i.show(),i.html(o)},render:function(){return this.$el.html(this.template()),this.renderSelectTags(),this.renderFilterTitle(),this.renderFilterImage(),this.renderWordCount(),this.$("#tvo-testimonials-list").empty(),TVO_Front.objects.TestimonialsList=new TVO_Front.views.TestimonialsList({collection:TVO_Front.objects.Testimonials,el:this.$("#tvo-testimonials-list")}),this.testimonialsPagination=new TVO_Front.views.TestimonialPagination({collection:TVO_Front.objects.Testimonials,view:TVO_Front.objects.TestimonialsList,el:this.$(".tvo-top-pagination"),type:"static"}),this.testimonialsPagination.changePage(null,{}),this.updateTestimonialCount(TVO_Front.objects.selectedTestimonials.length),this.showContinueButton(),void 0!==TVO_Front.preloader&&TVO_Front.preloader.hide(),this}}),TVO_Front.views.SelectTags=Backbone.View.extend({className:"tve_scT tve_green",events:{"click .tvo-tag-item":"addTag","change .tvo_max_testimonials":"saveMaxTestimonials"},initialize:function(){this.template=TVO_Front.tpl("select-tags")},updateTagCount:function(t){this.$(".tvo_tags_count b").html(t)},addTag:function(t){var e=parseInt(t.currentTarget.value,10),i=TVO_Front.objects.selectedTags.indexOf(e);t.currentTarget.checked?TVO_Front.objects.selectedTags.push(e):TVO_Front.objects.selectedTags.splice(i,1),this.updateTagCount(TVO_Front.objects.selectedTags.length),this.showContinueButton()},showContinueButton:function(){TVO_Front.objects.selectedTags.length>0?jQuery(".tvo-next").show():jQuery(".tvo-next").hide()},render:function(){return this.$el.html(this.template({max_testimonials:TVO_Front.objects.max_testimonials})),this.$("#tvo-tags-list").empty(),TVO_Front.objects.Tags.each(this.renderTag,this),t(".tvo-next").hide(),this.updateTagCount(TVO_Front.objects.selectedTags.length),this.showContinueButton(),void 0!==TVO_Front.preloader&&TVO_Front.preloader.hide(),this},renderTag:function(t){t.set("checked",-1!==TVO_Front.objects.selectedTags.indexOf(t.get("id")));var e=new TVO_Front.views.GenericItem({model:t,template:"tag-item",className:"tvo-col tvo-l4 tvo-m6 tvo-s12"});this.$("#tvo-tags-list").append(e.render().$el)},saveMaxTestimonials:function(t){TVO_Front.objects.max_testimonials=t.currentTarget.value}}),TVO_Front.views.TestimonialsList=Backbone.View.extend({render:function(t){this.$el.empty();var e=this.collection;return void 0!==t&&(e=new TVO_Front.collections.Testimonials(t)),e.each(this.renderOne,this),this},renderOne:function(t){t.set("tagNames",this.getTags(t.get("tags"))),t.set("checked",void 0!==TVO_Front.objects.selectedTestimonials.get(t.get("id")));var e=new TVO_Front.views.GenericItem({model:t,template:"testimonial-item",className:"tvo-testimonial-item tvo-row tvo-collapse"}).render().$el;this.$el.append(e)},getTags:function(t){var e=[];return _.each(t,(function(t,i){TVO_Front.all_tags.filter((function(i){i.id==t.id&&e.push(i.text)}))})),e}}),TVO_Front.views.TestimonialDisplayOptions=Backbone.View.extend({events:{"click .tvo-randomize-testimonials":"randomizeTestimonials"},testimonials:[],initialize:function(){this.template=TVO_Front.tpl("display-options")},renderOne:function(t){var e=new TVO_Front.views.GenericItem({model:t,template:"testimonial-order",className:"tvo-testimonial-order-item",attributes:{"data-id":t.get("id")}});return this.$(".tvo-testimonials-list-order").append(e.render().$el),this},render:function(){this.$el.html(this.template());var t=this.$(".tvo-testimonials-list-order");return t.empty(),t.sortable({placeholder:"ui-sortable-placeholder",forcePlaceholderSize:!0}),this.collection.each(this.renderOne,this),this.saveOrder(),this},saveOrder:function(){var e=this,i=e.$(".tvo-testimonial-order-item");t(".tvo-next").on("click",(function(){i.each((function(){var i=t(this),o=i.index(),s=i.attr("data-id");e.collection.get(s).set("order",o)}))}))},randomizeTestimonials:function(){this.collection.reset(this.collection.shuffle(),{silent:!0}),this.render()}}),TVO_Front.views.SaveTestimonialList=Backbone.View.extend({events:{"click .tvo-save-template":"displayTemplateSave","click #tvo-display-testimonials-shortcode-wrapper":"displayShortcode","click .tvo-save-testimonial-shortcode":"saveShortcode"},shortcode:{tags:[],testimonials:[],name:"",max_testimonials:0,show_site:1},initialize:function(){this.template=TVO_Front.tpl("save-testimonials-list"),this.setShortcodeConfig()},render:function(){return this.$el.html(this.template({count:"testimonials"===TVO_Front.objects.currentSelection?TVO_Front.objects.selectedTestimonials.length:TVO_Front.objects.selectedTags.length,selection:TVO_Front.objects.currentSelection})),this},setShortcodeConfig:function(){var t=[],e=[];void 0===TVO_Front.objects.selectedTestimonials||"tags"===TVO_Front.objects.currentSelection?this.shortcode.testimonials=[]:(TVO_Front.objects.selectedTestimonials.forEach((function(e,i){var o=e.get("order");void 0!==o?t[o]=e.get("id"):t[i]=e.get("id")})),this.shortcode.testimonials=t),void 0===TVO_Front.objects.selectedTags||"testimonials"===TVO_Front.objects.currentSelection?this.shortcode.tags=[]:(TVO_Front.objects.selectedTags.forEach((function(t){e.push(t)})),this.shortcode.tags=e,this.shortcode.max_testimonials=TVO_Front.objects.max_testimonials)},displayTemplateSave:function(){t(".tvo-template-name").show()},displayShortcode:function(){"undefined"!=typeof TVE&&TVE.ActiveElement.attr("data-update-styles",1),t(document).trigger("tvo.get.shortcode",this.shortcode)},saveShortcode:function(){"undefined"!=typeof TVE&&TVE.ActiveElement.attr("data-update-styles",1),this.shortcode.name=this.$(".tvo-display-testimonial-shortcode-name").val(),t(document).trigger("tvo.save.shortcode",this.shortcode)}}),TVO_Front.views.TestimonialPagination=Backbone.View.extend({events:{"click a.page":"changePage","change .tvo-items-per-page":"changeItemPerPage"},currentPage:1,pageCount:1,itemsPerPage:10,total_items:0,collection:null,params:null,type:"",view:null,template:null,initialize:function(t){this.collection=t.collection,this.view=t.view,this.type=t.type,this.template=TVO_Front.tpl("pagination/post-view")},changeItemPerPage:function(t){this.itemsPerPage=jQuery(t.target).val(),this.changePage(null,{page:1})},changePage:function(e,i){var o=this,s={itemsPerPage:this.itemsPerPage};if(e&&void 0!==e.currentTarget?s.page=jQuery(e.currentTarget).attr("value"):i&&void 0!==i.page?s.page=parseInt(i.page):s.page=this.currentPage,s.page<1&&(s.page=1),void 0!==i&&(void 0!==i.search_by&&(this.search_by=i.search_by),void 0!==i.tags&&(this.tags=i.tags),void 0!==i.title_filter&&(this.title_filter=i.title_filter),void 0!==i.image_filter&&(this.image_filter=i.image_filter),void 0!==i.count_from_filter&&(this.count_from_filter=i.count_from_filter),void 0!==i.count_to_filter&&(this.count_to_filter=i.count_to_filter),void 0!==i.count_to_filter&&(this.check_word_count=i.check_word_count)),s.search_by=this.search_by?this.search_by:"",s.tags=this.tags?this.tags:[],s.title_filter=this.title_filter?this.title_filter:"",s.image_filter=this.image_filter?this.image_filter:"",s.count_from_filter=this.count_from_filter?this.count_from_filter:"",s.count_to_filter=this.count_to_filter?this.count_to_filter:"",s.check_word_count=this.check_word_count,s.exclude=this.exclude?this.exclude:[],"dynamic"==this.type)this.collection.fetch({reset:!0,data:t.param(s),success:function(){0===o.collection.length&&o.collection.total_count>0&&1!=o.currentPage?o.changePage(null,{page:o.currentPage-1}):(o.updateParams(s.page,o.collection.total_count),o.render())}});else if("static"==this.type&&void 0!==this.view&&null!=this.view){this.updateParams(s.page,this.collection.length);var n,r=this.collection.clone(),a=(this.currentPage-1)*this.itemsPerPage,l=[];for(var c in void 0!==r.comparator&&r.sort(),r.each((function(t){if(s.search_by.length>0){var e=s.search_by,i=t.get("name")||"",o=t.get("content")||"";-1===i.toLowerCase().indexOf(e.toLowerCase())&&-1===o.toLowerCase().indexOf(e.toLowerCase())&&l.push(t)}if(s.tags.length>0){for(var n=!0,r=t.get("tags").map((function(t){return t.id})),a=0;a<s.tags.length;a++)-1!==r.indexOf(parseInt(s.tags[a]))&&(n=!1);n&&l.push(t)}if(""!=s.title_filter){var c=s.title_filter,h=t.get("title")||"";switch(c){case"with-title":""==h&&l.push(t);break;case"without-title":""!=h&&l.push(t)}}if(""!=s.image_filter)switch(s.image_filter){case"with-image":0==t.get("has_picture")&&l.push(t);break;case"without-image":1==t.get("has_picture")&&l.push(t)}if(s.check_word_count&&""!=s.count_from_filter&&""!=s.count_to_filter){var d=t.get("summary").match(/\b(\w+)\b/g).length;(d<s.count_from_filter||d>s.count_to_filter)&&l.push(t)}})),l)r.remove(l[c]);this.updateParams(s.page,r.length),n=r.chain().rest(a).first(this.itemsPerPage).value(),this.view.render(n),0===n.length&&jQuery("#tvo-testimonials-list").html(TVO_Front.tpl("pagination/no-results")),this.render()}return!1},updateParams:function(t,e){this.currentPage=t,this.total_items=e,this.pageCount=Math.ceil(this.total_items/this.itemsPerPage)},setupParams:function(t){this.currentPage=t,this.total_items=this.collection.length,this.pageCount=Math.ceil(this.total_items/this.itemsPerPage)},render:function(){return this.$el.html(this.template({currentPage:parseInt(this.currentPage),pageCount:parseInt(this.pageCount),total_items:parseInt(this.total_items),itemsPerPage:parseInt(this.itemsPerPage)})),this}})}))}(jQuery)})();