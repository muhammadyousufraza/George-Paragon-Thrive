/*! For license information please see joint.min.js.LICENSE.txt */
((t,e)=>{function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}var n,r,s,a;n=window,r=window.Backbone,s=window._,a=window.jQuery,n.joint=function(t,n,r,s){(function(){var t=e,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(t){this.message=t}n.prototype=new Error,n.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var e,r,s=String(t),a=0,o=i,l="";s.charAt(0|a)||(o="=",a%1);l+=o.charAt(63&e>>8-a%1*8)){if((r=s.charCodeAt(a+=3/4))>255)throw new n("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|r}return l}),t.atob||(t.atob=function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,s,a=0,o=0,l="";s=e.charAt(o++);~s&&(r=a%4?64*r+s:s,a++%4)?l+=String.fromCharCode(255&r>>(-2*a&6)):0)s=i.indexOf(s);return l})})(),function(){function t(t,e){return this.slice(t,e)}function e(t,e){arguments.length<2&&(e=0);for(var i=0,n=t.length;i<n;++i,++e)this[e]=255&t[i]}function n(n){var r;if("number"==typeof n){r=new Array(n);for(var s=0;s<n;++s)r[s]=0}else r=n.slice(0);return r.subarray=t,r.buffer=r,r.byteLength=r.length,r.set=e,"object"===i(n)&&n.buffer&&(r.buffer=n.buffer),r}"undefined"==typeof Uint8Array&&"undefined"!=typeof window&&(window.Uint8Array=n,window.Uint32Array=n,window.Int32Array=n)}(),"undefined"!=typeof XMLHttpRequest&&("response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype||Object.defineProperty(XMLHttpRequest.prototype,"response",{get:function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}}));var a,o=function(){var t={},e=Math,i=e.abs,n=e.cos,r=e.sin,s=e.sqrt,a=e.min,o=e.max,l=e.atan2,g=e.round,c=e.floor,h=e.PI,d=e.random;t.bezier={curveThroughPoints:function(t){for(var e=this.getCurveControlPoints(t),i=["M",t[0].x,t[0].y],n=0;n<e[0].length;n++)i.push("C",e[0][n].x,e[0][n].y,e[1][n].x,e[1][n].y,t[n+1].x,t[n+1].y);return i},getCurveControlPoints:function(t){var e,i=[],n=[],r=t.length-1;if(1==r)return i[0]=p((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),n[0]=p(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,n];var s=[];for(e=1;e<r-1;e++)s[e]=4*t[e].x+2*t[e+1].x;s[0]=t[0].x+2*t[1].x,s[r-1]=(8*t[r-1].x+t[r].x)/2;var a=this.getFirstControlPoints(s);for(e=1;e<r-1;++e)s[e]=4*t[e].y+2*t[e+1].y;s[0]=t[0].y+2*t[1].y,s[r-1]=(8*t[r-1].y+t[r].y)/2;var o=this.getFirstControlPoints(s);for(e=0;e<r;e++)i.push(p(a[e],o[e])),e<r-1?n.push(p(2*t[e+1].x-a[e+1],2*t[e+1].y-o[e+1])):n.push(p((t[r].x+a[r-1])/2,(t[r].y+o[r-1])/2));return[i,n]},getCurveDivider:function(t,e,i,n){return function(r){var s=u(t,e).pointAt(r),a=u(e,i).pointAt(r),o=u(i,n).pointAt(r),l=u(s,a).pointAt(r),g=u(a,o).pointAt(r),c=u(l,g).pointAt(r);return[{p0:t,p1:s,p2:l,p3:c},{p0:c,p1:g,p2:o,p3:n}]}},getFirstControlPoints:function(t){var e=t.length,i=[],n=[],r=2;i[0]=t[0]/r;for(var s=1;s<e;s++)n[s]=1/r,r=(s<e-1?4:3.5)-n[s],i[s]=(t[s]-i[s-1])/r;for(s=1;s<e;s++)i[e-s-1]-=n[e-s]*i[e-s];return i},getInversionSolver:function(t,e,i,n){var r=arguments;function s(t,e){var i=r[t],n=r[e];return function(r){return(t%3?3:1)*(e%3?3:1)*(r.x*(i.y-n.y)+r.y*(n.x-i.x)+i.x*n.y-i.y*n.x)}}return function(i){var n=3*s(2,3)(e),r=s(1,3)(t)/n,a=-s(2,3)(t)/n,o=r*s(3,1)(i)+a*(s(3,0)(i)+s(2,1)(i))+s(2,0)(i),l=r*s(3,0)(i)+a*s(2,0)(i)+s(1,0)(i);return l/(l-o)}}};var I=t.Ellipse=function(t,e,i){return this instanceof I?t instanceof I?new I(p(t),t.a,t.b):(t=p(t),this.x=t.x,this.y=t.y,this.a=e,void(this.b=i)):new I(t,e,i)};t.Ellipse.fromRect=function(t){return t=C(t),I(t.center(),t.width/2,t.height/2)},t.Ellipse.prototype={bbox:function(){return C(this.x-this.a,this.y-this.b,2*this.a,2*this.b)},clone:function(){return I(this)},normalizedDistance:function(t){var e=t.x,i=t.y,n=this.a,r=this.b,s=this.x,a=this.y;return(e-s)*(e-s)/(n*n)+(i-a)*(i-a)/(r*r)},containsPoint:function(t){return this.normalizedDistance(t)<=1},center:function(){return p(this.x,this.y)},tangentTheta:function(e){var i,n,r=e.x,s=e.y,a=this.a,o=this.b,l=this.bbox().center(),g=l.x,c=l.y,h=r>l.x+a/2,d=r<l.x-a/2;return h||d?n=a*a/(r-g)-a*a*(s-c)*((i=r>l.x?s-30:s+30)-c)/(o*o*(r-g))+g:i=o*o/(s-c)-o*o*(r-g)*((n=s>l.y?r+30:r-30)-g)/(a*a*(s-c))+c,t.point(n,i).theta(e)},equals:function(t){return(t=I(t)).x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b},intersectionWithLineFromCenterToPoint:function(t,e){t=p(t),e&&t.rotate(p(this.x,this.y),e);var i,n=t.x-this.x,r=t.y-this.y;if(0===n)return i=this.bbox().pointNearestToPoint(t),e?i.rotate(p(this.x,this.y),-e):i;var a=r/n,o=a*a,l=this.a*this.a,g=this.b*this.b,c=s(1/(1/l+o/g)),h=a*(c=n<0?-c:c);return i=p(this.x+c,this.y+h),e?i.rotate(p(this.x,this.y),-e):i},toString:function(){return p(this.x,this.y).toString()+" "+this.a+" "+this.b}};var u=t.Line=function(t,e){if(!(this instanceof u))return new u(t,e);this.start=p(t),this.end=p(e)};t.Line.prototype={bearing:function(){var t=y(this.start.y),e=y(this.end.y),i=this.start.x,s=this.end.x,a=y(s-i),o=r(a)*n(e),g=n(t)*r(e)-r(t)*n(e)*n(a),c=f(l(o,g))-22.5;return c<0&&(c+=360),["NE","E","SE","S","SW","W","NW","N"][c=parseInt(c/45)]},clone:function(){return u(this)},intersection:function(t){var e=p(this.end.x-this.start.x,this.end.y-this.start.y),i=p(t.end.x-t.start.x,t.end.y-t.start.y),n=e.x*i.y-e.y*i.x,r=p(t.start.x-this.start.x,t.start.y-this.start.y),s=r.x*i.y-r.y*i.x,a=r.x*e.y-r.y*e.x;if(0===n||s*n<0||a*n<0)return null;if(n>0){if(s>n||a>n)return null}else if(s<n||a<n)return null;return p(this.start.x+s*e.x/n,this.start.y+s*e.y/n)},length:function(){return s(this.squaredLength())},midpoint:function(){return p((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)},pointAt:function(t){var e=(1-t)*this.start.x+t*this.end.x,i=(1-t)*this.start.y+t*this.end.y;return p(e,i)},pointOffset:function(t){return((this.end.x-this.start.x)*(t.y-this.start.y)-(this.end.y-this.start.y)*(t.x-this.start.x))/2},squaredLength:function(){var t=this.start.x,e=this.start.y;return(t-=this.end.x)*t+(e-=this.end.y)*e},toString:function(){return this.start.toString()+" "+this.end.toString()}};var p=t.Point=function(t,e){if(!(this instanceof p))return new p(t,e);if("string"==typeof t){var i=t.split(-1===t.indexOf("@")?" ":"@");t=parseInt(i[0],10),e=parseInt(i[1],10)}else Object(t)===t&&(e=t.y,t=t.x);this.x=void 0===t?0:t,this.y=void 0===e?0:e};t.Point.fromPolar=function(t,e,s){s=s&&p(s)||p(0,0);var a=i(t*n(e)),o=i(t*r(e)),l=A(f(e));return l<90?o=-o:l<180?(a=-a,o=-o):l<270&&(a=-a),p(s.x+a,s.y+o)},t.Point.random=function(t,e,i,n){return p(c(d()*(e-t+1)+t),c(d()*(n-i+1)+i))},t.Point.prototype={adhereToRect:function(t){return t.containsPoint(this)||(this.x=a(o(this.x,t.x),t.x+t.width),this.y=a(o(this.y,t.y),t.y+t.height)),this},bearing:function(t){return u(this,t).bearing()},changeInAngle:function(t,e,i){return p(this).offset(-t,-e).theta(i)-this.theta(i)},clone:function(){return p(this)},difference:function(t){return p(this.x-t.x,this.y-t.y)},distance:function(t){return u(this,t).length()},equals:function(t){return this.x===t.x&&this.y===t.y},magnitude:function(){return s(this.x*this.x+this.y*this.y)||.01},manhattanDistance:function(t){return i(t.x-this.x)+i(t.y-this.y)},move:function(t,e){var i=y(p(t).theta(this));return this.offset(n(i)*e,-r(i)*e)},normalize:function(t){var e=(t||1)/this.magnitude();return this.scale(e,e)},offset:function(t,e){return this.x+=t||0,this.y+=e||0,this},reflection:function(t){return p(t).move(this,this.distance(t))},rotate:function(t,e){e=(e+360)%360,this.toPolar(t),this.y+=y(e);var i=p.fromPolar(this.x,this.y,t);return this.x=i.x,this.y=i.y,this},round:function(t){return this.x=t?this.x.toFixed(t):g(this.x),this.y=t?this.y.toFixed(t):g(this.y),this},scale:function(t,e,i){return i=i&&p(i)||p(0,0),this.x=i.x+t*(this.x-i.x),this.y=i.y+e*(this.y-i.y),this},snapToGrid:function(t,e){return this.x=m(this.x,t),this.y=m(this.y,e||t),this},theta:function(t){var e=-((t=p(t)).y-this.y),i=t.x-this.x,n=0==e.toFixed(10)&&0==i.toFixed(10)?0:l(e,i);return n<0&&(n=2*h+n),180*n/h},toJSON:function(){return{x:this.x,y:this.y}},toPolar:function(t){t=t&&p(t)||p(0,0);var e=this.x,i=this.y;return this.x=s((e-t.x)*(e-t.x)+(i-t.y)*(i-t.y)),this.y=y(t.theta(p(e,i))),this},toString:function(){return this.x+"@"+this.y},update:function(t,e){return this.x=t||0,this.y=e||0,this}};var C=t.Rect=function(t,e,i,n){if(!(this instanceof C))return new C(t,e,i,n);Object(t)===t&&(e=t.y,i=t.width,n=t.height,t=t.x),this.x=void 0===t?0:t,this.y=void 0===e?0:e,this.width=void 0===i?0:i,this.height=void 0===n?0:n};t.Rect.fromEllipse=function(t){return t=I(t),C(t.x-t.a,t.y-t.b,2*t.a,2*t.b)},t.Rect.prototype={bbox:function(t){var e=y(t||0),s=i(r(e)),a=i(n(e)),o=this.width*a+this.height*s,l=this.width*s+this.height*a;return C(this.x+(this.width-o)/2,this.y+(this.height-l)/2,o,l)},bottomLeft:function(){return p(this.x,this.y+this.height)},bottomMiddle:function(){return p(this.x+this.width/2,this.y+this.height)},center:function(){return p(this.x+this.width/2,this.y+this.height/2)},clone:function(){return C(this)},containsPoint:function(t){return(t=p(t)).x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height},containsRect:function(t){var e=C(this).normalize(),i=C(t).normalize(),n=e.width,r=e.height,s=i.width,a=i.height;if(!(n&&r&&s&&a))return!1;var o=e.x,l=e.y,g=i.x,c=i.y;return s+=g,n+=o,a+=c,r+=l,o<=g&&s<=n&&l<=c&&a<=r},corner:function(){return p(this.x+this.width,this.y+this.height)},equals:function(t){var e=C(this).normalize(),i=C(t).normalize();return e.x===i.x&&e.y===i.y&&e.width===i.width&&e.height===i.height},intersect:function(t){var e=this.origin(),i=this.corner(),n=t.origin(),r=t.corner();if(r.x<=e.x||r.y<=e.y||n.x>=i.x||n.y>=i.y)return null;var s=Math.max(e.x,n.x),a=Math.max(e.y,n.y);return C(s,a,Math.min(i.x,r.x)-s,Math.min(i.y,r.y)-a)},intersectionWithLineFromCenterToPoint:function(t,e){t=p(t);var i,n=p(this.x+this.width/2,this.y+this.height/2);e&&t.rotate(n,e);for(var r=[u(this.origin(),this.topRight()),u(this.topRight(),this.corner()),u(this.corner(),this.bottomLeft()),u(this.bottomLeft(),this.origin())],s=u(n,t),a=r.length-1;a>=0;--a){var o=r[a].intersection(s);if(null!==o){i=o;break}}return i&&e&&i.rotate(n,-e),i},leftMiddle:function(){return p(this.x,this.y+this.height/2)},moveAndExpand:function(t){return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this},normalize:function(){var t=this.x,e=this.y,i=this.width,n=this.height;return this.width<0&&(t=this.x+this.width,i=-this.width),this.height<0&&(e=this.y+this.height,n=-this.height),this.x=t,this.y=e,this.width=i,this.height=n,this},origin:function(){return p(this.x,this.y)},pointNearestToPoint:function(t){if(t=p(t),this.containsPoint(t))switch(this.sideNearestToPoint(t)){case"right":return p(this.x+this.width,t.y);case"left":return p(this.x,t.y);case"bottom":return p(t.x,this.y+this.height);case"top":return p(t.x,this.y)}return t.adhereToRect(this)},rightMiddle:function(){return p(this.x+this.width,this.y+this.height/2)},round:function(t){return this.x=t?this.x.toFixed(t):g(this.x),this.y=t?this.y.toFixed(t):g(this.y),this.width=t?this.width.toFixed(t):g(this.width),this.height=t?this.height.toFixed(t):g(this.height),this},scale:function(t,e,i){return i=this.origin().scale(t,e,i),this.x=i.x,this.y=i.y,this.width*=t,this.height*=e,this},sideNearestToPoint:function(t){var e=(t=p(t)).x-this.x,i=this.x+this.width-t.x,n=t.y-this.y,r=this.y+this.height-t.y,s=e,a="left";return i<s&&(s=i,a="right"),n<s&&(s=n,a="top"),r<s&&(s=r,a="bottom"),a},snapToGrid:function(t,e){var i=this.origin().snapToGrid(t,e),n=this.corner().snapToGrid(t,e);return this.x=i.x,this.y=i.y,this.width=n.x-i.x,this.height=n.y-i.y,this},topMiddle:function(){return p(this.x+this.width/2,this.y)},topRight:function(){return p(this.x+this.width,this.y)},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},toString:function(){return this.origin().toString()+" "+this.corner().toString()},union:function(t){var e=this.origin(),i=this.corner(),n=t.origin(),r=t.corner(),s=Math.min(e.x,n.x),a=Math.min(e.y,n.y),o=Math.max(i.x,r.x),l=Math.max(i.y,r.y);return C(s,a,o-s,l-a)}};var A=t.normalizeAngle=function(t){return t%360+(t<0?360:0)};t.scale={linear:function(t,e,i){var n=t[1]-t[0],r=e[1]-e[0];return(i-t[0])/n*r+e[0]||0}};var m=t.snapToGrid=function(t,e){return e*Math.round(t/e)},f=t.toDeg=function(t){return 180*t/h%360},y=t.toRad=function(t,e){return(t=(e=e||!1)?t:t%360)*h/180};return t.ellipse=t.Ellipse,t.line=t.Line,t.point=t.Point,t.rect=t.Rect,t}();a=function(){"use strict";if("object"!==("undefined"==typeof window?"undefined":i(window))||!window.SVGAngle&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"))return function(){throw new Error("SVG is required to use Vectorizer.")};var t={xmlns:"http://www.w3.org/2000/svg",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink"},e=function e(i,n,r){if(!(this instanceof e))return e.apply(Object.create(e.prototype),arguments);if(i){if(e.isV(i)&&(i=i.node),n=n||{},e.isString(i))if("svg"===i.toLowerCase())i=e.createSvgDocument();else if("<"===i[0]){var s=e.createSvgDocument(i);if(s.childNodes.length>1){var a,o,l=[];for(a=0,o=s.childNodes.length;a<o;a++){var g=s.childNodes[a];l.push(new e(document.importNode(g,!0)))}return l}i=document.importNode(s.firstChild,!0)}else i=document.createElementNS(t.xmlns,i);return this.node=i,this.node.id||(this.node.id=e.uniqueId()),this.setAttributes(n),r&&this.append(r),this}};e.prototype.getTransformToElement=function(t){return t.getScreenCTM().inverse().multiply(this.node.getScreenCTM())},e.matrixToTransformString=function(t){return t||(t=!0),"matrix("+[t.a||1,t.b||0,t.c||0,t.d||1,t.e||0,t.f||0]+")"},e.prototype.transform=function(t,i){if(e.isUndefined(t))return this.node.parentNode?this.getTransformToElement(this.node.parentNode):this.node.getScreenCTM();if(i&&i.absolute)return this.attr("transform",e.matrixToTransformString(t));var n=this.node.transform.baseVal;i&&i.absolute&&n.clear();var r=e.createSVGTransform(t);return n.appendItem(r),this},e.prototype.translate=function(t,i,n){n=n||{},i=i||0;var r=this.attr("transform")||"",s=e.parseTransformString(r);if(e.isUndefined(t))return s.translate;r=r.replace(/translate\([^\)]*\)/g,"").trim();var a="translate("+(n.absolute?t:s.translate.tx+t)+","+(n.absolute?i:s.translate.ty+i)+")";return this.attr("transform",(a+" "+r).trim()),this},e.prototype.rotate=function(t,i,n,r){r=r||{};var s=this.attr("transform")||"",a=e.parseTransformString(s);if(e.isUndefined(t))return a.rotate;s=s.replace(/rotate\([^\)]*\)/g,"").trim(),t%=360;var o="rotate("+(r.absolute?t:a.rotate.angle+t)+(void 0!==i&&void 0!==n?","+i+","+n:"")+")";return this.attr("transform",(s+" "+o).trim()),this},e.prototype.scale=function(t,i){i=e.isUndefined(i)?t:i;var n=this.attr("transform")||"",r=e.parseTransformString(n);if(e.isUndefined(t))return r.scale;n=n.replace(/scale\([^\)]*\)/g,"").trim();var s="scale("+t+","+i+")";return this.attr("transform",(n+" "+s).trim()),this},e.prototype.bbox=function(t,i){if(!this.node.ownerSVGElement)return{x:0,y:0,width:0,height:0};var n;try{n={x:(n=this.node.getBBox()).x,y:n.y,width:n.width,height:n.height}}catch(t){n={x:this.node.clientLeft,y:this.node.clientTop,width:this.node.clientWidth,height:this.node.clientHeight}}if(t)return n;var r=this.getTransformToElement(i||this.node.ownerSVGElement);return e.transformRect(n,r)},e.prototype.text=function(t,i){i=i||{};var n,r=(t=e.sanitizeText(t)).split("\n");this.attr("y")||this.attr("y","0.8em"),this.attr("display",t?null:"none"),this.attr("xml:space","preserve"),this.node.textContent="";var s=this.node;if(i.textPath){var a=this.find("defs");0===a.length&&(a=e("defs"),this.append(a));var o=Object(i.textPath)===i.textPath?i.textPath.d:i.textPath;if(o){var l=e("path",{d:o});a.append(l)}var g=e("textPath");!i.textPath["xlink:href"]&&l&&g.attr("xlink:href","#"+l.node.id),Object(i.textPath)===i.textPath&&g.attr(i.textPath),this.append(g),s=g.node}for(var c=0,h=0;h<r.length;h++){var d=r[h],I=i.lineHeight||"1em";"auto"===i.lineHeight&&(I="1.5em");var u=e("tspan",{dy:0==h?"0em":I,x:this.attr("x")||0});if(u.addClass("v-line"),d)if(i.annotations){for(var p=0,C=e.annotateString(r[h],e.isArray(i.annotations)?i.annotations:[i.annotations],{offset:-c,includeAnnotationIndices:i.includeAnnotationIndices}),A=0;A<C.length;A++){var m=C[A];if(e.isObject(m)){var f=parseInt(m.attrs["font-size"],10);f&&f>p&&(p=f),n=e("tspan",m.attrs),i.includeAnnotationIndices&&n.attr("annotations",m.annotations),m.attrs.class&&n.addClass(m.attrs.class),n.node.textContent=m.t}else n=document.createTextNode(m||" ");u.append(n)}"auto"===i.lineHeight&&p&&0!==h&&u.attr("dy",1.2*p+"px")}else u.node.textContent=d;else u.addClass("v-empty-line"),u.node.style.fillOpacity=0,u.node.style.strokeOpacity=0,u.node.textContent="-";e(s).append(u),c+=d.length+1}return this},e.prototype.removeAttr=function(t){var i=e.qualifyAttr(t),n=this.node;return i.ns?n.hasAttributeNS(i.ns,i.local)&&n.removeAttributeNS(i.ns,i.local):n.hasAttribute(t)&&n.removeAttribute(t),this},e.prototype.attr=function(t,n){if(e.isUndefined(t)){for(var r=this.node.attributes,s={},a=0;a<r.length;a++)s[r[a].name]=r[a].value;return s}if(e.isString(t)&&e.isUndefined(n))return this.node.getAttribute(t);if("object"===i(t))for(var o in t)t.hasOwnProperty(o)&&this.setAttribute(o,t[o]);else this.setAttribute(t,n);return this},e.prototype.remove=function(){return this.node.parentNode&&this.node.parentNode.removeChild(this.node),this},e.prototype.empty=function(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);return this},e.prototype.setAttributes=function(t){for(var e in t)t.hasOwnProperty(e)&&this.setAttribute(e,t[e]);return this},e.prototype.append=function(t){e.isArray(t)||(t=[t]);for(var i=0,n=t.length;i<n;i++)this.node.appendChild(e.toNode(t[i]));return this},e.prototype.prepend=function(t){var i=this.node.firstChild;return i?e(i).before(t):this.append(t)},e.prototype.before=function(t){var i=this.node,n=i.parentNode;if(n){e.isArray(t)||(t=[t]);for(var r=0,s=t.length;r<s;r++)n.insertBefore(e.toNode(t[r]),i)}return this},e.prototype.svg=function(){return this.node instanceof window.SVGSVGElement?this:e(this.node.ownerSVGElement)},e.prototype.defs=function(){var t=this.svg().node.getElementsByTagName("defs");return t&&t.length?e(t[0]):void 0},e.prototype.clone=function(){var t=e(this.node.cloneNode(!0));return t.node.id=e.uniqueId(),t},e.prototype.findOne=function(t){var i=this.node.querySelector(t);return i?e(i):void 0},e.prototype.find=function(t){var i=[],n=this.node.querySelectorAll(t);if(n)for(var r=0;r<n.length;r++)i.push(e(n[r]));return i},e.prototype.index=function(){for(var t=0,e=this.node.previousSibling;e;)1===e.nodeType&&t++,e=e.previousSibling;return t},e.prototype.findParentByClass=function(t,i){for(var n=this.node.ownerSVGElement,r=this.node.parentNode;r&&r!==i&&r!==n;){var s=e(r);if(s.hasClass(t))return s;r=r.parentNode}return null},e.prototype.toLocalPoint=function(t,e){var i=this.svg().node,n=i.createSVGPoint();n.x=t,n.y=e;try{var r=n.matrixTransform(i.getScreenCTM().inverse()),s=this.getTransformToElement(i).inverse()}catch(t){return n}return r.matrixTransform(s)},e.prototype.translateCenterToPoint=function(t){var e=this.bbox(),i=o.rect(e).center();this.translate(t.x-i.x,t.y-i.y)},e.prototype.translateAndAutoOrient=function(t,i,n){var r=this.scale();this.attr("transform",""),this.scale(r.sx,r.sy);var s=this.svg().node,a=this.bbox(!1,n),l=s.createSVGTransform();l.setTranslate(-a.x-a.width/2,-a.y-a.height/2);var g=s.createSVGTransform(),c=o.point(t).changeInAngle(t.x-i.x,t.y-i.y,i);g.setRotate(c,0,0);var h=s.createSVGTransform(),d=o.point(t).move(i,a.width/2);h.setTranslate(t.x+(t.x-d.x),t.y+(t.y-d.y));var I=this.getTransformToElement(n),u=s.createSVGTransform();u.setMatrix(h.matrix.multiply(g.matrix.multiply(l.matrix.multiply(I))));var p=e.decomposeMatrix(u.matrix);return this.translate(p.translateX,p.translateY),this.rotate(p.rotation),this},e.prototype.animateAlongPath=function(t,i){var n=e("animateMotion",t),r=e("mpath",{"xlink:href":"#"+e(i).node.id});n.append(r),this.append(n);try{n.node.beginElement()}catch(t){if("fake"===document.documentElement.getAttribute("smiling")){var s=n.node;s.animators=[];var a=s.getAttribute("id");a&&(id2anim[a]=s);for(var o=getTargets(s),l=0,g=o.length;l<g;l++){var c=o[l],h=new Animator(s,c,l);animators.push(h),s.animators[l]=h,h.register()}}}},e.prototype.hasClass=function(t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(this.node.getAttribute("class"))},e.prototype.addClass=function(t){if(!this.hasClass(t)){var e=this.node.getAttribute("class")||"";this.node.setAttribute("class",(e+" "+t).trim())}return this},e.prototype.removeClass=function(t){if(this.hasClass(t)){var e=this.node.getAttribute("class").replace(new RegExp("(\\s|^)"+t+"(\\s|$)","g"),"$2");this.node.setAttribute("class",e)}return this},e.prototype.toggleClass=function(t,i){return(e.isUndefined(i)?this.hasClass(t):!i)?this.removeClass(t):this.addClass(t),this},e.prototype.sample=function(t){t=t||1;for(var e,i=this.node,n=i.getTotalLength(),r=[],s=0;s<n;)e=i.getPointAtLength(s),r.push({x:e.x,y:e.y,distance:s}),s+=t;return r},e.prototype.convertToPath=function(){var t=e("path");t.attr(this.attr());var i=this.convertToPathData();return i&&t.attr("d",i),t},e.prototype.convertToPathData=function(){var t=this.node.tagName.toUpperCase();switch(t){case"PATH":return this.attr("d");case"LINE":return e.convertLineToPathData(this.node);case"POLYGON":return e.convertPolygonToPathData(this.node);case"POLYLINE":return e.convertPolylineToPathData(this.node);case"ELLIPSE":return e.convertEllipseToPathData(this.node);case"CIRCLE":return e.convertCircleToPathData(this.node);case"RECT":return e.convertRectToPathData(this.node)}throw new Error(t+" cannot be converted to PATH.")},e.prototype.findIntersection=function(t,i){var n=this.svg().node;i=i||n;var r=o.rect(this.bbox(!1,i)),s=r.center();if(r.intersectionWithLineFromCenterToPoint(t)){var a,l=this.node.localName.toUpperCase();if("RECT"===l){var g=o.rect(parseFloat(this.attr("x")||0),parseFloat(this.attr("y")||0),parseFloat(this.attr("width")),parseFloat(this.attr("height"))),c=this.getTransformToElement(i),h=e.decomposeMatrix(c),d=n.createSVGTransform();d.setRotate(-h.rotation,s.x,s.y);var I=e.transformRect(g,d.matrix.multiply(c));a=o.rect(I).intersectionWithLineFromCenterToPoint(t,h.rotation)}else if("PATH"===l||"POLYGON"===l||"POLYLINE"===l||"CIRCLE"===l||"ELLIPSE"===l){var u,p,C,A,m,f=("PATH"===l?this:this.convertToPath()).sample(),y=1/0,w=[];for(u=0;u<f.length;u++)p=f[u],C=(C=e.createSVGPoint(p.x,p.y)).matrixTransform(this.getTransformToElement(i)),(m=(p=o.point(C)).distance(s)+(A=1.1*p.distance(t)))<y?(y=m,w=[{sample:p,refDistance:A}]):m<y+1&&w.push({sample:p,refDistance:A});w.sort((function(t,e){return t.refDistance-e.refDistance})),w[0]&&(a=w[0].sample)}return a}},e.prototype.setAttribute=function(t,i){var n=this.node;if(null===i)return this.removeAttr(t),this;var r=e.qualifyAttr(t);return r.ns?n.setAttributeNS(r.ns,t,i):"id"===t?n.id=i:n.setAttribute(t,i),this},e.createSvgDocument=function(i){return e.parseXML('<svg xmlns="'+t.xmlns+'" xmlns:xlink="'+t.xlink+'" version="1.1">'+(i||"")+"</svg>",{async:!1}).documentElement},e.idCounter=0,e.uniqueId=function(){return"v-"+ ++e.idCounter},e.sanitizeText=function(t){return(t||"").replace(/ /g," ")},e.isUndefined=function(t){return void 0===t},e.isString=function(t){return"string"==typeof t},e.isObject=function(t){return t&&"object"===i(t)},e.isArray=Array.isArray,e.parseXML=function(t,i){var n;i=i||{};try{var r=new DOMParser;e.isUndefined(i.async)||(r.async=i.async),n=r.parseFromString(t,"text/xml")}catch(t){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n},e.qualifyAttr=function(e){if(-1!==e.indexOf(":")){var i=e.split(":");return{ns:t[i[0]],local:i[1]}}return{ns:null,local:e}},e.parseTransformString=function(t){var e,i,n;if(t){var r=/[ ,]+/,s=t.match(/translate\((.*)\)/);s&&(e=s[1].split(r));var a=t.match(/rotate\((.*)\)/);a&&(i=a[1].split(r));var o=t.match(/scale\((.*)\)/);o&&(n=o[1].split(r))}var l=n&&n[0]?parseFloat(n[0]):1;return{translate:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotate:{angle:i&&i[0]?parseInt(i[0],10):0,cx:i&&i[1]?parseInt(i[1],10):void 0,cy:i&&i[2]?parseInt(i[2],10):void 0},scale:{sx:l,sy:n&&n[1]?parseFloat(n[1]):l}}},e.deltaTransformPoint=function(t,e){return{x:e.x*t.a+e.y*t.c+0,y:e.x*t.b+e.y*t.d+0}},e.decomposeMatrix=function(t){var i=e.deltaTransformPoint(t,{x:0,y:1}),n=e.deltaTransformPoint(t,{x:1,y:0}),r=180/Math.PI*Math.atan2(i.y,i.x)-90,s=180/Math.PI*Math.atan2(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:r,skewY:s,rotation:r}},e.isVElement=e.isV=function(t){return t instanceof e};var n=e("svg").node;return e.createSVGMatrix=function(t){var e=n.createSVGMatrix();for(var i in t)e[i]=t[i];return e},e.createSVGTransform=function(t){return e.isUndefined(t)?n.createSVGTransform():(t instanceof SVGMatrix||(t=e.createSVGMatrix(t)),n.createSVGTransformFromMatrix(t))},e.createSVGPoint=function(t,e){var i=n.createSVGPoint();return i.x=t,i.y=e,i},e.transformRect=function(t,e){var i=n.createSVGPoint();i.x=t.x,i.y=t.y;var r=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y;var s=i.matrixTransform(e);i.x=t.x+t.width,i.y=t.y+t.height;var a=i.matrixTransform(e);i.x=t.x,i.y=t.y+t.height;var o=i.matrixTransform(e),l=Math.min(r.x,s.x,a.x,o.x),g=Math.max(r.x,s.x,a.x,o.x),c=Math.min(r.y,s.y,a.y,o.y);return{x:l,y:c,width:g-l,height:Math.max(r.y,s.y,a.y,o.y)-c}},e.transformPoint=function(t,i){return e.createSVGPoint(t.x,t.y).matrixTransform(i)},e.styleToObject=function(t){for(var e={},i=t.split(";"),n=0;n<i.length;n++){var r=i[n].split("=");e[r[0].trim()]=r[1].trim()}return e},e.createSlicePathData=function(t,e,i,n){var r=2*Math.PI-1e-6,s=t,a=e,o=i,l=n,g=(l<o&&(g=o,o=l,l=g),l-o),c=g<Math.PI?"0":"1",h=Math.cos(o),d=Math.sin(o),I=Math.cos(l),u=Math.sin(l);return g>=r?s?"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"M0,"+s+"A"+s+","+s+" 0 1,0 0,"+-s+"A"+s+","+s+" 0 1,0 0,"+s+"Z":"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z":s?"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+c+",1 "+a*I+","+a*u+"L"+s*I+","+s*u+"A"+s+","+s+" 0 "+c+",0 "+s*h+","+s*d+"Z":"M"+a*h+","+a*d+"A"+a+","+a+" 0 "+c+",1 "+a*I+","+a*u+"L0,0Z"},e.mergeAttrs=function(t,i){for(var n in i)"class"===n?t[n]=t[n]?t[n]+" "+i[n]:i[n]:"style"===n?e.isObject(t[n])&&e.isObject(i[n])?t[n]=e.mergeAttrs(t[n],i[n]):e.isObject(t[n])?t[n]=e.mergeAttrs(t[n],e.styleToObject(i[n])):e.isObject(i[n])?t[n]=e.mergeAttrs(e.styleToObject(t[n]),i[n]):t[n]=e.mergeAttrs(e.styleToObject(t[n]),e.styleToObject(i[n])):t[n]=i[n];return t},e.annotateString=function(t,i,n){i=i||[];for(var r,s,a,o=(n=n||{}).offset||0,l=[],g=[],c=0;c<t.length;c++){s=g[c]=t[c];for(var h=0;h<i.length;h++){var d=i[h],I=d.start+o,u=d.end+o;c>=I&&c<u&&(e.isObject(s)?s.attrs=e.mergeAttrs(e.mergeAttrs({},s.attrs),d.attrs):s=g[c]={t:t[c],attrs:d.attrs},n.includeAnnotationIndices&&(s.annotations||(s.annotations=[])).push(h))}(a=g[c-1])?e.isObject(s)&&e.isObject(a)?JSON.stringify(s.attrs)===JSON.stringify(a.attrs)?r.t+=s.t:(l.push(r),r=s):e.isObject(s)||e.isObject(a)?(l.push(r),r=s):r=(r||"")+s:r=s}return r&&l.push(r),l},e.findAnnotationsAtIndex=function(t,e){var i=[];return t&&t.forEach((function(t){t.start<e&&e<=t.end&&i.push(t)})),i},e.findAnnotationsBetweenIndexes=function(t,e,i){var n=[];return t&&t.forEach((function(t){(e>=t.start&&e<t.end||i>t.start&&i<=t.end||t.start>=e&&t.end<i)&&n.push(t)})),n},e.shiftAnnotations=function(t,e,i){return t&&t.forEach((function(t){t.start<e&&t.end>=e?t.end+=i:t.start>=e&&(t.start+=i,t.end+=i)})),t},e.convertLineToPathData=function(t){return["M",(t=e(t)).attr("x1"),t.attr("y1"),"L",t.attr("x2"),t.attr("y2")].join(" ")},e.convertPolygonToPathData=function(t){var i=e.getPointsFromSvgNode(e(t).node);return i.length>0?e.svgPointsToPath(i)+" Z":null},e.convertPolylineToPathData=function(t){var i=e.getPointsFromSvgNode(e(t).node);return i.length>0?e.svgPointsToPath(i):null},e.svgPointsToPath=function(t){var e;for(e=0;e<t.length;e++)t[e]=t[e].x+" "+t[e].y;return"M "+t.join(" L")},e.getPointsFromSvgNode=function(t){var e,i=[];for(e=0;e<t.points.numberOfItems;e++)i.push(t.points.getItem(e));return i},e.KAPPA=.5522847498307935,e.convertCircleToPathData=function(t){t=e(t);var i=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("r")),s=r*e.KAPPA;return["M",i,n-r,"C",i+s,n-r,i+r,n-s,i+r,n,"C",i+r,n+s,i+s,n+r,i,n+r,"C",i-s,n+r,i-r,n+s,i-r,n,"C",i-r,n-s,i-s,n-r,i,n-r,"Z"].join(" ")},e.convertEllipseToPathData=function(t){t=e(t);var i=parseFloat(t.attr("cx"))||0,n=parseFloat(t.attr("cy"))||0,r=parseFloat(t.attr("rx")),s=parseFloat(t.attr("ry"))||r,a=r*e.KAPPA,o=s*e.KAPPA;return["M",i,n-s,"C",i+a,n-s,i+r,n-o,i+r,n,"C",i+r,n+o,i+a,n+s,i,n+s,"C",i-a,n+s,i-r,n+o,i-r,n,"C",i-r,n-o,i-a,n-s,i,n-s,"Z"].join(" ")},e.convertRectToPathData=function(t){t=e(t);var i,n=parseFloat(t.attr("x"))||0,r=parseFloat(t.attr("y"))||0,s=parseFloat(t.attr("width"))||0,a=parseFloat(t.attr("height"))||0,l=parseFloat(t.attr("rx"))||0,g=parseFloat(t.attr("ry"))||0,c=o.rect(n,r,s,a);if(l||g){var h=n+s,d=r+a;i=["M",n+l,r,"L",h-l,r,"Q",h,r,h,r+g,"L",h,r+a-g,"Q",h,d,h-l,d,"L",n+l,d,"Q",n,d,n,d-l,"L",n,r+g,"Q",n,r,n+l,r,"Z"].join(" ")}else i=["M",c.origin().x,c.origin().y,"H",c.corner().x,"V",c.corner().y,"H",c.origin().x,"V",c.origin().y,"Z"].join(" ");return i},e.rectToPath=function(t){var e=t.rx||t["top-rx"]||0,i=t.rx||t["bottom-rx"]||0,n=t.ry||t["top-ry"]||0,r=t.ry||t["bottom-ry"]||0;return["M",t.x,t.y+n,"v",t.height-n-r,"a",i,r,0,0,0,i,r,"h",t.width-2*i,"a",i,r,0,0,0,i,-r,"v",-(t.height-r-n),"a",e,n,0,0,0,-e,-n,"h",-(t.width-2*e),"a",e,n,0,0,0,-e,n].join(" ")},e.toNode=function(t){return e.isV(t)?t.node:t.nodeName&&t||t[0]},e}();var l,g,c={version:"1.0.3",config:{classNamePrefix:"joint-",defaultTheme:"default"},dia:{},ui:{},layout:{},shapes:{},format:{},connectors:{},highlighters:{},routers:{},mvc:{views:{}},setTheme:function(t,e){e=e||{},r.invoke(c.mvc.views,"setTheme",t,e),c.mvc.View.prototype.defaultTheme=t},env:{_results:{},_tests:{svgforeignobject:function(){return!!document.createElementNS&&/SVGForeignObject/.test({}.toString.call(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")))}},addTest:function(t,e){return c.env._tests[t]=e},test:function(t){var e=c.env._tests[t];if(!e)throw new Error('Test not defined ("'+t+'"). Use `joint.env.addTest(name, fn) to add a new test.`');var i=c.env._results[t];if(void 0!==i)return i;try{i=e()}catch(t){i=!1}return c.env._results[t]=i,i}},util:{hashCode:function(t){var e=0;if(0==t.length)return e;for(var i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e&=e;return e},getByPath:function(t,e,i){i=i||"/";for(var n,r=e.split(i);r.length;){if(n=r.shift(),Object(t)!==t||!(n in t))return;t=t[n]}return t},setByPath:function(t,e,i,n){n=n||"/";var r=e.split(n),s=t,a=0;if(e.indexOf(n)>-1){for(var o=r.length;a<o-1;a++)s=s[r[a]]||(s[r[a]]={});s[r[o-1]]=i}else t[e]=i;return t},unsetByPath:function(t,e,i){i=i||"/";var n=e.lastIndexOf(i);if(n>-1){var r=c.util.getByPath(t,e.substr(0,n),i);r&&delete r[e.slice(n+1)]}else delete t[e];return t},flattenObject:function(t,e,n){e=e||"/";var r={};for(var s in t)if(t.hasOwnProperty(s)){var a="object"===i(t[s]);if(a&&n&&n(t[s])&&(a=!1),a){var o=this.flattenObject(t[s],e,n);for(var l in o)o.hasOwnProperty(l)&&(r[s+e+l]=o[l])}else r[s]=t[s]}return r},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},guid:function(t){return this.guid.id=this.guid.id||1,t.id=void 0===t.id?"j_"+this.guid.id++:t.id,t.id},mixin:r.assign,supplement:r.defaults,deepMixin:r.mixin,deepSupplement:r.defaultsDeep,normalizeEvent:function(t){var e=t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0];if(e){for(var i in t)void 0===e[i]&&(e[i]=t[i]);return e}return t},nextFrame:function(){var t;if("undefined"!=typeof window&&(t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame),!t){var e=0;t=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-e)),r=setTimeout((function(){t(i+n)}),n);return e=i+n,r}}return function(e,i){return t(i?r.bind(e,i):e)}}(),cancelFrame:(g="undefined"!=typeof window,g&&(l=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelAnimationFrame||window.oCancelRequestAnimationFrame||window.mozCancelAnimationFrame||window.mozCancelRequestAnimationFrame),l=l||clearTimeout,g?r.bind(l,window):l),shapePerimeterConnectionPoint:function(t,e,i,n){var r,s;if(!i){var l=e.$(".scalable")[0],g=e.$(".rotatable")[0];l&&l.firstChild?i=l.firstChild:g&&g.firstChild&&(i=g.firstChild)}return i?(s=a(i).findIntersection(n,t.paper.viewport))||(r=o.rect(a(i).bbox(!1,t.paper.viewport))):s=(r=e.model.getBBox()).intersectionWithLineFromCenterToPoint(n),s||r.center()},breakText:function(t,e,i,n){n=n||{};var r=e.width,s=e.height,o=n.svgDocument||a("svg").node,l=a("<text><tspan></tspan></text>").attr(i||{}).node,g=l.firstChild,c=document.createTextNode("");l.style.opacity=0,l.style.display="block",g.style.display="block",g.appendChild(c),o.appendChild(l),n.svgDocument||document.body.appendChild(o);for(var h,d=t.split(" "),I=[],u=[],p=0,C=0,A=d.length;p<A;p++){var m=d[p];if(c.data=u[C]?u[C]+" "+m:m,g.getComputedTextLength()<=r)u[C]=c.data,h&&(I[C++]=!0,h=0);else{if(!u[C]||h){var f=!!h;if(h=m.length-1,f||!h){if(!h){if(!u[C]){u=[];break}d.splice(p,2,m+d[p+1]),A--,I[C++]=!0,p--;continue}d[p]=m.substring(0,h),d[p+1]=m.substring(h)+d[p+1]}else d.splice(p,1,m.substring(0,h),m.substring(h)),A++,C&&!I[C-1]&&C--;p--;continue}C++,p--}if(void 0!==s){var y=y||1.25*l.getBBox().height;if(y*u.length>s){u.splice(Math.floor(s/y));break}}}return n.svgDocument?o.removeChild(l):document.body.removeChild(o),u.join("\n")},imageToDataUri:function(t,e){if(!t||"data:"===t.substr(0,"data:".length))return setTimeout((function(){e(null,t)}),0);var i=new XMLHttpRequest;i.open("GET",t,!0),i.addEventListener("error",(function(){e(new Error("Failed to load image "+t))})),i.responseType=window.FileReader?"blob":"arraybuffer",i.addEventListener("load",(function(){window.FileReader?function(e,i){if(200===e.status){var n=new FileReader;n.onload=function(t){var e=t.target.result;i(null,e)},n.onerror=function(){i(new Error("Failed to load image "+t))},n.readAsDataURL(e.response)}else i(new Error("Failed to load image "+t))}(i,e):function(e,i){if(200===e.status){var n=new Uint8Array(e.response),r=t.split(".").pop()||"png";i(null,"data:image/"+({svg:"svg+xml"}[r]||r)+";base64,"+btoa(function(t){for(var e=[],i=0;i<t.length;i+=32768)e.push(String.fromCharCode.apply(null,t.subarray(i,i+32768)));return e.join("")}(n)))}else i(new Error("Failed to load image "+t))}(i,e)})),i.send()},getElementBBox:function(t){var e=s(t);if(0===e.length)throw new Error("Element not found");var i=e[0],n=i.ownerDocument,r=i.getBoundingClientRect(),o=0,l=0;if(i.ownerSVGElement){var g=a(i).bbox();o=r.width-g.width,l=r.height-g.height}return{x:r.left+window.pageXOffset-n.documentElement.offsetLeft+o/2,y:r.top+window.pageYOffset-n.documentElement.offsetTop+l/2,width:r.width-o,height:r.height-l}},sortElements:function(t,e){var i=s(t),n=i.map((function(){var t=this.parentNode,e=t.insertBefore(document.createTextNode(""),this.nextSibling);return function(){if(t===this)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(this,e),t.removeChild(e)}}));return Array.prototype.sort.call(i,e).each((function(t){n[t].call(this)}))},setAttributesBySelector:function(t,e){var i=s(t);r.each(e,(function(t,e){var n=i.find(e).addBack().filter(e);r.has(t,"class")&&(n.addClass(t.class),t=r.omit(t,"class")),n.attr(t)}))},normalizeSides:function(t){return Object(t)!==t?{top:t=t||0,bottom:t,left:t,right:t}:{top:t.top||0,bottom:t.bottom||0,left:t.left||0,right:t.right||0}},timing:{linear:function(t){return t},quad:function(t){return t*t},cubic:function(t){return t*t*t},inout:function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},exponential:function(t){return Math.pow(2,10*(t-1))},bounce:function(t){for(var e=0,i=1;;e+=i,i/=2)if(t>=(7-4*e)/11){var n=(11-6*e-11*t)/4;return-n*n+i*i}},reverse:function(t){return function(e){return 1-t(1-e)}},reflect:function(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}},clamp:function(t,e,i){return e=e||0,i=i||1,function(n){var r=t(n);return r<e?e:r>i?i:r}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},elastic:function(t){return t||(t=1.5),function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}},interpolate:{number:function(t,e){var i=e-t;return function(e){return t+i*e}},object:function(t,e){var i=r.keys(t);return function(n){var r,s,a={};for(r=i.length-1;-1!=r;r--)a[s=i[r]]=t[s]+(e[s]-t[s])*n;return a}},hexColor:function(t,e){var i=parseInt(t.slice(1),16),n=parseInt(e.slice(1),16),r=255&i,s=(255&n)-r,a=65280&i,o=(65280&n)-a,l=16711680&i,g=(16711680&n)-l;return function(t){return"#"+(1<<24|r+s*t&255|a+o*t&65280|l+g*t&16711680).toString(16).slice(1)}},unit:function(t,e){var i=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,n=i.exec(t),r=i.exec(e),s=r[1].indexOf("."),a=s>0?r[1].length-s-1:0;t=+n[1];var o=+r[1]-t,l=n[2];return function(e){return(t+o*e).toFixed(a)+l}}},filter:{outline:function(t){var e=r.isFinite(t.margin)?t.margin:2,i=r.isFinite(t.width)?t.width:1;return c.util.template('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${outerRadius}" /><feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${innerRadius}" /><feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/><feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/><feMerge><feMergeNode in="outline"/><feMergeNode in="SourceGraphic"/></feMerge></filter>')({color:t.color||"blue",opacity:r.isFinite(t.opacity)?t.opacity:1,outerRadius:e+i,innerRadius:e})},highlight:function(t){return c.util.template('<filter><feFlood flood-color="${color}" flood-opacity="${opacity}" result="colored"/><feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${width}"/><feComposite result="composed" in="colored" in2="morphed" operator="in"/><feGaussianBlur result="blured" in="composed" stdDeviation="${blur}"/><feBlend in="SourceGraphic" in2="blured" mode="normal"/></filter>')({color:t.color||"red",width:r.isFinite(t.width)?t.width:1,blur:r.isFinite(t.blur)?t.blur:0,opacity:r.isFinite(t.opacity)?t.opacity:1})},blur:function(t){var e=r.isFinite(t.x)?t.x:2;return c.util.template('<filter><feGaussianBlur stdDeviation="${stdDeviation}"/></filter>')({stdDeviation:r.isFinite(t.y)?[e,t.y]:e})},dropShadow:function(t){var e="SVGFEDropShadowElement"in window?'<filter><feDropShadow stdDeviation="${blur}" dx="${dx}" dy="${dy}" flood-color="${color}" flood-opacity="${opacity}"/></filter>':'<filter><feGaussianBlur in="SourceAlpha" stdDeviation="${blur}"/><feOffset dx="${dx}" dy="${dy}" result="offsetblur"/><feFlood flood-color="${color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="${opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>';return c.util.template(e)({dx:t.dx||0,dy:t.dy||0,opacity:r.isFinite(t.opacity)?t.opacity:1,color:t.color||"black",blur:r.isFinite(t.blur)?t.blur:4})},grayscale:function(t){var e=r.isFinite(t.amount)?t.amount:1;return c.util.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0"/></filter>')({a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},sepia:function(t){var e=r.isFinite(t.amount)?t.amount:1;return c.util.template('<filter><feColorMatrix type="matrix" values="${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0"/></filter>')({a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},saturate:function(t){var e=r.isFinite(t.amount)?t.amount:1;return c.util.template('<filter><feColorMatrix type="saturate" values="${amount}"/></filter>')({amount:1-e})},hueRotate:function(t){return c.util.template('<filter><feColorMatrix type="hueRotate" values="${angle}"/></filter>')({angle:t.angle||0})},invert:function(t){var e=r.isFinite(t.amount)?t.amount:1;return c.util.template('<filter><feComponentTransfer><feFuncR type="table" tableValues="${amount} ${amount2}"/><feFuncG type="table" tableValues="${amount} ${amount2}"/><feFuncB type="table" tableValues="${amount} ${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:1-e})},brightness:function(t){return c.util.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}"/><feFuncG type="linear" slope="${amount}"/><feFuncB type="linear" slope="${amount}"/></feComponentTransfer></filter>')({amount:r.isFinite(t.amount)?t.amount:1})},contrast:function(t){var e=r.isFinite(t.amount)?t.amount:1;return c.util.template('<filter><feComponentTransfer><feFuncR type="linear" slope="${amount}" intercept="${amount2}"/><feFuncG type="linear" slope="${amount}" intercept="${amount2}"/><feFuncB type="linear" slope="${amount}" intercept="${amount2}"/></feComponentTransfer></filter>')({amount:e,amount2:.5-e/2})}},format:{number:function(t,e,i){i=i||{currency:["$",""],decimal:".",thousands:",",grouping:[3]};var n=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i.exec(t),r=n[1]||" ",s=n[2]||">",a=n[3]||"",o=n[4]||"",l=n[5],g=+n[6],c=n[7],h=n[8],d=n[9],I=1,u="",p="",C=!1;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===s)&&(l=r="0",s="=",c&&(g-=Math.floor((g-1)/4))),d){case"n":c=!0,d="g";break;case"%":I=100,p="%",d="f";break;case"p":I=100,p="%",d="r";break;case"b":case"o":case"x":case"X":"#"===o&&(u="0"+d.toLowerCase());break;case"c":case"d":C=!0,h=0;break;case"s":I=-1,d="r"}"$"===o&&(u=i.currency[0],p=i.currency[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):"e"!=d&&"f"!=d||(h=Math.max(0,Math.min(20,h))));var A=l&&c;if(C&&e%1)return"";var m=e<0||0===e&&1/e<0?(e=-e,"-"):a,f=p;if(I<0){var y=this.prefix(e,h);e=y.scale(e),f=y.symbol+p}else e*=I;var w=(e=this.convert(d,e,h)).lastIndexOf("."),b=w<0?e:e.substring(0,w),N=w<0?"":i.decimal+e.substring(w+1);function M(t){for(var e=t.length,n=[],r=0,s=i.grouping[0];e>0&&s>0;)n.push(t.substring(e-=s,e+s)),s=i.grouping[r=(r+1)%i.grouping.length];return n.reverse().join(i.thousands)}!l&&c&&i.grouping&&(b=M(b));var v=u.length+b.length+N.length+(A?0:m.length),x=v<g?new Array(v=g-v+1).join(r):"";return A&&(b=M(x+b)),m+=u,e=b+N,("<"===s?m+e+x:">"===s?x+m+e:"^"===s?x.substring(0,v>>=1)+m+e+x.substring(v):m+(A?e:x+e))+f},string:function(t,e){for(var i,n="{",r=!1,s=[];-1!==(i=t.indexOf(n));){var a,o,l;if(a=t.slice(0,i),r){l=(o=a.split(":")).shift().split("."),a=e;for(var g=0;g<l.length;g++)a=a[l[g]];o.length&&(a=this.number(o,a))}s.push(a),t=t.slice(i+1),n=(r=!r)?"}":"{"}return s.push(t),s.join("")},convert:function(t,e,i){switch(t){case"b":return e.toString(2);case"c":return String.fromCharCode(e);case"o":return e.toString(8);case"x":return e.toString(16);case"X":return e.toString(16).toUpperCase();case"g":return e.toPrecision(i);case"e":return e.toExponential(i);case"f":return e.toFixed(i);case"r":return(e=this.round(e,this.precision(e,i))).toFixed(Math.max(0,Math.min(20,this.precision(e*(1+1e-15),i))));default:return e+""}},round:function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},precision:function(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)},prefix:function(t,e){var i=r.map(["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],(function(t,e){var i=Math.pow(10,3*Math.abs(8-e));return{scale:e>8?function(t){return t/i}:function(t){return t*i},symbol:t}})),n=0;return t&&(t<0&&(t*=-1),e&&(t=this.round(t,this.precision(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n<=0?n+1:n-1)/3)))),i[8+n/3]}},template:function(t){var e=/<%= ([^ ]+) %>|\$\{ ?([^\{\} ]+) ?\}|\{\{([^\{\} ]+)\}\}/g;return function(i){return i=i||{},t.replace(e,(function(t){for(var e=Array.prototype.slice.call(arguments),n=r.find(e.slice(1,4),(function(t){return!!t})).split("."),s=i[n.shift()];!r.isUndefined(s)&&n.length;)s=s[n.shift()];return r.isUndefined(s)?"":s}))}},toggleFullScreen:function(t){function e(t,e){for(var i=["webkit","moz","ms","o",""],n=0;n<i.length;n++){var s=i[n],a=s?s+e:e.substr(0,1).toLowerCase()+e.substr(1);if(!r.isUndefined(t[a]))return r.isFunction(t[a])?t[a]():t[a]}}t=t||document.body,e(document,"FullScreen")||e(document,"IsFullScreen")?e(document,"CancelFullScreen"):e(t,"RequestFullScreen")},addClassNamePrefix:function(t){return t?r.map(t.toString().split(" "),(function(t){return t.substr(0,c.config.classNamePrefix.length)!==c.config.classNamePrefix&&(t=c.config.classNamePrefix+t),t})).join(" "):t},removeClassNamePrefix:function(t){return t?r.map(t.toString().split(" "),(function(t){return t.substr(0,c.config.classNamePrefix.length)===c.config.classNamePrefix&&(t=t.substr(c.config.classNamePrefix.length)),t})).join(" "):t},wrapWith:function(t,e,i){if(r.isString(i)){if(!c.util.wrappers[i])throw new Error('Unknown wrapper: "'+i+'"');i=c.util.wrappers[i]}if(!r.isFunction(i))throw new Error("Wrapper must be a function.");r.each(e,(function(e){t[e]=i(t[e])}))},wrappers:{cells:function(t){return function(){var e=Array.prototype.slice.call(arguments),i=e.length>0&&r.first(e)||[],n=e.length>1&&r.last(e)||{};return r.isArray(i)||(n instanceof c.dia.Cell?(i=e,n={}):i=r.initial(e)),t.call(this,i,n)}}}}};return c.mvc.View=n.View.extend({options:{},theme:null,themeClassNamePrefix:c.util.addClassNamePrefix("theme-"),requireSetThemeOverride:!1,defaultTheme:c.config.defaultTheme,constructor:function(t){n.View.call(this,t)},initialize:function(t){this.requireSetThemeOverride=t&&!!t.theme,this.options=r.extend({},this.options,t),r.bindAll(this,"setTheme","onSetTheme","remove","onRemove"),c.mvc.views[this.cid]=this,this.setTheme(this.options.theme||this.defaultTheme),this._ensureElClassName(),this.init()},_ensureElClassName:function(){var t=r.result(this,"className"),e=c.util.addClassNamePrefix(t);this.$el.removeClass(t),this.$el.addClass(e)},init:function(){},onRender:function(){},setTheme:function(t,e){if(e=e||{},!this.theme||!this.requireSetThemeOverride||e.override)return this.removeThemeClassName(),this.addThemeClassName(t),this.onSetTheme(this.theme,t),this.theme=t,this},addThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.$el.addClass(e),this},removeThemeClassName:function(t){t=t||this.theme;var e=this.themeClassNamePrefix+t;return this.$el.removeClass(e),this},onSetTheme:function(t,e){},remove:function(){return this.onRemove(),c.mvc.views[this.cid]=null,n.View.prototype.remove.apply(this,arguments),this},onRemove:function(){}}),c.mvc.View._extend=c.mvc.View.extend,c.mvc.View.extend=function(t,e){var i=(t=t||{}).render||this.prototype.render||null;return t.render=function(){return i&&i.apply(this,arguments),this.onRender(),this},c.mvc.View._extend.call(this,t,e)},c.dia.GraphCells=n.Collection.extend({cellNamespace:c.shapes,initialize:function(t,e){e.cellNamespace&&(this.cellNamespace=e.cellNamespace),this.graph=e.graph},model:function(t,e){var i=e.collection,n=i.cellNamespace,r=new("link"===t.type?c.dia.Link:c.util.getByPath(n,t.type,".")||c.dia.Element)(t,e);return r.graph=i.graph,r},comparator:function(t){return t.get("z")||0}}),c.dia.Graph=n.Model.extend({_batches:{},initialize:function(t,e){e=e||{};var i=new c.dia.GraphCells([],{model:e.cellModel,cellNamespace:e.cellNamespace,graph:this});n.Model.prototype.set.call(this,"cells",i),i.on("all",this.trigger,this),this.on("change:z",this._sortOnChangeZ,this),this.on("batch:stop",this._onBatchStop,this),this._out={},this._in={},this._nodes={},this._edges={},i.on("add",this._restructureOnAdd,this),i.on("remove",this._restructureOnRemove,this),i.on("reset",this._restructureOnReset,this),i.on("change:source",this._restructureOnChangeSource,this),i.on("change:target",this._restructureOnChangeTarget,this),i.on("remove",this._removeCell,this)},_sortOnChangeZ:function(){this.hasActiveBatch("to-front")||this.hasActiveBatch("to-back")||this.get("cells").sort()},_onBatchStop:function(t){var e=t&&t.batchName;"to-front"!==e&&"to-back"!==e||this.hasActiveBatch(e)||this.get("cells").sort()},_restructureOnAdd:function(t){if(t.isLink()){this._edges[t.id]=!0;var e=t.get("source"),i=t.get("target");e.id&&((this._out[e.id]||(this._out[e.id]={}))[t.id]=!0),i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)}else this._nodes[t.id]=!0},_restructureOnRemove:function(t){if(t.isLink()){delete this._edges[t.id];var e=t.get("source"),i=t.get("target");e.id&&this._out[e.id]&&this._out[e.id][t.id]&&delete this._out[e.id][t.id],i.id&&this._in[i.id]&&this._in[i.id][t.id]&&delete this._in[i.id][t.id]}else delete this._nodes[t.id]},_restructureOnReset:function(t){t=t.models,this._out={},this._in={},this._nodes={},this._edges={},r.each(t,this._restructureOnAdd,this)},_restructureOnChangeSource:function(t){var e=t.previous("source");e.id&&this._out[e.id]&&delete this._out[e.id][t.id];var i=t.get("source");i.id&&((this._out[i.id]||(this._out[i.id]={}))[t.id]=!0)},_restructureOnChangeTarget:function(t){var e=t.previous("target");e.id&&this._in[e.id]&&delete this._in[e.id][t.id];var i=t.get("target");i.id&&((this._in[i.id]||(this._in[i.id]={}))[t.id]=!0)},getOutboundEdges:function(t){return this._out&&this._out[t]||{}},getInboundEdges:function(t){return this._in&&this._in[t]||{}},toJSON:function(){var t=n.Model.prototype.toJSON.apply(this,arguments);return t.cells=this.get("cells").toJSON(),t},fromJSON:function(t,e){if(!t.cells)throw new Error("Graph JSON must contain cells array.");return this.set(t,e)},set:function(t,e,s){var a;return"object"===i(t)?(a=t,s=e):(a={})[t]=e,a.hasOwnProperty("cells")&&(this.resetCells(a.cells,s),a=r.omit(a,"cells")),n.Model.prototype.set.call(this,a,s)},clear:function(t){t=r.extend({},t,{clear:!0});var e=this.get("cells");if(0===e.length)return this;this.startBatch("clear",t);var i=e.sortBy((function(t){return t.isLink()?1:2}));do{i.shift().remove(t)}while(i.length>0);return this.stopBatch("clear"),this},_prepareCell:function(t,e){var i;if(t instanceof n.Model?(i=t.attributes,t.graph||e&&e.dry||(t.graph=this)):i=t,!r.isString(i.type))throw new TypeError("dia.Graph: cell type must be a string.");return t},maxZIndex:function(){var t=this.get("cells").last();return t&&t.get("z")||0},addCell:function(t,e){return r.isArray(t)?this.addCells(t,e):(t instanceof n.Model?t.has("z")||t.set("z",this.maxZIndex()+1):r.isUndefined(t.z)&&(t.z=this.maxZIndex()+1),this.get("cells").add(this._prepareCell(t,e),e||{}),this)},addCells:function(t,e){return t.length&&(t=r.flattenDeep(t),e.position=t.length,this.startBatch("add"),r.each(t,(function(t){e.position--,this.addCell(t,e)}),this),this.stopBatch("add")),this},resetCells:function(t,e){var i=r.map(t,r.bind(this._prepareCell,this,r,e));return this.get("cells").reset(i,e),this},removeCells:function(t,e){return t.length&&(this.startBatch("remove"),r.invoke(t,"remove",e),this.stopBatch("remove")),this},_removeCell:function(t,e,i){(i=i||{}).clear||(i.disconnectLinks?this.disconnectLinks(t,i):this.removeLinks(t,i)),this.get("cells").remove(t,{silent:!0}),t.graph===this&&(t.graph=null)},getCell:function(t){return this.get("cells").get(t)},getCells:function(){return this.get("cells").toArray()},getElements:function(){return r.map(this._nodes,(function(t,e){return this.getCell(e)}),this)},getLinks:function(){return r.map(this._edges,(function(t,e){return this.getCell(e)}),this)},getFirstCell:function(){return this.get("cells").first()},getLastCell:function(){return this.get("cells").last()},getConnectedLinks:function(t,e){var i=(e=e||{}).inbound,n=e.outbound;r.isUndefined(i)&&r.isUndefined(n)&&(i=n=!0);var s=[],a={};if(n&&r.each(this.getOutboundEdges(t.id),(function(t,e){a[e]||(s.push(this.getCell(e)),a[e]=!0)}),this),i&&r.each(this.getInboundEdges(t.id),(function(t,e){a[e]||(s.push(this.getCell(e)),a[e]=!0)}),this),e.deep){var o=t.getEmbeddedCells({deep:!0}),l={};r.each(o,(function(t){t.isLink()&&(l[t.id]=!0)})),r.each(o,(function(t){t.isLink()||(n&&r.each(this.getOutboundEdges(t.id),(function(t,e){a[e]||l[e]||(s.push(this.getCell(e)),a[e]=!0)}),this),i&&r.each(this.getInboundEdges(t.id),(function(t,e){a[e]||l[e]||(s.push(this.getCell(e)),a[e]=!0)}),this))}),this)}return s},getNeighbors:function(t,e){var i=(e=e||{}).inbound,n=e.outbound;r.isUndefined(i)&&r.isUndefined(n)&&(i=n=!0);var s=r.transform(this.getConnectedLinks(t,e),(function(s,a){var o=a.get("source"),l=a.get("target"),g=a.hasLoop(e);if(i&&r.has(o,"id")&&!s[o.id]){var c=this.getCell(o.id);!g&&(!c||c===t||e.deep&&c.isEmbeddedIn(t))||(s[o.id]=c)}if(n&&r.has(l,"id")&&!s[l.id]){var h=this.getCell(l.id);!g&&(!h||h===t||e.deep&&h.isEmbeddedIn(t))||(s[l.id]=h)}}),{},this);return r.values(s)},getCommonAncestor:function(){var t=r.map(arguments,(function(t){for(var e=[],i=t.get("parent");i;)e.push(i),i=this.getCell(i).get("parent");return e}),this);t=r.sortBy(t,"length");var e=r.find(t.shift(),(function(e){return r.every(t,(function(t){return r.contains(t,e)}))}));return this.getCell(e)},getSuccessors:function(t,e){e=e||{};var i=[];return this.search(t,(function(e){e!==t&&i.push(e)}),r.extend({},e,{outbound:!0})),i},cloneCells:function(t){t=r.unique(t);var e=r.transform(t,(function(t,e){t[e.id]=e.clone()}),{});return r.each(t,(function(t){var i=e[t.id];if(i.isLink()){var n=i.get("source"),s=i.get("target");n.id&&e[n.id]&&i.prop("source/id",e[n.id].id),s.id&&e[s.id]&&i.prop("target/id",e[s.id].id)}var a=t.get("parent");a&&e[a]&&i.set("parent",e[a].id);var o=r.reduce(t.get("embeds"),(function(t,i){return e[i]&&t.push(e[i].id),t}),[]);r.isEmpty(o)||i.set("embeds",o)})),e},cloneSubgraph:function(t,e){var i=this.getSubgraph(t,e);return this.cloneCells(i)},getSubgraph:function(t,e){e=e||{};var i=[],n={},s=[],a=[];return r.each(t,(function(t){if(n[t.id]||(i.push(t),n[t.id]=t,t.isLink()?a.push(t):s.push(t)),e.deep){var o=t.getEmbeddedCells({deep:!0});r.each(o,(function(t){n[t.id]||(i.push(t),n[t.id]=t,t.isLink()?a.push(t):s.push(t))}))}})),r.each(a,(function(t){var e=t.get("source"),r=t.get("target");if(e.id&&!n[e.id]){var a=this.getCell(e.id);i.push(a),n[a.id]=a,s.push(a)}if(r.id&&!n[r.id]){var o=this.getCell(r.id);i.push(this.getCell(r.id)),n[o.id]=o,s.push(o)}}),this),r.each(s,(function(t){var s=this.getConnectedLinks(t,e);r.each(s,(function(t){var e=t.get("source"),r=t.get("target");!n[t.id]&&e.id&&n[e.id]&&r.id&&n[r.id]&&(i.push(t),n[t.id]=t)}))}),this),i},getPredecessors:function(t,e){e=e||{};var i=[];return this.search(t,(function(e){e!==t&&i.push(e)}),r.extend({},e,{inbound:!0})),i},search:function(t,e,i){(i=i||{}).breadthFirst?this.bfs(t,e,i):this.dfs(t,e,i)},bfs:function(t,e,i){i=i||{};var n={},s={},a=[];for(a.push(t),s[t.id]=0;a.length>0;){var o=a.shift();if(!n[o.id]){if(n[o.id]=!0,!1===e(o,s[o.id]))return;r.each(this.getNeighbors(o,i),(function(t){s[t.id]=s[o.id]+1,a.push(t)}))}}},dfs:function(t,e,i,n,s){i=i||{};var a=n||{},o=s||0;!1!==e(t,o)&&(a[t.id]=!0,r.each(this.getNeighbors(t,i),(function(t){a[t.id]||this.dfs(t,e,i,a,o+1)}),this))},getSources:function(){var t=[];return r.each(this._nodes,(function(e,i){this._in[i]&&!r.isEmpty(this._in[i])||t.push(this.getCell(i))}),this),t},getSinks:function(){var t=[];return r.each(this._nodes,(function(e,i){this._out[i]&&!r.isEmpty(this._out[i])||t.push(this.getCell(i))}),this),t},isSource:function(t){return!this._in[t.id]||r.isEmpty(this._in[t.id])},isSink:function(t){return!this._out[t.id]||r.isEmpty(this._out[t.id])},isSuccessor:function(t,e){var i=!1;return this.search(t,(function(n){if(n===e&&n!==t)return i=!0,!1}),{outbound:!0}),i},isPredecessor:function(t,e){var i=!1;return this.search(t,(function(n){if(n===e&&n!==t)return i=!0,!1}),{inbound:!0}),i},isNeighbor:function(t,e,i){var n=(i=i||{}).inbound,s=i.outbound;r.isUndefined(n)&&r.isUndefined(s)&&(n=s=!0);var a=!1;return r.each(this.getConnectedLinks(t,i),(function(t){var i=t.get("source"),o=t.get("target");return n&&r.has(i,"id")&&i.id===e.id||s&&r.has(o,"id")&&o.id===e.id?(a=!0,!1):void 0})),a},disconnectLinks:function(t,e){r.each(this.getConnectedLinks(t),(function(i){i.set(i.get("source").id===t.id?"source":"target",o.point(0,0),e)}))},removeLinks:function(t,e){r.invoke(this.getConnectedLinks(t),"remove",e)},findModelsFromPoint:function(t){return r.filter(this.getElements(),(function(e){return e.getBBox().containsPoint(t)}))},findModelsInArea:function(t,e){t=o.rect(t);var i=(e=r.defaults(e||{},{strict:!1})).strict?"containsRect":"intersect";return r.filter(this.getElements(),(function(e){return t[i](e.getBBox())}))},findModelsUnderElement:function(t,e){e=r.defaults(e||{},{searchBy:"bbox"});var i=t.getBBox(),n="bbox"==e.searchBy?this.findModelsInArea(i):this.findModelsFromPoint(i[e.searchBy]());return r.reject(n,(function(e){return t.id==e.id||e.isEmbeddedIn(t)}))},getBBox:function(t,e){return this.getCellsBBox(t||this.getElements(),e)},getCellsBBox:function(t,e){return r.reduce(t,(function(t,i){return i.isLink()?t:t?t.union(i.getBBox(e)):i.getBBox(e)}),null)},translate:function(t,e,i){var n=r.reject(this.getCells(),(function(t){return t.isEmbedded()}));r.invoke(n,"translate",t,e,i)},resize:function(t,e,i){return this.resizeCells(t,e,this.getCells(),i)},resizeCells:function(t,e,i,n){var s=this.getCellsBBox(i);if(s){var a=Math.max(t/s.width,0),o=Math.max(e/s.height,0);r.invoke(i,"scale",a,o,s.origin(),n)}return this},startBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)+1,this.trigger("batch:start",r.extend({},e,{batchName:t}))},stopBatch:function(t,e){return e=e||{},this._batches[t]=(this._batches[t]||0)-1,this.trigger("batch:stop",r.extend({},e,{batchName:t}))},hasActiveBatch:function(t){return t?this._batches[t]:r.any(this._batches,(function(t){return t>0}))}}),c.util.wrapWith(c.dia.Graph.prototype,["resetCells","addCells","removeCells"],"cells"),c.dia.Cell=n.Model.extend({constructor:function(t,e){var i,n=t||{};this.cid=r.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(n=this.parse(n,e)||{}),(i=r.result(this,"defaults"))&&(n=r.merge({},i,n)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},translate:function(t,e,i){throw new Error("Must define a translate() method.")},toJSON:function(){var t=this.constructor.prototype.defaults.attrs||{},e=this.attributes.attrs,i={};r.each(e,(function(e,n){var s=t[n];r.each(e,(function(t,e){r.isObject(t)&&!r.isArray(t)?r.each(t,(function(t,a){s&&s[e]&&r.isEqual(s[e][a],t)||(i[n]=i[n]||{},(i[n][e]||(i[n][e]={}))[a]=t)})):s&&r.isEqual(s[e],t)||(i[n]=i[n]||{},i[n][e]=t)}))}));var n=r.cloneDeep(r.omit(this.attributes,"attrs"));return n.attrs=i,n},initialize:function(t){t&&t.id||this.set("id",c.util.uuid(),{silent:!0}),this._transitionIds={},this.processPorts(),this.on("change:attrs",this.processPorts,this)},processPorts:function(){var t=this.ports,e={};r.each(this.get("attrs"),(function(t,i){t&&t.port&&(r.isUndefined(t.port.id)?e[t.port]={id:t.port}:e[t.port.id]=t.port)}));var i={};if(r.each(t,(function(t,n){e[n]||(i[n]=!0)})),this.graph&&!r.isEmpty(i)){var n=this.graph.getConnectedLinks(this,{inbound:!0});r.each(n,(function(t){i[t.get("target").port]&&t.remove()}));var s=this.graph.getConnectedLinks(this,{outbound:!0});r.each(s,(function(t){i[t.get("source").port]&&t.remove()}))}this.ports=e},remove:function(t){t=t||{};var e=this.graph;e&&e.startBatch("remove");var i=this.get("parent");return i&&(e&&e.getCell(i)).unembed(this),r.invoke(this.getEmbeddedCells(),"remove",t),this.trigger("remove",this,this.collection,t),e&&e.stopBatch("remove"),this},toFront:function(t){if(this.graph){t=t||{};var e=(this.graph.getLastCell().get("z")||0)+1;if(this.startBatch("to-front").set("z",e,t),t.deep){var i=this.getEmbeddedCells({deep:!0,breadthFirst:!0});r.each(i,(function(i){i.set("z",++e,t)}))}this.stopBatch("to-front")}return this},toBack:function(t){if(this.graph){t=t||{};var e=(this.graph.getFirstCell().get("z")||0)-1;if(this.startBatch("to-back"),t.deep){var i=this.getEmbeddedCells({deep:!0,breadthFirst:!0});r.eachRight(i,(function(i){i.set("z",e--,t)}))}this.set("z",e,t).stopBatch("to-back")}return this},embed:function(t,e){if(this===t||this.isEmbeddedIn(t))throw new Error("Recursive embedding not allowed.");this.startBatch("embed");var i=r.clone(this.get("embeds")||[]);return i[t.isLink()?"unshift":"push"](t.id),t.set("parent",this.id,e),this.set("embeds",r.uniq(i),e),this.stopBatch("embed"),this},unembed:function(t,e){return this.startBatch("unembed"),t.unset("parent",e),this.set("embeds",r.without(this.get("embeds"),t.id),e),this.stopBatch("unembed"),this},getAncestors:function(){var t=[],e=this.get("parent");if(!this.graph)return t;for(;void 0!==e;){var i=this.graph.getCell(e);if(void 0===i)break;t.push(i),e=i.get("parent")}return t},getEmbeddedCells:function(t){if(t=t||{},this.graph){var e;if(t.deep)if(t.breadthFirst){e=[];for(var i=this.getEmbeddedCells();i.length>0;){var n=i.shift();e.push(n),i.push.apply(i,n.getEmbeddedCells())}}else e=this.getEmbeddedCells(),r.each(e,(function(i){e.push.apply(e,i.getEmbeddedCells(t))}));else e=r.map(this.get("embeds"),this.graph.getCell,this.graph);return e}return[]},isEmbeddedIn:function(t,e){var i=r.isString(t)?t:t.id,n=this.get("parent");if(e=r.defaults({deep:!0},e),this.graph&&e.deep){for(;n;){if(n===i)return!0;n=this.graph.getCell(n).get("parent")}return!1}return n===i},isEmbedded:function(){return!!this.get("parent")},clone:function(t){if((t=t||{}).deep)return r.values(c.dia.Graph.prototype.cloneCells.call(null,[this].concat(this.getEmbeddedCells({deep:!0}))));var e=n.Model.prototype.clone.apply(this,arguments);return e.set("id",c.util.uuid()),e.unset("embeds"),e.unset("parent"),e},prop:function(t,e,i){var n="/";if(r.isString(t)){if(arguments.length>1){var s=t,a=s.split("/"),o=a[0];if(a.shift(),(i=i||{}).propertyPath=s,i.propertyValue=e,0===a.length)return this.set(o,e,i);var l={},g=l,h=o;r.each(a,(function(t){g=g[h]=r.isFinite(Number(t))?[]:{},h=t})),l=c.util.setByPath(l,s,e,"/");var d=r.merge({},this.attributes);i.rewrite&&c.util.unsetByPath(d,s,"/");var I=r.merge(d,l);return this.set(o,I[o],i)}return c.util.getByPath(this.attributes,t,n)}return this.set(r.merge({},this.attributes,t),e)},removeProp:function(t,e){(e=e||{}).dirty=!0;var i=t.split("/");if(1===i.length)return this.unset(t,e);var n=i[0],s=i.slice(1).join("/"),a=r.merge({},this.get(n));return c.util.unsetByPath(a,s,"/"),this.set(n,a,e)},attr:function(t,e,i){var n=Array.prototype.slice.call(arguments);return r.isString(t)?n[0]="attrs/"+t:n[0]={attrs:t},this.prop.apply(this,n)},removeAttr:function(t,e){return r.isArray(t)?(r.each(t,(function(t){this.removeAttr(t,e)}),this),this):this.removeProp("attrs/"+t,e)},transition:function(t,e,i,n){n=n||"/";var s={duration:100,delay:10,timingFunction:c.util.timing.linear,valueFunction:c.util.interpolate.number};i=r.extend(s,i);var a,o=0,l=r.bind((function(e){var n,r,s;(r=(e-=o=o||e)/i.duration)<1?this._transitionIds[t]=n=c.util.nextFrame(l):(r=1,delete this._transitionIds[t]),s=a(i.timingFunction(r)),i.transitionId=n,this.prop(t,s,i),n||this.trigger("transition:end",this,t)}),this),g=r.bind((function(r){this.stopTransitions(t),a=i.valueFunction(c.util.getByPath(this.attributes,t,n),e),this._transitionIds[t]=c.util.nextFrame(r),this.trigger("transition:start",this,t)}),this);return r.delay(g,i.delay,l)},getTransitions:function(){return r.keys(this._transitionIds)},stopTransitions:function(t,e){e=e||"/";var i=t&&t.split(e);return r(this._transitionIds).keys().filter(i&&function(t){return r.isEqual(i,t.split(e).slice(0,i.length))}).each((function(t){c.util.cancelFrame(this._transitionIds[t]),delete this._transitionIds[t],this.trigger("transition:end",this,t)}),this),this},addTo:function(t,e){return t.addCell(this,e),this},findView:function(t){return t.findViewByModel(this)},isElement:function(){return!1},isLink:function(){return!1},startBatch:function(t,e){return this.graph&&this.graph.startBatch(t,r.extend({},e,{cell:this})),this},stopBatch:function(t,e){return this.graph&&this.graph.stopBatch(t,r.extend({},e,{cell:this})),this}}),c.dia.CellView=c.mvc.View.extend({tagName:"g",className:function(){var t=["cell"],e=this.model.get("type");return e&&r.each(e.toLowerCase().split("."),(function(e,i,n){t.push("type-"+n.slice(0,i+1).join("-"))})),t.join(" ")},attributes:function(){return{"model-id":this.model.id}},constructor:function(t){t.id=t.id||c.util.guid(this),c.mvc.View.call(this,t)},init:function(){r.bindAll(this,"remove","update"),this.$el.data("view",this),this.$el.attr("data-type",this.model.get("type")),this.listenTo(this.model,"change:attrs",this.onChangeAttrs)},onChangeAttrs:function(t,e,i){return i.dirty?this.render():this.update(t,e,i)},can:function(t){var e=r.isFunction(this.options.interactive)?this.options.interactive(this):this.options.interactive;return r.isObject(e)&&!1!==e[t]||r.isBoolean(e)&&!1!==e},_ensureElement:function(){var t;if(this.el)t=r.result(this,"el");else{var e=r.extend({id:this.id},r.result(this,"attributes"));this.className&&(e.class=r.result(this,"className")),t=a(r.result(this,"tagName"),e).node}this.setElement(t,!1)},_setElement:function(t){this.$el=t instanceof n.$?t:n.$(t),this.el=this.$el[0],this.vel=a(this.el)},findBySelector:function(t){return"."===t?this.$el:this.$el.find(t)},notify:function(t){if(this.paper){var e=Array.prototype.slice.call(arguments,1);this.trigger.apply(this,[t].concat(e)),this.paper.trigger.apply(this.paper,[t,this].concat(e))}},getStrokeBBox:function(t){var e=!!t;t=t||this.el;var i,n=a(t).bbox(!1,this.paper.viewport);return i=e?a(t).attr("stroke-width"):this.model.attr("rect/stroke-width")||this.model.attr("circle/stroke-width")||this.model.attr("ellipse/stroke-width")||this.model.attr("path/stroke-width"),i=parseFloat(i)||0,o.rect(n).moveAndExpand({x:-i/2,y:-i/2,width:i,height:i})},getBBox:function(){return o.rect(this.vel.bbox())},highlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!==this.el,this.notify("cell:highlight",t,e),this},unhighlight:function(t,e){return t=t&&this.$(t)[0]||this.el,(e=e||{}).partial=t!=this.el,this.notify("cell:unhighlight",t,e),this},findMagnet:function(t){var e=this.$(t),i=this.$el;0===e.length&&(e=i);do{var n=e.attr("magnet");if((n||e.is(i))&&"false"!==n)return e[0];e=e.parent()}while(e.length>0)},applyFilter:function(t,e){var i=r.isString(t)?this.findBySelector(t):s(t),n=e.name+this.paper.svg.id+c.util.hashCode(JSON.stringify(e));if(!this.paper.svg.getElementById(n)){var o=c.util.filter[e.name]&&c.util.filter[e.name](e.args||{});if(!o)throw new Error("Non-existing filter "+e.name);var l=a(o);l.attr({filterUnits:"objectBoundingBox",x:-1,y:-1,width:3,height:3}),e.attrs&&l.attr(e.attrs),l.node.id=n,a(this.paper.svg).defs().append(l)}i.each((function(){a(this).attr("filter","url(#"+n+")")}))},applyGradient:function(t,e,i){var n=r.isString(t)?this.findBySelector(t):s(t),o=i.type+this.paper.svg.id+c.util.hashCode(JSON.stringify(i));if(!this.paper.svg.getElementById(o)){var l=["<"+i.type+">",r.map(i.stops,(function(t){return'<stop offset="'+t.offset+'" stop-color="'+t.color+'" stop-opacity="'+(r.isFinite(t.opacity)?t.opacity:1)+'" />'})).join(""),"</"+i.type+">"].join(""),g=a(l);i.attrs&&g.attr(i.attrs),g.node.id=o,a(this.paper.svg).defs().append(g)}n.each((function(){a(this).attr(e,"url(#"+o+")")}))},getSelector:function(t,e){if(t===this.el)return e;var i;if(t){var n=a(t).index()+1;i=t.tagName+":nth-child("+n+")",e&&(i+=" > "+e),i=this.getSelector(t.parentNode,i)}return i},pointerdblclick:function(t,e,i){this.notify("cell:pointerdblclick",t,e,i)},pointerclick:function(t,e,i){this.notify("cell:pointerclick",t,e,i)},pointerdown:function(t,e,i){this.model.graph&&(this.model.startBatch("pointer"),this._graph=this.model.graph),this.notify("cell:pointerdown",t,e,i)},pointermove:function(t,e,i){this.notify("cell:pointermove",t,e,i)},pointerup:function(t,e,i){this.notify("cell:pointerup",t,e,i),this._graph&&(this._graph.stopBatch("pointer",{cell:this.model}),delete this._graph)},mouseover:function(t){this.notify("cell:mouseover",t)},mouseout:function(t){this.notify("cell:mouseout",t)},mousewheel:function(t,e,i,n){this.notify("cell:mousewheel",t,e,i,n)},contextmenu:function(t,e,i){this.notify("cell:contextmenu",t,e,i)},setInteractivity:function(t){this.options.interactive=t}}),c.dia.Element=c.dia.Cell.extend({defaults:{position:{x:0,y:0},size:{width:1,height:1},angle:0},initialize:function(){this._initializePorts(),c.dia.Cell.prototype.initialize.apply(this,arguments)},_initializePorts:function(){},isElement:function(){return!0},position:function(t,e,i){var n=r.isNumber(e);if((i=(n?i:t)||{}).parentRelative){if(!this.graph)throw new Error("Element must be part of a graph.");var s=this.graph.getCell(this.get("parent")),a=s&&!s.isLink()?s.get("position"):{x:0,y:0}}if(n)return i.parentRelative&&(t+=a.x,e+=a.y),this.set("position",{x:t,y:e},i);var l=o.point(this.get("position"));return i.parentRelative?l.difference(a):l},translate:function(t,e,i){if(e=e||0,0===(t=t||0)&&0===e)return this;(i=i||{}).translateBy=i.translateBy||this.id;var n=this.get("position")||{x:0,y:0};if(i.restrictedArea&&i.translateBy===this.id){var s=this.getBBox({deep:!0}),a=i.restrictedArea,o=n.x-s.x,l=n.y-s.y,g=Math.max(a.x+o,Math.min(a.x+a.width+o-s.width,n.x+t)),h=Math.max(a.y+l,Math.min(a.y+a.height+l-s.height,n.y+e));t=g-n.x,e=h-n.y}var d={x:n.x+t,y:n.y+e};return i.tx=t,i.ty=e,i.transition?(r.isObject(i.transition)||(i.transition={}),this.transition("position",d,r.extend({},i.transition,{valueFunction:c.util.interpolate.object}))):this.set("position",d,i),r.invoke(this.getEmbeddedCells(),"translate",t,e,i),this},resize:function(t,e,i){if(i=i||{},this.startBatch("resize",i),i.direction){var n=this.get("size");switch(i.direction){case"left":case"right":e=n.height;break;case"top":case"bottom":t=n.width}var r=o.normalizeAngle(this.get("angle")||0),s={"top-right":0,right:0,"top-left":1,top:1,"bottom-left":2,left:2,"bottom-right":3,bottom:3}[i.direction];i.absolute&&(s+=Math.floor((r+45)/90),s%=4);var a=this.getBBox(),l=a[["bottomLeft","corner","topRight","origin"][s]](),g=o.point(l).rotate(a.center(),-r),c=Math.sqrt(t*t+e*e)/2,h=s*Math.PI/2;h+=Math.atan(s%2==0?e/t:t/e),h-=o.toRad(r);var d=o.point.fromPolar(c,h,g),I=o.point(d).offset(t/-2,e/-2);this.set("size",{width:t,height:e},i),this.position(I.x,I.y,i)}else this.set("size",{width:t,height:e},i);return this.stopBatch("resize",i),this},scale:function(t,e,i,n){var r=this.getBBox().scale(t,e,i);return this.startBatch("scale",n),this.position(r.x,r.y,n),this.resize(r.width,r.height,n),this.stopBatch("scale"),this},fitEmbeds:function(t){if(t=t||{},!this.graph)throw new Error("Element must be part of a graph.");var e=this.getEmbeddedCells();if(e.length>0){this.startBatch("fit-embeds",t),t.deep&&r.invoke(e,"fitEmbeds",t);var i=this.graph.getCellsBBox(e),n=c.util.normalizeSides(t.padding);i.moveAndExpand({x:-n.left,y:-n.top,width:n.right+n.left,height:n.bottom+n.top}),this.set({position:{x:i.x,y:i.y},size:{width:i.width,height:i.height}},t),this.stopBatch("fit-embeds")}return this},rotate:function(t,e,i,n){if(i){var s=this.getBBox().center(),a=this.get("size"),o=this.get("position");s.rotate(i,this.get("angle")-t);var l=s.x-a.width/2-o.x,g=s.y-a.height/2-o.y;this.startBatch("rotate",{angle:t,absolute:e,origin:i}),this.translate(l,g,r.clone(n)),this.rotate(t,e,null,n),this.stopBatch("rotate")}else this.set("angle",e?t:(this.get("angle")+t)%360,n);return this},getBBox:function(t){if((t=t||{}).deep&&this.graph){var e=this.getEmbeddedCells({deep:!0,breadthFirst:!0});return e.push(this),this.graph.getCellsBBox(e)}var i=this.get("position"),n=this.get("size");return i||(i={x:2374,y:2192}),n||(n={width:460,height:95}),o.rect(i.x,i.y,n.width,n.height)}}),c.dia.ElementView=c.dia.CellView.extend({SPECIAL_ATTRIBUTES:["style","text","html","ref-x","ref-y","ref-dx","ref-dy","ref-width","ref-height","ref","x-alignment","y-alignment","port"],_removePorts:function(){},_renderPorts:function(){},className:function(){var t=c.dia.CellView.prototype.className.apply(this).split(" ");return t.push("element"),t.join(" ")},initialize:function(){c.dia.CellView.prototype.initialize.apply(this,arguments);var t=this.model;this.listenTo(t,"change:position",this.translate),this.listenTo(t,"change:size",this.resize),this.listenTo(t,"change:angle",this.rotate),this.listenTo(t,"change:markup",this.render),this._initializePorts()},_initializePorts:function(){},updateAttr:function(t,e){var i=this.SPECIAL_ATTRIBUTES.slice();r.isObject(e.filter)&&(i.push("filter"),this.applyFilter(t,e.filter)),r.isObject(e.fill)&&(i.push("fill"),this.applyGradient(t,"fill",e.fill)),r.isObject(e.stroke)&&(i.push("stroke"),this.applyGradient(t,"stroke",e.stroke)),r.isUndefined(e.text)||(t.each((function(){r.isUndefined(e.x)||(a(this).attr("x",e.x),i.push("x")),r.isUndefined(e.y)||(a(this).attr("y",e.y),i.push("y")),a(this).text(e.text+"",{lineHeight:e.lineHeight,textPath:e.textPath,annotations:e.annotations})})),i.push("lineHeight","textPath","annotations"));var n=r.omit(e,i);t.each((function(){a(this).attr(n)})),e.port&&t.attr("port",r.isUndefined(e.port.id)?e.port:e.port.id),e.style&&t.css(e.style),r.isUndefined(e.html)||t.each((function(){s(this).html(e.html+"")}))},update:function(t,e){this._removePorts();var i=this.model.get("attrs"),n=this.rotatableNode;if(n){var s=n.attr("transform");n.attr("transform","")}var o=[],l={};r.each(e||i,(function(t,e){var i="."===e?this.$el:this.findBySelector(e),n=i.length;if(0!==n&&(l[e]=i,this.updateAttr(i,t),!(r.isUndefined(t["ref-x"])&&r.isUndefined(t["ref-y"])&&r.isUndefined(t["ref-dx"])&&r.isUndefined(t["ref-dy"])&&r.isUndefined(t["x-alignment"])&&r.isUndefined(t["y-alignment"])&&r.isUndefined(t["ref-width"])&&r.isUndefined(t["ref-height"]))))for(var s=0;s<n;s++){var a=i.eq(s);a.selector=e,o.push(a)}}),this);var g=this.model.get("size"),c={x:0,y:0,width:g.width,height:g.height};e=e||{},r.each(o,(function(t){var n=e[t.selector],s=n?r.merge({},i[t.selector],n):i[t.selector];this.positionRelative(a(t[0]),c,s,l)}),this),n&&n.attr("transform",s||""),this._renderPorts()},positionRelative:function(t,e,i,n){var s=i.ref,o=parseFloat(i["ref-dx"]),l=parseFloat(i["ref-dy"]),g=i["y-alignment"],c=i["x-alignment"],h=i["ref-y"],d=r.isString(h)&&"%"===h.slice(-1);h=parseFloat(h),d&&(h/=100);var I=i["ref-x"],u=r.isString(I)&&"%"===I.slice(-1);I=parseFloat(I),u&&(I/=100);var p=i["ref-width"],C=r.isString(p)&&"%"===p.slice(-1);p=parseFloat(p),C&&(p/=100);var A=i["ref-height"],m=r.isString(A)&&"%"===A.slice(-1);A=parseFloat(A),m&&(A/=100);var f=t.findParentByClass("scalable",this.el);if(s){var y;if(!(y=n&&n[s]?a(n[s][0]):"."===s?this.vel:this.vel.findOne(s)))throw new Error("dia.ElementView: reference does not exists.");e=y.bbox(!1,this.el)}t.attr("transform")&&t.attr("transform",t.attr("transform").replace(/translate\([^)]*\)/g,"").trim()||""),isFinite(p)&&(C||p>=0&&p<=1?t.attr("width",p*e.width):t.attr("width",Math.max(p+e.width,0))),isFinite(A)&&(m||A>=0&&A<=1?t.attr("height",A*e.height):t.attr("height",Math.max(A+e.height,0)));var w,b=0,N=0;if(isFinite(o)&&(f?(w=w||f.scale(),b=e.x+e.width+o/w.sx):b=e.x+e.width+o),isFinite(l)&&(f?(w=w||f.scale(),N=e.y+e.height+l/w.sy):N=e.y+e.height+l),isFinite(I)&&(u||I>0&&I<1?b=e.x+e.width*I:f?(w=w||f.scale(),b=e.x+I/w.sx):b=e.x+I),isFinite(h)&&(d||h>0&&h<1?N=e.y+e.height*h:f?(w=w||f.scale(),N=e.y+h/w.sy):N=e.y+h),!r.isUndefined(g)||!r.isUndefined(c)){var M=t.node,v=t.bbox(!1,M.parentNode),x=M.nodeName.toUpperCase();"TEXT"!==x&&"TSPAN"!==x||(v.height+=v.y,v.width+=v.x),f&&(w=w||f.scale(),v.width*=w.sx,v.height*=w.sy),"middle"===g?N-=v.height/2:"bottom"===g?N-=v.height:isFinite(g)&&(N+=g>-1&&g<1?v.height*g:g),"middle"===c?b-=v.width/2:"right"===c?b-=v.width:isFinite(c)&&(b+=c>-1&&c<1?v.width*c:c)}t.translate(b,N)},renderMarkup:function(){var t=this.model.get("markup")||this.model.markup;if(!t)throw new Error("properties.markup is missing while the default render() implementation is used.");var e=c.util.template(t)(),i=a(e);this.vel.append(i)},render:function(){return this.$el.empty(),this.renderMarkup(),this.rotatableNode=this.vel.findOne(".rotatable"),this.scalableNode=this.vel.findOne(".scalable"),this.update(),this.resize(),this.rotate(),this.translate(),this},scale:function(t,e){this.vel.scale(t,e)},resize:function(t,e,i){var n=this.model,r=n.get("size")||{width:1,height:1},s=n.get("angle")||0,a=this.scalableNode;if(!a)return 0!==s&&this.rotate(),void this.update();var o=a.bbox(!0);a.attr("transform","scale("+r.width/(o.width||1)+","+r.height/(o.height||1)+")");var l=this.rotatableNode,g=l&&l.attr("transform");if(g&&"null"!==g){l.attr("transform",g+" rotate("+-s+","+r.width/2+","+r.height/2+")");var c=a.bbox(!1,this.paper.viewport);n.set("position",{x:c.x,y:c.y},i),this.rotate()}this.update()},translate:function(t,e,i){var n=this.model.get("position")||{x:0,y:0};this.vel.attr("transform","translate("+n.x+","+n.y+")")},rotate:function(){var t=this.rotatableNode;if(t){var e=this.model.get("angle")||0,i=this.model.get("size")||{width:1,height:1},n=i.width/2,r=i.height/2;0!==e?t.attr("transform","rotate("+e+","+n+","+r+")"):t.removeAttr("transform")}},getBBox:function(t){if(t&&t.useModelGeometry){var e=this.model.getBBox().bbox(this.model.get("angle")),i=this.paper.viewport.getCTM();return o.rect(a.transformRect(e,i))}return c.dia.CellView.prototype.getBBox.apply(this,arguments)},prepareEmbedding:function(t){var e=(t=t||{}).model||this.model,i=(t.paper||this.paper).model;e.startBatch("to-front",t),e.toFront({deep:!0,ui:!0});var n=i.get("cells").max("z").get("z"),s=i.getConnectedLinks(e,{deep:!0});r.invoke(s,"set","z",n+1,{ui:!0}),e.stopBatch("to-front");var a=e.get("parent");a&&i.getCell(a).unembed(e,{ui:!0})},processEmbedding:function(t){var e=(t=t||{}).model||this.model,i=t.paper||this.paper,n=i.options,r=i.model.findModelsUnderElement(e,{searchBy:n.findParentBy});n.frontParentOnly&&(r=r.slice(-1));for(var s=null,a=this._candidateEmbedView,o=r.length-1;o>=0;o--){var l=r[o];if(a&&a.model.id==l.id){s=a;break}var g=l.findView(i);if(n.validateEmbedding.call(i,this,g)){s=g;break}}s&&s!=a&&(this.clearEmbedding(),this._candidateEmbedView=s.highlight(null,{embedding:!0})),!s&&a&&this.clearEmbedding()},clearEmbedding:function(){var t=this._candidateEmbedView;t&&(t.unhighlight(null,{embedding:!0}),this._candidateEmbedView=null)},finalizeEmbedding:function(t){t=t||{};var e=this._candidateEmbedView,i=t.model||this.model,n=t.paper||this.paper;e&&(e.model.embed(i,{ui:!0}),e.unhighlight(null,{embedding:!0}),delete this._candidateEmbedView),r.invoke(n.model.getConnectedLinks(i,{deep:!0}),"reparent",{ui:!0})},pointerdown:function(t,e,i){var n=this.paper;if(t.target.getAttribute("magnet")&&this.can("addLinkFromMagnet")&&n.options.validateMagnet.call(n,this,t.target)){this.model.startBatch("add-link");var r=n.getDefaultLink(this,t.target);r.set({source:{id:this.model.id,selector:this.getSelector(t.target),port:t.target.getAttribute("port")},target:{x:e,y:i}}),n.model.addCell(r);var s=this._linkView=n.findViewByModel(r);s.pointerdown(t,e,i),s.startArrowheadMove("target",{whenNotAllowed:"remove"})}else this._dx=e,this._dy=i,this.restrictedArea=n.getRestrictedArea(this),c.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("element:pointerdown",t,e,i)},pointermove:function(t,e,i){if(this._linkView)this._linkView.pointermove(t,e,i);else{var n=this.paper.options.gridSize;if(this.can("elementMove")){var r=this.model.get("position"),s=o.snapToGrid(r.x,n)-r.x+o.snapToGrid(e-this._dx,n),a=o.snapToGrid(r.y,n)-r.y+o.snapToGrid(i-this._dy,n);this.model.translate(s,a,{restrictedArea:this.restrictedArea,ui:!0}),this.paper.options.embeddingMode&&(this._inProcessOfEmbedding||(this.prepareEmbedding(),this._inProcessOfEmbedding=!0),this.processEmbedding())}this._dx=o.snapToGrid(e,n),this._dy=o.snapToGrid(i,n),c.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("element:pointermove",t,e,i)}},pointerup:function(t,e,i){this._linkView?(this._linkView.pointerup(t,e,i),this._linkView=null,this.model.stopBatch("add-link")):(this._inProcessOfEmbedding&&(this.finalizeEmbedding(),this._inProcessOfEmbedding=!1),this.notify("element:pointerup",t,e,i),c.dia.CellView.prototype.pointerup.apply(this,arguments))}}),c.dia.Link=c.dia.Cell.extend({markup:['<path class="connection" stroke="black" d="M 0 0 0 0"/>','<path class="marker-source" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="marker-target" fill="black" stroke="black" d="M 0 0 0 0"/>','<path class="connection-wrap" d="M 0 0 0 0"/>','<g class="labels"/>','<g class="marker-vertices"/>','<g class="marker-arrowheads"/>','<g class="link-tools"/>'].join(""),labelMarkup:['<g class="label">',"<rect />","<text />","</g>"].join(""),toolMarkup:['<g class="link-tool">','<g class="tool-remove" event="remove">','<circle r="11" />','<path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />',"<title>Remove link.</title>","</g>",'<g class="tool-options" event="link:options">','<circle r="11" transform="translate(25)"/>','<path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>',"<title>Link options.</title>","</g>","</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>"].join(""),arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<path class="marker-arrowhead" end="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />',"</g>"].join(""),defaults:{type:"link",source:{},target:{}},isLink:function(){return!0},disconnect:function(){return this.set({source:o.point(0,0),target:o.point(0,0)})},label:function(t,e){t=t||0;var i=this.get("labels")||[];if(0===arguments.length||1===arguments.length)return i[t];var n=r.merge({},i[t],e),s=i.slice();return s[t]=n,this.set({labels:s})},translate:function(t,e,i){return(i=i||{}).translateBy=i.translateBy||this.id,i.tx=t,i.ty=e,this.applyToPoints((function(i){return{x:(i.x||0)+t,y:(i.y||0)+e}}),i)},scale:function(t,e,i,n){return this.applyToPoints((function(n){return o.point(n).scale(t,e,i).toJSON()}),n)},applyToPoints:function(t,e){if(!r.isFunction(t))throw new TypeError("dia.Link: applyToPoints expects its first parameter to be a function.");var i={},n=this.get("source");n.id||(i.source=t(n));var s=this.get("target");s.id||(i.target=t(s));var a=this.get("vertices");return a&&a.length>0&&(i.vertices=r.map(a,t)),this.set(i,e)},reparent:function(t){var e;if(this.graph){var i=this.graph.getCell(this.get("source").id),n=this.graph.getCell(this.get("target").id),r=this.graph.getCell(this.get("parent"));i&&n&&(e=this.graph.getCommonAncestor(i,n)),!r||e&&e.id===r.id||r.unembed(this,t),e&&e.embed(this,t)}return e},hasLoop:function(t){t=t||{};var e=this.get("source").id,i=this.get("target").id;if(!e||!i)return!1;var n=e===i;if(!n&&t.deep&&this.graph){var r=this.graph.getCell(e),s=this.graph.getCell(i);n=r.isEmbeddedIn(s)||s.isEmbeddedIn(r)}return n},getSourceElement:function(){var t=this.get("source");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getTargetElement:function(){var t=this.get("target");return t&&t.id&&this.graph&&this.graph.getCell(t.id)||null},getRelationshipAncestor:function(){var t;if(this.graph){var e=r.compact([this,this.getSourceElement(),this.getTargetElement()]);t=this.graph.getCommonAncestor.apply(this.graph,e)}return t||null},isRelationshipEmbeddedIn:function(t){var e=r.isString(t)?t:t.id,i=this.getRelationshipAncestor();return!!i&&(i.id===e||i.isEmbeddedIn(e))}},{endsEqual:function(t,e){var i=t.port===e.port||!t.port&&!e.port;return t.id===e.id&&i}}),c.dia.LinkView=c.dia.CellView.extend({className:function(){var t=c.dia.CellView.prototype.className.apply(this).split(" ");return t.push("link"),t.join(" ")},options:{shortLinkLength:100,doubleLinkTools:!1,longLinkLength:160,linkToolsOffset:40,doubleLinkToolsOffset:60,sampleInterval:50},_z:null,initialize:function(t){c.dia.CellView.prototype.initialize.apply(this,arguments),"function"!=typeof this.constructor.prototype.watchSource&&(this.constructor.prototype.watchSource=this.createWatcher("source"),this.constructor.prototype.watchTarget=this.createWatcher("target")),this._labelCache={},this._markerCache={},this.startListening()},startListening:function(){var t=this.model;this.listenTo(t,"change:markup",this.render),this.listenTo(t,"change:smooth change:manhattan change:router change:connector",this.update),this.listenTo(t,"change:toolMarkup",this.onToolsChange),this.listenTo(t,"change:labels change:labelMarkup",this.onLabelsChange),this.listenTo(t,"change:vertices change:vertexMarkup",this.onVerticesChange),this.listenTo(t,"change:source",this.onSourceChange),this.listenTo(t,"change:target",this.onTargetChange)},onSourceChange:function(t,e,i){this.watchSource(t,e),i.translateBy&&this.model.get("target").id||(i.updateConnectionOnly=!0,this.update(this.model,null,i))},onTargetChange:function(t,e,i){this.watchTarget(t,e),i.translateBy||(i.updateConnectionOnly=!0,this.update(this.model,null,i))},onVerticesChange:function(t,e,i){this.renderVertexMarkers(),i.translateBy&&i.translateBy!==this.model.id||(i.updateConnectionOnly=!0,this.update(t,null,i))},onToolsChange:function(){this.renderTools().updateToolsPosition()},onLabelsChange:function(){this.renderLabels().updateLabelPositions()},render:function(){this.$el.empty();var t=this.model,e=t.get("markup")||t.markup,i=a(e);if(r.isArray(i)||(i=[i]),this._V={},r.each(i,(function(t){var e=t.attr("class");e&&(e=c.util.removeClassNamePrefix(e),this._V[s.camelCase(e)]=t)}),this),!this._V.connection)throw new Error("link: no connection path in the markup");return this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),this.vel.append(i),this.renderLabels(),this.watchSource(t,t.get("source")).watchTarget(t,t.get("target")).update(),this},renderLabels:function(){if(!this._V.labels)return this;this._labelCache={};var t=s(this._V.labels.node).empty(),e=this.model.get("labels")||[];if(!e.length)return this;var i=c.util.template(this.model.get("labelMarkup")||this.model.labelMarkup),n=a(i()),o=this.can("labelMove");return r.each(e,(function(e,i){var l=n.clone().node;a(l).attr("label-idx",i),o&&a(l).attr("cursor","move"),this._labelCache[i]=a(l);var g=s(l).find("text"),h=s(l).find("rect"),d=r.extend({"text-anchor":"middle","font-size":14},c.util.getByPath(e,"attrs/text","/"));g.attr(r.omit(d,"text")),r.isUndefined(d.text)||a(g[0]).text(d.text+"",{annotations:d.annotations}),t.append(l);var I=a(g[0]).bbox(!0,t[0]);a(g[0]).translate(0,-I.height/2);var u=r.extend({fill:"white",rx:3,ry:3},c.util.getByPath(e,"attrs/rect","/"));h.attr(r.extend(u,{x:I.x,y:I.y-I.height/2,width:I.width,height:I.height}))}),this),this},renderTools:function(){if(!this._V.linkTools)return this;var t,e=s(this._V.linkTools.node).empty(),i=c.util.template(this.model.get("toolMarkup")||this.model.toolMarkup),n=a(i());return e.append(n.node),this._toolCache=n,this.options.doubleLinkTools&&(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup?(i=c.util.template(this.model.get("doubleToolMarkup")||this.model.doubleToolMarkup),t=a(i())):t=n.clone(),e.append(t.node),this._tool2Cache=t),this},renderVertexMarkers:function(){if(!this._V.markerVertices)return this;var t=s(this._V.markerVertices.node).empty(),e=c.util.template(this.model.get("vertexMarkup")||this.model.vertexMarkup);return r.each(this.model.get("vertices"),(function(i,n){t.append(a(e(r.extend({idx:n},i))).node)})),this},renderArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;var t=s(this._V.markerArrowheads.node);t.empty();var e=c.util.template(this.model.get("arrowheadMarkup")||this.model.arrowheadMarkup);return this._V.sourceArrowhead=a(e({end:"source"})),this._V.targetArrowhead=a(e({end:"target"})),t.append(this._V.sourceArrowhead.node,this._V.targetArrowhead.node),this},update:function(t,e,i){return(i=i||{}).updateConnectionOnly||this.updateAttributes(),this.updateConnection(i),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.options.perpendicular=null,this.updatePostponed=!1,this},updateConnection:function(t){t=t||{};var e,i=this.model;if(t.translateBy&&i.isRelationshipEmbeddedIn(t.translateBy)){var n=t.tx||0,s=t.ty||0;e=this.route=r.map(this.route,(function(t){return o.point(t).offset(n,s)})),this._translateConnectionPoints(n,s)}else e=this.route=this.findRoute(i.get("vertices")||[],t),this._findConnectionPoints(e);var a=this.getPathData(e);this._V.connection.attr("d",a),this._V.connectionWrap&&this._V.connectionWrap.attr("d",a),this._translateAndAutoOrientArrows(this._V.markerSource,this._V.markerTarget)},updateAttributes:function(){r.each(this.model.get("attrs"),(function(t,e){var i=[];r.isObject(t.fill)&&(this.applyGradient(e,"fill",t.fill),i.push("fill")),r.isObject(t.stroke)&&(this.applyGradient(e,"stroke",t.stroke),i.push("stroke")),r.isObject(t.filter)&&(this.applyFilter(e,t.filter),i.push("filter")),i.length>0&&(i.unshift(t),t=r.omit.apply(r,i)),this.findBySelector(e).attr(t)}),this)},_findConnectionPoints:function(t){var e,i,n,s,a=r.first(t);e=this.getConnectionPoint("source",this.model.get("source"),a||this.model.get("target")).round();var l=r.last(t);i=this.getConnectionPoint("target",this.model.get("target"),l||e).round();var g=this._markerCache;this._V.markerSource&&(g.sourceBBox=g.sourceBBox||this._V.markerSource.bbox(!0),n=o.point(e).move(a||i,g.sourceBBox.width*this._V.markerSource.scale().sx*-1).round()),this._V.markerTarget&&(g.targetBBox=g.targetBBox||this._V.markerTarget.bbox(!0),s=o.point(i).move(l||e,g.targetBBox.width*this._V.markerTarget.scale().sx*-1).round()),g.sourcePoint=n||e,g.targetPoint=s||i,this.sourcePoint=e,this.targetPoint=i},_translateConnectionPoints:function(t,e){var i=this._markerCache;i.sourcePoint.offset(t,e),i.targetPoint.offset(t,e),this.sourcePoint.offset(t,e),this.targetPoint.offset(t,e)},updateLabelPositions:function(){if(!this._V.labels)return this;var t=this.model.get("labels")||[];if(!t.length)return this;var e,i=this._V.connection.node,n=i.getTotalLength();return r.isNaN(n)||r.each(t,(function(t,s){var a=t.position,l=r.isObject(a)?a.distance:a,g=r.isObject(a)?a.offset:{x:0,y:0};l=r.isNaN(l)?n/2:(l=(l=l>n?n:l)<0?n+l:l)>1?l:n*l;var c=i.getPointAtLength(l);if(r.isObject(g))c=o.point(c).offset(g.x,g.y);else if(r.isNumber(g)){e||(e=this._samples||this._V.connection.sample(this.options.sampleInterval));for(var h,d,I,u=1/0,p=0;p<e.length;p++)d=e[p],(I=o.line(d,c).squaredLength())<u&&(u=I,h=p);var C=e[h-1],A=e[h+1],m=0;A?m=o.point(c).theta(A):C&&(m=o.point(C).theta(c)),c=o.point(c).offset(g).rotate(c,m-90)}this._labelCache[s].attr("transform","translate("+c.x+", "+c.y+")")}),this),this},updateToolsPosition:function(){if(!this._V.linkTools)return this;var t="",e=this.options.linkToolsOffset,i=this.getConnectionLength();if(!r.isNaN(i)){i<this.options.shortLinkLength&&(t="scale(.5)",e/=2);var n=this.getPointAtLength(e);if(this._toolCache.attr("transform","translate("+n.x+", "+n.y+") "+t),this.options.doubleLinkTools&&i>=this.options.longLinkLength){var s=this.options.doubleLinkToolsOffset||e;n=this.getPointAtLength(i-s),this._tool2Cache.attr("transform","translate("+n.x+", "+n.y+") "+t),this._tool2Cache.attr("visibility","visible")}else this.options.doubleLinkTools&&this._tool2Cache.attr("visibility","hidden")}return this},updateArrowheadMarkers:function(){if(!this._V.markerArrowheads)return this;if("none"===s.css(this._V.markerArrowheads.node,"display"))return this;var t=this.getConnectionLength()<this.options.shortLinkLength?.5:1;return this._V.sourceArrowhead.scale(t),this._V.targetArrowhead.scale(t),this._translateAndAutoOrientArrows(this._V.sourceArrowhead,this._V.targetArrowhead),this},createWatcher:function(t){var e=r.partial(this.onEndModelChange,t);return function(i,n){n=n||{};var r=null,s=i.previous(t)||{};return s.id&&this.stopListening(this.paper.getModelById(s.id),"change",e),n.id&&(r=this.paper.getModelById(n.id),this.listenTo(r,"change",e)),e.call(this,r,{cacheOnly:!0}),this}},onEndModelChange:function(t,e,i){var n=!i.cacheOnly,s=this.model,a=s.get(t)||{};if(e){var l=this.constructor.makeSelector(a),g="source"==t?"target":"source",c=s.get(g)||{},h=c.id&&this.constructor.makeSelector(c);if(i.handleBy===this.cid&&l==h)this[t+"BBox"]=this[g+"BBox"],this[t+"View"]=this[g+"View"],this[t+"Magnet"]=this[g+"Magnet"];else if(i.translateBy){var d=this[t+"BBox"];d.x+=i.tx,d.y+=i.ty}else{var I=this.paper.findViewByModel(a.id),u=I.el.querySelector(l);this[t+"BBox"]=I.getStrokeBBox(u),this[t+"View"]=I,this[t+"Magnet"]=u}if(i.handleBy===this.cid&&i.translateBy&&s.isEmbeddedIn(e)&&!r.isEmpty(s.get("vertices"))&&(n=!1),!this.updatePostponed&&c.id){var p=this.paper.getModelById(c.id);a.id===c.id&&(i.handleBy=this.cid),(i.handleBy===this.cid||i.translateBy&&p.isEmbeddedIn(i.translateBy))&&(this.updatePostponed=!0,n=!1)}}else this[t+"BBox"]=o.rect(a.x||0,a.y||0,1,1),this[t+"View"]=this[t+"Magnet"]=null;n&&(i.updateConnectionOnly=!0,this.update(s,null,i))},_translateAndAutoOrientArrows:function(t,e){t&&t.translateAndAutoOrient(this.sourcePoint,r.first(this.route)||this.targetPoint,this.paper.viewport),e&&e.translateAndAutoOrient(this.targetPoint,r.last(this.route)||this.sourcePoint,this.paper.viewport)},removeVertex:function(t){var e=r.clone(this.model.get("vertices"));return e&&e.length&&(e.splice(t,1),this.model.set("vertices",e,{ui:!0})),this},addVertex:function(t){for(var e=(this.model.get("vertices")||[]).slice(),i=e.slice(),n=this._V.connection.node.cloneNode(!1),r=n.getTotalLength(),s=e.length+1;s--&&(e.splice(s,0,t),a(n).attr("d",this.getPathData(this.findRoute(e))),n.getTotalLength()-r>20);)e=i.slice();return-1===s&&(s=0,e.splice(s,0,t)),this.model.set("vertices",e,{ui:!0}),s},sendToken:function(t,e,i){e=e||1e3,a(this.paper.viewport).append(t),a(t).animateAlongPath({dur:e+"ms",repeatCount:1},this._V.connection.node),r.delay((function(){a(t).remove(),i&&i()}),e)},findRoute:function(t){var e=c.routers,i=this.model.get("router"),n=this.paper.options.defaultRouter;if(!i)if(this.model.get("manhattan"))i={name:"orthogonal"};else{if(!n)return t;i=n}var s=i.args||{},a=r.isFunction(i)?i:e[i.name];if(!r.isFunction(a))throw new Error('unknown router: "'+i.name+'"');return a.call(this,t||[],s,this)},getPathData:function(t){var e=c.connectors,i=this.model.get("connector"),n=this.paper.options.defaultConnector;i||(i=this.model.get("smooth")?{name:"smooth"}:n||{});var s=r.isFunction(i)?i:e[i.name],a=i.args||{};if(!r.isFunction(s))throw new Error('unknown connector: "'+i.name+'"');return s.call(this,this._markerCache.sourcePoint,this._markerCache.targetPoint,t||this.model.get("vertices")||{},a,this)},getConnectionPoint:function(t,e,i){var n;if(r.isEmpty(e)&&(e={x:0,y:0}),r.isEmpty(i)&&(i={x:0,y:0}),e.id){var s,a=o.Rect("source"===t?this.sourceBBox:this.targetBBox);if(i.id){var l=o.Rect("source"===t?this.targetBBox:this.sourceBBox);s=(s=l.intersectionWithLineFromCenterToPoint(a.center()))||l.center()}else s=o.Point(i);var g=this.paper.options;if(g.perpendicularLinks||this.options.perpendicular){var c=a.origin(),h=a.corner();if(c.y<=s.y&&s.y<=h.y)switch(a.sideNearestToPoint(s)){case"left":n=o.Point(c.x,s.y);break;case"right":n=o.Point(h.x,s.y);break;default:n=a.center()}else if(c.x<=s.x&&s.x<=h.x)switch(a.sideNearestToPoint(s)){case"top":n=o.Point(s.x,c.y);break;case"bottom":n=o.Point(s.x,h.y);break;default:n=a.center()}else n=(n=a.intersectionWithLineFromCenterToPoint(s))||a.center()}else if(g.linkConnectionPoint){var d="target"===t?this.targetView:this.sourceView,I="target"===t?this.targetMagnet:this.sourceMagnet;n=g.linkConnectionPoint(this,d,I,s)}else n=(n=a.intersectionWithLineFromCenterToPoint(s))||a.center()}else n=o.Point(e);return n},getConnectionLength:function(){return this._V.connection.node.getTotalLength()},getPointAtLength:function(t){return this._V.connection.node.getPointAtLength(t)},_beforeArrowheadMove:function(){this._z=this.model.get("z"),this.model.toFront(),this.el.style.pointerEvents="none",this.paper.options.markAvailable&&this._markAvailableMagnets()},_afterArrowheadMove:function(){r.isNull(this._z)||(this.model.set("z",this._z,{ui:!0}),this._z=null),this.el.style.pointerEvents="visiblePainted",this.paper.options.markAvailable&&this._unmarkAvailableMagnets()},_createValidateConnectionArgs:function(t){var e,i=[];i[4]=t,i[5]=this;var n=0,r=0;"source"===t?(n=2,e="target"):(r=2,e="source");var s=this.model.get(e);return s.id&&(i[n]=this.paper.findViewByModel(s.id),i[n+1]=s.selector&&i[n].el.querySelector(s.selector)),function(t,e){return i[r]=t,i[r+1]=t.el===e?void 0:e,i}},_markAvailableMagnets:function(){function t(t,e){var i=t.paper;return i.options.validateConnection.apply(i,this._validateConnectionArgs(t,e))}var e=this.paper,i=e.model.getElements();this._marked={},r.chain(i).map(e.findViewByModel,e).each((function(e){var i=Array.prototype.slice.call(e.el.querySelectorAll("[magnet]"));"false"!==e.el.getAttribute("magnet")&&i.push(e.el);var n=r.filter(i,r.partial(t,e),this);n.length>0&&(r.each(n,r.partial(e.highlight,r,{magnetAvailability:!0}),e),e.highlight(null,{elementAvailability:!0}),this._marked[e.model.id]=n)}),this).value()},_unmarkAvailableMagnets:function(){r.each(this._marked,(function(t,e){var i=this.paper.findViewByModel(e);i&&(r.each(t,r.partial(i.unhighlight,r,{magnetAvailability:!0}),i),i.unhighlight(null,{elementAvailability:!0}))}),this),this._marked=null},startArrowheadMove:function(t,e){e=r.defaults(e||{},{whenNotAllowed:"revert"}),this._action="arrowhead-move",this._whenNotAllowed=e.whenNotAllowed,this._arrowhead=t,this._initialMagnet=this[t+"Magnet"]||(this[t+"View"]?this[t+"View"].el:null),this._initialEnd=r.clone(this.model.get(t))||{x:0,y:0},this._validateConnectionArgs=this._createValidateConnectionArgs(this._arrowhead),this._beforeArrowheadMove()},pointerdown:function(t,e,i){if(c.dia.CellView.prototype.pointerdown.apply(this,arguments),this.notify("link:pointerdown",t,e,i),this._dx=e,this._dy=i,null==t.target.getAttribute("magnet")){var n,r=c.util.removeClassNamePrefix(t.target.getAttribute("class")),s=c.util.removeClassNamePrefix(t.target.parentNode.getAttribute("class"));switch("label"===s?(r=s,n=t.target.parentNode):n=t.target,r){case"marker-vertex":this.can("vertexMove")&&(this._action="vertex-move",this._vertexIdx=t.target.getAttribute("idx"));break;case"marker-vertex-remove":case"marker-vertex-remove-area":this.can("vertexRemove")&&this.removeVertex(t.target.getAttribute("idx"));break;case"marker-arrowhead":this.can("arrowheadMove")&&this.startArrowheadMove(t.target.getAttribute("end"));break;case"label":this.can("labelMove")&&(this._action="label-move",this._labelIdx=parseInt(a(n).attr("label-idx"),10),this._samples=this._V.connection.sample(1),this._linkLength=this._V.connection.node.getTotalLength());break;default:var o=t.target.parentNode.getAttribute("event");o?this.can("useLinkTools")&&("remove"===o?this.model.remove():this.notify(o,t,e,i)):this.can("vertexAdd")&&(this._vertexIdx=this.addVertex({x:e,y:i}),this._action="vertex-move")}}},pointermove:function(t,e,i){switch(this._action){case"vertex-move":var n=r.clone(this.model.get("vertices"));n[this._vertexIdx]={x:e,y:i},this.model.set("vertices",n,{ui:!0});break;case"label-move":for(var s,l,g,h,d={x:e,y:i},I=this._samples,u=1/0,p=0,C=I.length;p<C;p++)g=I[p],(h=o.line(g,d).squaredLength())<u&&(u=h,s=g,l=p);var A=I[l-1],m=I[l+1],f=0;A&&m?f=o.line(A,m).pointOffset(d):A?f=o.line(A,s).pointOffset(d):m&&(f=o.line(s,m).pointOffset(d)),this.model.label(this._labelIdx,{position:{distance:s.distance/this._linkLength,offset:f}});break;case"arrowhead-move":if(this.paper.options.snapLinks){var y,w=this.paper.options.snapLinks.radius||50,b=this.paper.findViewsInArea({x:e-w,y:i-w,width:2*w,height:2*w});this._closestView&&this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this._closestView=this._closestEnd=null;var N=Number.MAX_VALUE,M=o.point(e,i);r.each(b,(function(t){"false"!==t.el.getAttribute("magnet")&&(y=t.model.getBBox().center().distance(M))<w&&y<N&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,null))&&(N=y,this._closestView=t,this._closestEnd={id:t.model.id}),t.$("[magnet]").each(r.bind((function(e,i){var n=a(i).bbox(!1,this.paper.viewport);(y=M.distance({x:n.x+n.width/2,y:n.y+n.height/2}))<w&&y<N&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(t,i))&&(N=y,this._closestView=t,this._closestEnd={id:t.model.id,selector:t.getSelector(i),port:i.getAttribute("port")})}),this))}),this),this._closestView&&this._closestView.highlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),this.model.set(this._arrowhead,this._closestEnd||{x:e,y:i},{ui:!0})}else{var v="mousemove"===t.type?t.target:document.elementFromPoint(t.clientX,t.clientY);this._targetEvent!==v&&(this._magnetUnderPointer&&this._viewUnderPointer.unhighlight(this._magnetUnderPointer,{connecting:!0}),this._viewUnderPointer=this.paper.findView(v),this._viewUnderPointer?(this._magnetUnderPointer=this._viewUnderPointer.findMagnet(v),this._magnetUnderPointer&&this.paper.options.validateConnection.apply(this.paper,this._validateConnectionArgs(this._viewUnderPointer,this._magnetUnderPointer))?this._magnetUnderPointer&&this._viewUnderPointer.highlight(this._magnetUnderPointer,{connecting:!0}):this._magnetUnderPointer=null):this._magnetUnderPointer=null),this._targetEvent=v,this.model.set(this._arrowhead,{x:e,y:i},{ui:!0})}}this._dx=e,this._dy=i,c.dia.CellView.prototype.pointermove.apply(this,arguments),this.notify("link:pointermove",t,e,i)},pointerup:function(t,e,i){if("label-move"===this._action)this._samples=null;else if("arrowhead-move"===this._action){var n,r=this.paper,s=r.options,a=this._arrowhead,o=this._initialEnd;if(s.snapLinks)this._closestView&&(this._closestView.unhighlight(this._closestEnd.selector,{connecting:!0,snapping:!0}),n=this._closestView.findMagnet(this._closestEnd.selector)),this._closestView=this._closestEnd=null;else{var l=this._viewUnderPointer;if(n=this._magnetUnderPointer,this._viewUnderPointer=null,this._magnetUnderPointer=null,n){l.unhighlight(n,{connecting:!0});var g=l.getSelector(n),h=n.getAttribute("port"),d={id:l.model.id};null!=g&&(d.port=h),null!=h&&(d.selector=g),this.model.set(a,d,{ui:!0})}}r.linkAllowed(this)||("remove"===this._whenNotAllowed?this.model.remove():this.model.set(a,o,{ui:!0})),s.embeddingMode&&this.model.reparent()&&(this._z=null);var I=this.model.prop(a)||{};!c.dia.Link.endsEqual(o,I)&&(o.id&&this.notify("link:disconnect",t,r.findViewByModel(o.id),this._initialMagnet,a),I.id&&this.notify("link:connect",t,r.findViewByModel(I.id),n,a)),this._afterArrowheadMove()}this._action=null,this._whenNotAllowed=null,this._initialMagnet=null,this._initialEnd=null,this._validateConnectionArgs=null,this.notify("link:pointerup",t,e,i),c.dia.CellView.prototype.pointerup.apply(this,arguments)}},{makeSelector:function(t){var e='[model-id="'+t.id+'"]';return t.port?e+=' [port="'+t.port+'"]':t.selector&&(e+=" "+t.selector),e}}),c.dia.Paper=c.mvc.View.extend({className:"paper",options:{width:800,height:600,origin:{x:0,y:0},gridSize:1,drawGrid:!1,perpendicularLinks:!1,elementView:c.dia.ElementView,linkView:c.dia.LinkView,snapLinks:!1,multiLinks:!0,guard:function(t,e){return!1},highlighting:{default:{name:"stroke",options:{padding:3}},magnetAvailability:{name:"addClass",options:{className:"available-magnet"}},elementAvailability:{name:"addClass",options:{className:"available-cell"}}},preventContextMenu:!0,restrictTranslate:!1,markAvailable:!1,defaultLink:new c.dia.Link,defaultConnector:{name:"normal"},defaultRouter:{name:"normal"},validateMagnet:function(t,e){return"passive"!==e.getAttribute("magnet")},validateConnection:function(t,e,i,n,r,s){return("target"===r?i:t)instanceof c.dia.ElementView},embeddingMode:!1,validateEmbedding:function(t,e){return!0},findParentBy:"bbox",frontParentOnly:!0,interactive:{labelMove:!1},linkPinning:!0,clickThreshold:0,cellViewNamespace:c.shapes,highlighterNamespace:c.highlighters},events:{mousedown:"pointerdown",dblclick:"mousedblclick",click:"mouseclick",touchstart:"pointerdown",touchend:"mouseclick",touchmove:"pointermove",mousemove:"pointermove","mouseover .joint-cell":"cellMouseover","mouseout .joint-cell":"cellMouseout",contextmenu:"contextmenu",mousewheel:"mousewheel",DOMMouseScroll:"mousewheel"},_highlights:[],init:function(){r.bindAll(this,"pointerup"),this.model=this.options.model||new c.dia.Graph,this.options.origin=r.clone(this.options.origin),this.options.defaultConnector=r.clone(this.options.defaultConnector),r.defaults(this.options.highlighting,this.constructor.prototype.options.highlighting),this.options.highlighting=r.cloneDeep(this.options.highlighting),this.svg=a("svg").node,this.viewport=a("g").addClass(c.util.addClassNamePrefix("viewport")).node,this.defs=a("defs").node,a(this.svg).append([this.viewport,this.defs]),this.$el.append(this.svg),this.listenTo(this.model,"add",this.onCellAdded),this.listenTo(this.model,"remove",this.removeView),this.listenTo(this.model,"reset",this.resetViews),this.listenTo(this.model,"sort",this._onSort),this.listenTo(this.model,"batch:stop",this._onBatchStop),this.setOrigin(),this.setDimensions(),s(document).on("mouseup touchend",this.pointerup),this._mousemoved=0,this._views={},this.on("cell:highlight",this.onCellHighlight,this),this.on("cell:unhighlight",this.onCellUnhighlight,this)},_onSort:function(){this.model.hasActiveBatch("add")||this.sortViews()},_onBatchStop:function(t){"add"!==(t&&t.batchName)||this.model.hasActiveBatch("add")||this.sortViews()},onRemove:function(){this.removeViews(),s(document).off("mouseup touchend",this.pointerup)},setDimensions:function(t,e){t=this.options.width=t||this.options.width,e=this.options.height=e||this.options.height,a(this.svg).attr({width:t,height:e}),this.trigger("resize",t,e)},setOrigin:function(t,e){this.options.origin.x=t||0,this.options.origin.y=e||0,a(this.viewport).translate(t,e,{absolute:!0}),this.trigger("translate",t,e),this.options.drawGrid&&this.drawGrid()},fitToContent:function(t,e,i,n){r.isObject(t)?(t=(n=t).gridWidth||1,e=n.gridHeight||1,i=n.padding||0):(n=n||{},t=t||1,e=e||1,i=i||0),i=c.util.normalizeSides(i);var s=a(this.viewport).bbox(!0,this.svg),o=a(this.viewport).scale();s.x*=o.sx,s.y*=o.sy,s.width*=o.sx,s.height*=o.sy;var l=Math.max(Math.ceil((s.width+s.x)/t),1)*t,g=Math.max(Math.ceil((s.height+s.y)/e),1)*e,h=0,d=0;("negative"==n.allowNewOrigin&&s.x<0||"positive"==n.allowNewOrigin&&s.x>=0||"any"==n.allowNewOrigin)&&(h=Math.ceil(-s.x/t)*t,l+=h+=i.left),("negative"==n.allowNewOrigin&&s.y<0||"positive"==n.allowNewOrigin&&s.y>=0||"any"==n.allowNewOrigin)&&(d=Math.ceil(-s.y/e)*e,g+=d+=i.top),l+=i.right,g+=i.bottom,l=Math.max(l,n.minWidth||0),g=Math.max(g,n.minHeight||0),l=Math.min(l,n.maxWidth||Number.MAX_VALUE),g=Math.min(g,n.maxHeight||Number.MAX_VALUE);var I=l!=this.options.width||g!=this.options.height;(h!=this.options.origin.x||d!=this.options.origin.y)&&this.setOrigin(h,d),I&&this.setDimensions(l,g)},scaleContentToFit:function(t){var e=this.getContentBBox();if(e.width&&e.height){t=t||{},r.defaults(t,{padding:0,preserveAspectRatio:!0,scaleGrid:null,minScale:0,maxScale:Number.MAX_VALUE});var i=t.padding,n=t.minScaleX||t.minScale,s=t.maxScaleX||t.maxScale,l=t.minScaleY||t.minScale,g=t.maxScaleY||t.maxScale,c=t.fittingBBox||{x:this.options.origin.x,y:this.options.origin.y,width:this.options.width,height:this.options.height};c=o.rect(c).moveAndExpand({x:i,y:i,width:-2*i,height:-2*i});var h=a(this.viewport).scale(),d=c.width/e.width*h.sx,I=c.height/e.height*h.sy;if(t.preserveAspectRatio&&(d=I=Math.min(d,I)),t.scaleGrid){var u=t.scaleGrid;d=u*Math.floor(d/u),I=u*Math.floor(I/u)}d=Math.min(s,Math.max(n,d)),I=Math.min(g,Math.max(l,I)),this.scale(d,I);var p=this.getContentBBox(),C=c.x-p.x,A=c.y-p.y;this.setOrigin(C,A)}},getContentBBox:function(){var t=this.viewport.getBoundingClientRect(),e=this.viewport.getScreenCTM(),i=this.viewport.getCTM();return o.rect({x:t.left-e.e+i.e,y:t.top-e.f+i.f,width:t.width,height:t.height})},getArea:function(){var t=this.viewport.getCTM().inverse(),e={x:0,y:0,width:this.options.width,height:this.options.height};return o.rect(a.transformRect(e,t))},getRestrictedArea:function(){return r.isFunction(this.options.restrictTranslate)?this.options.restrictTranslate.apply(this,arguments):!0===this.options.restrictTranslate?this.getArea():this.options.restrictTranslate||null},createViewForModel:function(t){var e,i,r=this.options.cellViewNamespace,s=t.get("type")+"View",a=c.util.getByPath(r,s,".");return t.isLink()?(e=this.options.linkView,i=c.dia.LinkView):(e=this.options.elementView,i=c.dia.ElementView),new(e.prototype instanceof n.View?a||e:e.call(this,t)||a||i)({model:t,interactive:this.options.interactive})},onCellAdded:function(t,e,i){if(this.options.async&&!1!==i.async&&r.isNumber(i.position)){if(this._asyncCells=this._asyncCells||[],this._asyncCells.push(t),0==i.position){if(this._frameId)throw new Error("another asynchronous rendering in progress");this.asyncRenderViews(this._asyncCells,i),delete this._asyncCells}}else this.renderView(t)},removeView:function(t){var e=this._views[t.id];return e&&(e.remove(),delete this._views[t.id]),e},renderView:function(t){var e=this._views[t.id]=this.createViewForModel(t);return a(this.viewport).append(e.el),e.paper=this,e.render(),s(e.el).find("image").on("dragstart",(function(){return!1})),e},beforeRenderViews:function(t){return t.sort((function(t){return t instanceof c.dia.Link?1:-1})),t},afterRenderViews:function(){this.sortViews()},resetViews:function(t,e){this.removeViews();var i=t.models.slice();i=this.beforeRenderViews(i,e)||i,this._frameId&&(c.util.cancelFrame(this._frameId),delete this._frameId),this.options.async?this.asyncRenderViews(i,e):(r.each(i,this.renderView,this),this.sortViews())},removeViews:function(){r.invoke(this._views,"remove"),this._views={}},asyncBatchAdded:r.noop,asyncRenderViews:function(t,e){if(this._frameId){var i=this.options.async&&this.options.async.batchSize||50,n=t.splice(0,i),s=this.model.get("cells");r.each(n,(function(t){t.collection===s&&this.renderView(t)}),this),this.asyncBatchAdded()}t.length?this._frameId=c.util.nextFrame((function(){this.asyncRenderViews(t,e)}),this):(delete this._frameId,this.afterRenderViews(e),this.trigger("render:done",e))},sortViews:function(){var t=s(this.viewport).children("[model-id]"),e=this.model.get("cells");c.util.sortElements(t,(function(t,i){var n=e.get(s(t).attr("model-id")),r=e.get(s(i).attr("model-id"));return(n.get("z")||0)>(r.get("z")||0)?1:-1}))},scale:function(t,e,i,n){e=e||t,r.isUndefined(i)&&(i=0,n=0),a(this.viewport).attr("transform","");var s=this.options.origin.x,o=this.options.origin.y;if(i||n||s||o){var l=s-i*(t-1),g=o-n*(e-1);this.setOrigin(l,g)}return a(this.viewport).scale(t,e),this.trigger("scale",t,e,i,n),this.options.drawGrid&&this.drawGrid(),this},rotate:function(t,e,i){if(r.isUndefined(e)){var n=this.viewport.getBBox();e=n.width/2,i=n.height/2}a(this.viewport).rotate(t,e,i)},findView:function(t){for(var e=r.isString(t)?this.viewport.querySelector(t):t instanceof s?t[0]:t;e&&e!==this.el&&e!==document;){var i=e.getAttribute("model-id");if(i)return this._views[i];e=e.parentNode}},findViewByModel:function(t){var e=r.isString(t)?t:t.id;return this._views[e]},findViewsFromPoint:function(t){t=o.point(t);var e=r.map(this.model.getElements(),this.findViewByModel,this);return r.filter(e,(function(e){return e&&o.rect(e.vel.bbox(!1,this.viewport)).containsPoint(t)}),this)},findViewsInArea:function(t,e){e=r.defaults(e||{},{strict:!1}),t=o.rect(t);var i=r.map(this.model.getElements(),this.findViewByModel,this),n=e.strict?"containsRect":"intersect";return r.filter(i,(function(e){return e&&t[n](o.rect(e.vel.bbox(!1,this.viewport)))}),this)},getModelById:function(t){return this.model.getCell(t)},snapToGrid:function(t){var e=a(this.viewport).toLocalPoint(t.x,t.y);return{x:o.snapToGrid(e.x,this.options.gridSize),y:o.snapToGrid(e.y,this.options.gridSize)}},clientToLocalPoint:function(t){t=o.point(t);var e=a("rect",{width:this.options.width,height:this.options.height,x:0,y:0,opacity:0});a(this.svg).prepend(e);var i=s(this.svg).offset();e.remove();var n=document.body.scrollTop||document.documentElement.scrollTop,r=document.body.scrollLeft||document.documentElement.scrollLeft;return t.offset(r-i.left,n-i.top),a.transformPoint(t,this.viewport.getCTM().inverse())},linkAllowed:function(t){var e;if(t instanceof c.dia.Link)e=t;else{if(!(t instanceof c.dia.LinkView))throw new Error("Must provide link model or view.");e=t.model}if(!this.options.multiLinks){var i=e.get("source"),n=e.get("target");if(i.id&&n.id){var s=e.getSourceElement();if(s){var a=this.model.getConnectedLinks(s,{outbound:!0,inbound:!1});if(r.filter(a,(function(t){var e=t.get("source"),r=t.get("target");return e&&e.id===i.id&&(!e.port||e.port===i.port)&&r&&r.id===n.id&&(!r.port||r.port===n.port)})).length>1)return!1}}}return!!(this.options.linkPinning||r.has(e.get("source"),"id")&&r.has(e.get("target"),"id"))},getDefaultLink:function(t,e){return r.isFunction(this.options.defaultLink)?this.options.defaultLink.call(this,t,e):this.options.defaultLink.clone()},resolveHighlighter:function(t){var e=(t=t||{}).highlighter,i=this.options;if(r.isUndefined(e)){var n=r.chain(t).pick("embedding","connecting","magnetAvailability","elementAvailability").keys().first().value();e=n&&i.highlighting[n]||i.highlighting.default}if(!e)return!1;r.isString(e)&&(e={name:e});var s=e.name,a=i.highlighterNamespace[s];if(!a)throw new Error('Unknown highlighter ("'+s+'")');if("function"!=typeof a.highlight)throw new Error('Highlighter ("'+s+'") is missing required highlight() method');if("function"!=typeof a.unhighlight)throw new Error('Highlighter ("'+s+'") is missing required unhighlight() method');return{highlighter:a,options:e.options||{},name:s}},onCellHighlight:function(t,e,i){if(i=this.resolveHighlighter(i)){var n=i.name+e.id+JSON.stringify(i.options);if(!this._highlights[n]){var s=i.highlighter;s.highlight(t,e,r.clone(i.options)),this._highlights[n]={cellView:t,magnetEl:e,opt:i.options,highlighter:s}}}},onCellUnhighlight:function(t,e,i){if(i=this.resolveHighlighter(i)){var n=i.name+e.id+JSON.stringify(i.options),r=this._highlights[n];r&&(r.highlighter.unhighlight(r.cellView,r.magnetEl,r.opt),this._highlights[n]=null)}},mousedblclick:function(t){t.preventDefault(),t=c.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerdblclick(t,i.x,i.y):this.trigger("blank:pointerdblclick",t,i.x,i.y)}},mouseclick:function(t){if(this._mousemoved<=this.options.clickThreshold){t=c.util.normalizeEvent(t);var e=this.findView(t.target);if(this.guard(t,e))return;var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.pointerclick(t,i.x,i.y):this.trigger("blank:pointerclick",t,i.x,i.y)}},guard:function(t,e){return!(!this.options.guard||!this.options.guard(t,e))||(t.data&&!r.isUndefined(t.data.guarded)?t.data.guarded:!(e&&e.model&&e.model instanceof c.dia.Cell||this.svg===t.target||this.el===t.target||s.contains(this.svg,t.target)))},contextmenu:function(t){t=c.util.normalizeEvent(t),this.options.preventContextMenu&&t.preventDefault();var e=this.findView(t.target);if(!this.guard(t,e)){var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?e.contextmenu(t,i.x,i.y):this.trigger("blank:contextmenu",t,i.x,i.y)}},pointerdown:function(t){t=c.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){t.preventDefault(),this._mousemoved=0;var i=this.snapToGrid({x:t.clientX,y:t.clientY});e?(this.sourceView=e,e.pointerdown(t,i.x,i.y)):this.trigger("blank:pointerdown",t,i.x,i.y)}},pointermove:function(t){if(this.sourceView){t.preventDefault(),t=c.util.normalizeEvent(t),this._mousemoved++;var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView.pointermove(t,e.x,e.y)}},pointerup:function(t){t=c.util.normalizeEvent(t);var e=this.snapToGrid({x:t.clientX,y:t.clientY});this.sourceView?(this.sourceView.pointerup(t,e.x,e.y),this.sourceView=null):this.trigger("blank:pointerup",t,e.x,e.y)},mousewheel:function(t){t=c.util.normalizeEvent(t);var e=this.findView(t.target);if(!this.guard(t,e)){var i=t.originalEvent,n=this.snapToGrid({x:i.clientX,y:i.clientY}),r=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));e?e.mousewheel(t,n.x,n.y,r):this.trigger("blank:mousewheel",t,n.x,n.y,r)}},cellMouseover:function(t){t=c.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseover(t)}},cellMouseout:function(t){t=c.util.normalizeEvent(t);var e=this.findView(t.target);if(e){if(this.guard(t,e))return;e.mouseout(t)}},setGridSize:function(t){return this.options.gridSize=t,this.options.drawGrid&&this.drawGrid(),this},clearGrid:function(){return this.el.style.backgroundImage="none",this},drawGrid:function(t){t=r.defaults(t||{},this.options.drawGrid,{color:"#aaa",thickness:1});var e=this.options.gridSize;if(e<=1)return this.clearGrid();var i=a(this.viewport).scale(),n=i.sx,s=i.sy,o=this.options.origin.x,l=this.options.origin.y,g=e*n,c=e*s,h=document.createElement("canvas");h.width=g,h.height=c,g=o>=0?o%g:g+o%g,c=l>=0?l%c:c+l%c;var d=h.getContext("2d");d.beginPath(),d.rect(g,c,t.thickness*n,t.thickness*s),d.fillStyle=t.color,d.fill();var I=h.toDataURL("image/png");return this.el.style.backgroundImage='url("'+I+'")',this},setInteractivity:function(t){this.options.interactive=t,r.invoke(this._views,"setInteractivity",t)}}),c.dia.FastPaper=c.dia.Paper.extend({sortViews:r.noop,beforeRenderViews:function(t){this.documentFragment=document.createDocumentFragment()},renderView:function(t){this.documentFragment=document.createDocumentFragment();var e=this._views[t.id]=this.createViewForModel(t);return a(this.viewport).append(e.el),e.paper=this,e.render(),e},asyncBatchAdded:function(){this.documentFragment.childNodes.length&&(this.viewport.insertBefore(this.documentFragment,this.viewport.querySelector(".element")),this.documentFragment=document.createDocumentFragment())}}),function(t,e){var i=function(t){var i=e.cloneDeep(t);this.ports=[],this.groups=this._getNormalizedGroups(i),this._init(i)};i.prototype={getPorts:function(){return this.ports},getPort:function(t){return e.find(this.ports,(function(e){return e.id===t}))},getGroup:function(t){return this.groups[t]||this._createGroupNode()},addPort:function(t){t=this._evaluatePort(t),this.ports.push(t)},_init:function(t){var i=(t=t||{}).items||[];e.each(i,(function(t){this.addPort(t)}),this)},_evaluatePort:function(t){var i=e.clone(t),n=e.extend(this._createGroupNode(),t.group?this.groups[t.group]:null);return i.markup=i.markup||n.markup,i.attrs=e.merge({},n.attrs,i.attrs),i.position=e.merge(this._createPositionNode(),n.position,{args:i.args}),i.label=e.merge({},n.label,this._getLabel(i)),i.z=this._getZIndex(i.z,n.z),i},_getZIndex:function(t,i){return e.isNumber(t)?t:e.isNumber(i)||"auto"===i?i:"auto"},_createPositionNode:function(){return{name:"left",args:{}}},_createGroupNode:function(){return{position:{},label:{position:{name:"left",args:{}}}}},_getNormalizedGroups:function(t){return(t=t||{}).groups=t.groups||{},e.each(t.groups,(function(t){t.position=this._getPosition(t.position,!0),t.label=this._getLabel(t,!0)}),this),t.groups},_getPosition:function(t,i){var n,r={};e.isFunction(t)?(n="fn",r.fn=t):e.isString(t)?n=t:e.isUndefined(t)?n=i?"left":null:e.isArray(t)?(n="absolute",r.x=t[0],r.y=t[1]):e.isObject(t)&&(n=t.name,e.extend(r,t.args));var s={args:r};return n&&(s.name=n),s},_getLabel:function(t,e){var i=t.label||{},n=i;return n.position=this._getPosition(i.position,e),n}},e.extend(t.dia.Element.prototype,{_initializePorts:function(){this._createPortData(),this.on("change:ports",(function(){this._processRemovedPort(),this._createPortData()}),this)},_processRemovedPort:function(){var t=this.get("ports")||{},i={};e.each(t.items,(function(t){i[t.id]=!0}));var n=this.previous("ports")||{},r={};e.each(n.items,(function(t){i[t.id]||(r[t.id]=!0)}));var s=this.graph;if(s&&!e.isEmpty(r)){var a=s.getConnectedLinks(this,{inbound:!0});e.each(a,(function(t){r[t.get("target").port]&&t.remove()}));var o=s.getConnectedLinks(this,{outbound:!0});e.each(o,(function(t){r[t.get("source").port]&&t.remove()}))}},hasPorts:function(){return this.prop("ports/items").length>0},hasPort:function(t){return-1!==this.getPortIndex(t)},getPorts:function(){return e.cloneDeep(this.prop("ports/items"))||[]},getPort:function(t){return e.cloneDeep(e.find(this.prop("ports/items"),(function(e){return e.id&&e.id===t})))},getPortIndex:function(t){var i=e.isObject(t)?t.id:t;return this._isValidPortId(i)?e.findIndex(this.prop("ports/items"),{id:i}):-1},addPort:function(t,i){if(!e.isObject(t)||e.isArray(t))throw new Error("Element: addPort requires an object.");var n=e.clone(this.prop("ports/items"))||[];return n.push(t),this.prop("ports/items",n,i),this},portProp:function(t,i,n,r){var s,a=this.getPortIndex(t);if(-1===a)throw new Error("Element: unable to find port with id "+t);return e.isString(i)?(s=Array.prototype.slice.call(arguments,1))[0]=["ports/items/",a,"/",i].join(""):s=["ports/items/"+a,i,n],this.prop.apply(this,s)},_validatePorts:function(){var i=this.get("ports")||{},n=[],r=(i=i||{}).items||[];return e.each(r,(function(e){this._isValidPortId(e.id)||(e.id=t.util.uuid())}),this),e.uniq(r,"id").length!==r.length&&n.push("Element: found id duplicities in ports."),n},_isValidPortId:function(t){return!e.isNull(t)&&!e.isUndefined(t)&&!e.isObject(t)},addPorts:function(t,i){return t.length&&this.prop("ports/items",(e.clone(this.prop("ports/items"))||[]).concat(t),i),this},removePort:function(t,i){var n=i||{},r=e.clone(this.prop("ports/items")),s=this.getPortIndex(t);return-1!==s&&(r.splice(s,1),n.rewrite=!0,this.prop("ports/items",r,n)),this},_createPortData:function(){var t=this._validatePorts();if(t.length>0)throw this.set("ports",this.previous("ports")),new Error(t.join(" "));this.portData=new i(this.get("ports"))}}),e.extend(t.dia.ElementView.prototype,{portContainerMarkup:'<g class="joint-port"/>',portMarkup:'<circle class="joint-port-body" r="10" fill="#FFFFFF" stroke="#000000"/>',portLabelMarkup:'<text class="joint-port-label" fill="#000000"/>',_portElementsCache:null,_initializePorts:function(){this._portElementsCache={},this.listenTo(this.model,"change:ports",(function(){this._refreshPorts()}))},_refreshPorts:function(){this._removePorts(),this._portElementsCache={},this._renderPorts()},_renderPorts:function(){var t=[],i=this._getContainerElement();e.each(i.node.childNodes,(function(e){t.push(e)}));var n=e.groupBy(this.model.portData.getPorts(),"z"),r="auto";e.each(n.auto,(function(e){var n=this._getPortElement(e);i.append(n),t.push(n)}),this),e.each(n,(function(e,i){if(i!==r){var s=parseInt(i,10);this._appendPorts(n[i],s,t)}}),this),this._updatePorts()},_getContainerElement:function(){return this.rotatableNode||this.vel},_appendPorts:function(t,i,n){var r=this._getContainerElement(),s=e.map(t,this._getPortElement,this);n[i]||i<0?a(n[Math.max(i,0)]).before(s):r.append(s)},_getPortElement:function(t){return this._portElementsCache[t.id]?this._portElementsCache[t.id].portElement:this._createPortElement(t)},_updatePorts:function(){var t=o.rect(this.model.get("size")),i=this.model.portData.getPorts();e.each(e.groupBy(i,"group"),(function(i,n){var r=this.model.portData.getGroup(n);e.each(i,this._updatePortAttrs,this),this._layoutPorts(i,r,t.clone())}),this)},_removePorts:function(){e.invoke(this._portElementsCache,"portElement.remove")},_createPortElement:function(t){var e=a(this._getPortMarkup(t)),i=a(this._getPortLabelMarkup(t.label));if(e&&e.length>1)throw new Error("ElementView: Invalid port markup - multiple roots.");e.attr({port:t.id,"port-group":t.group});var n=a(this.portContainerMarkup).append(e).append(i);return this._portElementsCache[t.id]={portElement:n,portLabelElement:i},n},_updatePortAttrs:function(t){var e=t.attrs||{},i=this._portElementsCache[t.id];i&&this._updateAllAttrs(i.portElement.node,e)},_updateAllAttrs:function(t,i){e.each(i,(function(e,i){var n="."===i?s(t):s(t).find(i);this.updateAttr(n,e)}),this)},_layoutPorts:function(i,n,r){var s=n.position.name,a=t.layout.Port;a[s]||(s="left");var l=a[s](e.pluck(i,"position.args"),r,n.position.args||{});e.each(l,(function(e,n){var s=this.model.portData.getPort(i[n].id),a=this._portElementsCache[s.id]||{};this.applyPortTransform(a.portElement,e);var l=t.layout.PortLabel,g=s.label.position.name;if(l[g]){var c=l[g](o.point(e),r,s.label.position.args);this.applyPortTransform(a.portLabelElement,c,-(e.angle||0))}}),this)},applyPortTransform:function(t,e,i){var n=a.createSVGMatrix().rotate(i||0).translate(e.x||0,e.y||0).rotate(e.angle||0);t.transform(n,{absolute:!0}),this._updateAllAttrs(t.node,e.attrs||{})},_getPortMarkup:function(t){return t.markup||this.model.get("portMarkup")||this.model.portMarkup||this.portMarkup},_getPortLabelMarkup:function(t){return t.markup||this.model.get("portLabelMarkup")||this.model.portLabelMarkup||this.portLabelMarkup}})}(c,r),c.shapes.basic={},c.shapes.basic.Generic=c.dia.Element.extend({defaults:r.defaultsDeep({type:"basic.Generic",attrs:{".":{fill:"#ffffff",stroke:"none"}}},c.dia.Element.prototype.defaults)}),c.shapes.basic.Rect=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect/></g><text/></g>',defaults:r.defaultsDeep({type:"basic.Rect",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:100,height:60},text:{fill:"#000000",text:"","font-size":14,"ref-x":.5,"ref-y":.5,"text-anchor":"middle","y-alignment":"middle","font-family":"Arial, helvetica, sans-serif"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.basic.TextView=c.dia.ElementView.extend({initialize:function(){c.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:attrs",this.resize)}}),c.shapes.basic.Text=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><text/></g></g>',defaults:r.defaultsDeep({type:"basic.Text",attrs:{text:{"font-size":18,fill:"#000000"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.basic.Circle=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g><text/></g>',defaults:r.defaultsDeep({type:"basic.Circle",size:{width:60,height:60},attrs:{circle:{fill:"#ffffff",stroke:"#000000",r:30,cx:30,cy:30},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.basic.Ellipse=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse/></g><text/></g>',defaults:r.defaultsDeep({type:"basic.Ellipse",size:{width:60,height:40},attrs:{ellipse:{fill:"#ffffff",stroke:"#000000",rx:30,ry:20,cx:30,cy:20},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-y":.5,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.basic.Polygon=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:r.defaultsDeep({type:"basic.Polygon",size:{width:60,height:40},attrs:{polygon:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.basic.Polyline=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><polyline/></g><text/></g>',defaults:r.defaultsDeep({type:"basic.Polyline",size:{width:60,height:40},attrs:{polyline:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.basic.Image=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><image/></g><text/></g>',defaults:r.defaultsDeep({type:"basic.Image",attrs:{text:{"font-size":14,text:"","text-anchor":"middle","ref-x":.5,"ref-dy":20,"y-alignment":"middle",fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.basic.Path=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path/></g><text/></g>',defaults:r.defaultsDeep({type:"basic.Path",size:{width:60,height:60},attrs:{path:{fill:"#ffffff",stroke:"#000000"},text:{"font-size":14,text:"","text-anchor":"middle",ref:"path","ref-x":.5,"ref-dy":10,fill:"#000000","font-family":"Arial, helvetica, sans-serif"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.basic.Rhombus=c.shapes.basic.Path.extend({defaults:r.defaultsDeep({type:"basic.Rhombus",attrs:{path:{d:"M 30 0 L 60 30 30 60 0 30 z"},text:{"ref-y":.5,"y-alignment":"middle"}}},c.shapes.basic.Path.prototype.defaults)}),c.shapes.basic.PortsModelInterface={initialize:function(){this.updatePortsAttrs(),this.on("change:inPorts change:outPorts",this.updatePortsAttrs,this),this.constructor.__super__.constructor.__super__.initialize.apply(this,arguments)},updatePortsAttrs:function(t){if(this._portSelectors){var e=r.omit(this.get("attrs"),this._portSelectors);this.set("attrs",e,{silent:!0})}this._portSelectors=[];var i={};r.each(this.get("inPorts"),(function(t,e,n){var s=this.getPortAttrs(t,e,n.length,".inPorts","in");this._portSelectors=this._portSelectors.concat(r.keys(s)),r.extend(i,s)}),this),r.each(this.get("outPorts"),(function(t,e,n){var s=this.getPortAttrs(t,e,n.length,".outPorts","out");this._portSelectors=this._portSelectors.concat(r.keys(s)),r.extend(i,s)}),this),this.attr(i,{silent:!0}),this.processPorts(),this.trigger("process:ports")},getPortSelector:function(t){var e=".inPorts",i=this.get("inPorts").indexOf(t);if(i<0&&(e=".outPorts",(i=this.get("outPorts").indexOf(t))<0))throw new Error("getPortSelector(): Port doesn't exist.");return e+">g:nth-child("+(i+1)+")>.port-body"}},c.shapes.basic.PortsViewInterface={initialize:function(){this.listenTo(this.model,"process:ports",this.update),c.dia.ElementView.prototype.initialize.apply(this,arguments)},update:function(){this.renderPorts(),c.dia.ElementView.prototype.update.apply(this,arguments)},renderPorts:function(){var t=this.$(".inPorts").empty(),e=this.$(".outPorts").empty(),i=c.util.template(this.model.portMarkup);r.each(r.filter(this.model.ports,(function(t){return"in"===t.type})),(function(e,n){t.append(a(i({id:n,port:e})).node)})),r.each(r.filter(this.model.ports,(function(t){return"out"===t.type})),(function(t,n){e.append(a(i({id:n,port:t})).node)}))}},c.shapes.basic.TextBlock=c.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',c.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>',"</g>"].join(""),defaults:r.defaultsDeep({type:"basic.TextBlock",attrs:{rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000","font-size":14,"font-family":"Arial, helvetica, sans-serif"},".content":{text:"",ref:"rect","ref-x":.5,"ref-y":.5,"y-alignment":"middle","x-alignment":"middle"}},content:""},c.shapes.basic.Generic.prototype.defaults),initialize:function(){this.listenTo(this,"change:size",this.updateSize),this.listenTo(this,"change:content",this.updateContent),this.updateSize(this,this.get("size")),this.updateContent(this,this.get("content")),c.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateSize:function(t,e){this.attr({".fobj":r.clone(e),div:{style:r.clone(e)}})},updateContent:function(t,e){c.env.test("svgforeignobject")?this.attr({".content":{html:e}}):this.attr({".content":{text:e}})},setForeignObjectSize:function(){this.updateSize.apply(this,arguments)},setDivContent:function(){this.updateContent.apply(this,arguments)}}),c.shapes.basic.TextBlockView=c.dia.ElementView.extend({initialize:function(){c.dia.ElementView.prototype.initialize.apply(this,arguments),this.noSVGForeignObjectElement=!c.env.test("svgforeignobject"),c.env.test("svgforeignobject")||this.listenTo(this.model,"change:content change:size",(function(t){this.updateContent(t)}))},update:function(t,e){if(c.env.test("svgforeignobject"))c.dia.ElementView.prototype.update.call(this,i,e);else{var i=this.model,n=r.omit(e||i.get("attrs"),".content");c.dia.ElementView.prototype.update.call(this,i,n),e&&!r.has(e,".content")||this.updateContent(i,e)}},updateContent:function(t,e){var i=r.merge({},(e||t.get("attrs"))[".content"]);i=r.omit(i,"text");var n=c.util.breakText(t.get("content"),t.get("size"),i,{svgDocument:this.paper.svg}),s=c.util.setByPath({},".content",i,"/");s[".content"].text=n,c.dia.ElementView.prototype.update.call(this,t,s)}}),c.routers.manhattan=function(t,e,i){"use strict";var n={step:10,perpendicular:!0,excludeEnds:[],excludeTypes:["basic.Text"],maximumLoops:2e3,startDirections:["left","right","top","bottom"],endDirections:["left","right","top","bottom"],directionMap:{right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0},top:{x:0,y:-1}},maxAllowedDirectionChange:90,paddingBox:function(){var t=this.step;return{x:-t,y:-t,width:2*t,height:2*t}},directions:function(){var t=this.step;return[{offsetX:t,offsetY:0,cost:t},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:0,cost:t},{offsetX:0,offsetY:-t,cost:t}]},penalties:function(){return{0:0,45:this.step/2,90:this.step/2}},fallbackRoute:e.constant(null),draggingRoute:null};function r(t){this.map={},this.options=t,this.mapGridSize=100}function s(){this.items=[],this.hash={},this.values={},this.OPEN=1,this.CLOSE=2}function a(e){return t.point(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function o(e,i,n,r){for(var s,o=[],l=a(r.difference(i)),g=i;s=e[g];){var c=a(g.difference(s));c.equals(l)||(o.unshift(g),l=c),g=s}return a(t.point(g).difference(n)).equals(l)||o.unshift(g),o}function l(t,i,n){var r=n.step,s=t.center();return e.chain(n.directionMap).pick(i).map((function(e){var i=e.x*t.width/2,n=e.y*t.height/2,a=s.clone().offset(i,n);return t.containsPoint(a)&&a.offset(e.x*r,e.y*r),a.snapToGrid(r)})).value()}function g(e,i,n){var r=360/n;return Math.floor(t.normalizeAngle(e.theta(i)+r/2)/r)*r}function c(t,e){var i=Math.abs(t-e);return i>180?360-i:i}function h(t,e){for(var i=1/0,n=0,r=e.length;n<r;n++){var s=t.manhattanDistance(e[n]);s<i&&(i=s)}return i}function d(i,n,r,a){var d,I,u,p,C=a.step;if(i instanceof t.rect?(d=l(i,a.startDirections,a),u=i.center().snapToGrid(C)):d=[u=i.clone().snapToGrid(C)],n instanceof t.rect?(I=l(n,a.endDirections,a),p=n.center().snapToGrid(C)):(p=n.clone().snapToGrid(C),I=[p]),d=e.filter(d,r.isPointAccessible,r),I=e.filter(I,r.isPointAccessible,r),d.length>0&&I.length>0){var A,m,f=new s,y={},w={};e.each(d,(function(t){var e=t.toString();f.add(e,h(t,I)),w[e]=0}));for(var b=a.directions,N=b.length,M=a.maximumLoops,v=e.invoke(I,"toString");!f.isEmpty()&&M>0;){var x=f.pop(),z=t.point(x),D=w[x],Z=j,j=y[x]?g(y[x],z,N):null!=a.previousDirAngle?a.previousDirAngle:g(u,z,N);if(v.indexOf(x)>=0&&(m=c(j,g(z,p,N)),z.equals(p)||m<180))return a.previousDirAngle=j,o(y,z,u,p);for(var G=0;G<N;G++)if(m=c(j,(A=b[G]).angle),!(Z&&m>a.maxAllowedDirectionChange)){var k=z.clone().offset(A.offsetX,A.offsetY),B=k.toString();if(!f.isClose(B)&&r.isPointAccessible(k)){var T=D+A.cost+a.penalties[m];(!f.isOpen(B)||T<w[B])&&(y[B]=z,w[B]=T,f.add(B,T+h(k,I)))}}M--}}return a.fallbackRoute(u,p,a)}function I(n,s){(function(i){i.directions=e.result(i,"directions"),i.penalties=e.result(i,"penalties"),i.paddingBox=e.result(i,"paddingBox"),e.each(i.directions,(function(e){var i=t.point(0,0),n=t.point(e.offsetX,e.offsetY);e.angle=t.normalizeAngle(i.theta(n))}))})(s),this.options.perpendicular=!!s.perpendicular;for(var a=t.rect(this.sourceBBox).moveAndExpand(s.paddingBox),o=t.rect(this.targetBBox).moveAndExpand(s.paddingBox),l=new r(s).build(this.paper.model,this.model),g=e.map(n,t.point),c=[],h=a.center().snapToGrid(s.step),I=0,u=g.length;I<=u;I++){var p=null,C=A||a,A=g[I];if(!A&&(A=o,(!this.model.get("source").id||!this.model.get("target").id)&&e.isFunction(s.draggingRoute))){var m=C instanceof t.rect?C.center():C;p=s.draggingRoute(m,A.origin(),s)}if(null===(p=p||d(C,A,l,s))){if(!e.isFunction(i.routers.orthogonal))throw new Error("Manhattan requires the orthogonal router.");return i.routers.orthogonal(n,s,this)}var f=e.first(p);f&&f.equals(h)&&p.shift(),h=e.last(p)||h,Array.prototype.push.apply(c,p)}return c}return r.prototype.build=function(t,i){var n=this.options,r=e.chain(n.excludeEnds).map(i.get,i).pluck("id").map(t.getCell,t).value(),s=[],a=t.getCell(i.get("source").id);a&&(s=e.union(s,e.map(a.getAncestors(),"id")));var o=t.getCell(i.get("target").id);o&&(s=e.union(s,e.map(o.getAncestors(),"id")));var l=this.mapGridSize;return e.chain(t.getElements()).difference(r).reject((function(t){return e.contains(n.excludeTypes,t.get("type"))||e.contains(s,t.id)})).invoke("getBBox").invoke("moveAndExpand",n.paddingBox).foldl((function(t,e){for(var i=e.origin().snapToGrid(l),n=e.corner().snapToGrid(l),r=i.x;r<=n.x;r+=l)for(var s=i.y;s<=n.y;s+=l){var a=r+"@"+s;t[a]=t[a]||[],t[a].push(e)}return t}),this.map).value(),this},r.prototype.isPointAccessible=function(t){var i=t.clone().snapToGrid(this.mapGridSize).toString();return e.every(this.map[i],(function(e){return!e.containsPoint(t)}))},s.prototype.add=function(t,i){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=this.OPEN,this.values[t]=i;var n=e.sortedIndex(this.items,t,(function(t){return this.values[t]}),this);this.items.splice(n,0,t)},s.prototype.remove=function(t){this.hash[t]=this.CLOSE},s.prototype.isOpen=function(t){return this.hash[t]===this.OPEN},s.prototype.isClose=function(t){return this.hash[t]===this.CLOSE},s.prototype.isEmpty=function(){return 0===this.items.length},s.prototype.pop=function(){var t=this.items.shift();return this.remove(t),t},function(t,i,r){return I.call(r,t,e.extend({},n,i))}}(o,r,c),c.routers.metro=function(){if(!r.isFunction(c.routers.manhattan))throw new Error("Metro requires the manhattan router.");var t={diagonalCost:null,directions:function(){var t=this.step,e=this.diagonalCost||Math.ceil(Math.sqrt(t*t<<1));return[{offsetX:t,offsetY:0,cost:t},{offsetX:t,offsetY:t,cost:e},{offsetX:0,offsetY:t,cost:t},{offsetX:-t,offsetY:t,cost:e},{offsetX:-t,offsetY:0,cost:t},{offsetX:-t,offsetY:-t,cost:e},{offsetX:0,offsetY:-t,cost:t},{offsetX:t,offsetY:-t,cost:e}]},maxAllowedDirectionChange:45,fallbackRoute:function(t,e,i){var n=t.theta(e),r={x:e.x,y:t.y},s={x:t.x,y:e.y};if(n%180>90){var a=r;r=s,s=a}var l=n%90<45?r:s,g=o.line(t,l),c=90*Math.ceil(n/90),h=o.point.fromPolar(g.squaredLength(),o.toRad(c+135),l),d=o.line(e,h),I=g.intersection(d);return I?[I.round(),e]:[e]}};return function(e,i,n){return c.routers.manhattan(e,r.extend({},t,i),n)}}(),c.routers.normal=function(t,e,i){return t},c.routers.oneSide=function(t,e,i){var n,r,s,a=e.side||"bottom",o=e.padding||40,l=i.sourceBBox,g=i.targetBBox,c=l.center(),h=g.center();switch(a){case"bottom":s=1,n="y",r="height";break;case"top":s=-1,n="y",r="height";break;case"left":s=-1,n="x",r="width";break;case"right":s=1,n="x",r="width";break;default:throw new Error("Router: invalid side")}return c[n]+=s*(l[r]/2+o),h[n]+=s*(g[r]/2+o),s*(c[n]-h[n])>0?h[n]=c[n]:c[n]=h[n],[c].concat(t,h)},c.routers.orthogonal=function(){var t={N:"S",S:"N",E:"W",W:"E"},e={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function i(t,e){return t.x==e.x?t.y>e.y?"N":"S":t.y==e.y?t.x>e.x?"W":"E":null}function n(t,e){return t["W"==e||"E"==e?"width":"height"]}function s(t,e){return o.rect(t).moveAndExpand({x:-e,y:-e,width:2*e,height:2*e})}function a(t){return o.rect(t.x,t.y,0,0)}function l(t,e,i){var n=o.point(t.x,e.y);return i.containsPoint(n)&&(n=o.point(e.x,t.y)),n}function g(e,n,r){var s=o.point(e.x,n.y),a=o.point(n.x,e.y),l=i(e,s),g=i(e,a),c=t[r],h=l==r||l!=c&&(g==c||g!=r)?s:a;return{points:[h],direction:i(h,n)}}function c(t,e,n){var r=l(t,e,n);return{points:[r],direction:i(r,e)}}function h(t,e,s,a){var g,c={},h=[o.point(t.x,e.y),o.point(e.x,t.y)],d=r.filter(h,(function(t){return!s.containsPoint(t)})),I=r.filter(d,(function(e){return i(e,t)!=a}));if(I.length>0)g=(g=r.filter(I,(function(e){return i(t,e)==a})).pop())||I[0],c.points=[g],c.direction=i(g,e);else{g=r.difference(h,d)[0];var u=o.point(e).move(g,-n(s,a)/2),p=l(u,t,s);c.points=[p,u],c.direction=i(u,e)}return c}function d(t,e,r,s){var a=c(e,t,s),l=a.points[0];if(r.containsPoint(l)){var h=(a=c(t,e,r)).points[0];if(s.containsPoint(h)){var d=o.point(t).move(h,-n(r,i(t,h))/2),I=o.point(e).move(l,-n(s,i(e,l))/2),u=o.line(d,I).midpoint(),p=c(t,u,r),C=g(u,e,p.direction);a.points=[p.points[0],C.points[0]],a.direction=C.direction}}return a}function I(t,n,r,a,g){var c,h,d,I,u,p,C,A,m,f={},y=s((I=r,u=a,p=Math.min(I.x,u.x),C=Math.min(I.y,u.y),A=Math.max(I.x+I.width,u.x+u.width),m=Math.max(I.y+I.height,u.y+u.height),o.rect(p,C,A-p,m-C)),1),w=y.center().distance(n)>y.center().distance(t),b=w?n:t,N=w?t:n;return g?(c=o.point.fromPolar(y.width+y.height,e[g],b),c=y.pointNearestToPoint(c).move(c,-1)):c=y.pointNearestToPoint(b).move(b,1),h=l(c,N,y),c.round().equals(h.round())?(h=o.point.fromPolar(y.width+y.height,o.toRad(c.theta(b))+Math.PI/2,N),d=l(c,h=y.pointNearestToPoint(h).move(N,1).round(),y),f.points=w?[h,d,c]:[c,d,h]):f.points=w?[h,c]:[c,h],f.direction=i(w?c:h,n),f}return function(t,e,n){var l,u=e.elementPadding||20,p=[],C=s(n.sourceBBox,u),A=s(n.targetBBox,u);(t=r.map(t,o.point)).unshift(C.center()),t.push(A.center());for(var m=0,f=t.length-1;m<f;m++){var y=null,w=t[m],b=t[m+1],N=!!i(w,b);if(0==m)m+1==f?C.intersect(s(A,1))?y=I(w,b,C,A):N||(y=d(w,b,C,A)):C.containsPoint(b)?y=I(w,b,C,s(a(b),u)):N||(y=c(w,b,C));else if(m+1==f){var M=N&&i(b,w)==l;A.containsPoint(w)||M?y=I(w,b,s(a(w),u),A,l):N||(y=h(w,b,A,l))}else N||(y=g(w,b,l));y?(Array.prototype.push.apply(p,y.points),l=y.direction):l=i(w,b),m+1<f&&p.push(b)}return p}}(),c.connectors.normal=function(t,e,i){var n=["M",t.x,t.y];return r.each(i,(function(t){n.push(t.x,t.y)})),n.push(e.x,e.y),n.join(" ")},c.connectors.rounded=function(t,e,i,n){var s,a,l,g,c,h,d=(n=n||{}).radius||10,I=["M",t.x,t.y];return r.each(i,(function(n,r){c=i[r-1]||t,h=i[r+1]||e,l=g||o.point(n).distance(c)/2,g=o.point(n).distance(h)/2,s=o.point(n).move(c,-Math.min(d,l)).round(),a=o.point(n).move(h,-Math.min(d,g)).round(),I.push(s.x,s.y,"S",n.x,n.y,a.x,a.y,"L")})),I.push(e.x,e.y),I.join(" ")},c.connectors.smooth=function(t,e,i){var n;if(i.length)n=o.bezier.curveThroughPoints([t].concat(i).concat([e]));else{var r=(t.x+e.x)/2;n=["M",t.x,t.y,"C",r,t.y,r,e.y,e.x,e.y]}return n.join(" ")},c.connectors.jumpover=function(t,e){var i=["arc","gap","cubic"],n=["smooth"];function r(t,i,n){var r=[].concat(t,n,i);return r.reduce((function(t,i,n){var s=r[n+1];return null!=s&&(t[n]=e.line(i,s)),t}),[])}function s(){for(var t=this._jumpOverUpdateList,e=0;e<t.length;e++)t[e].update()}function a(t,i){return e.line(t,i).squaredLength()}function o(i,n,r){var s=["M",i[0].start.x,i[0].start.y],a=t(i).map((function(t){if(t.isJump){var i;if("arc"===r){i=t.start.difference(t.end);var s=Number(i.x<0&&i.y<0);return["A",n,n,0,0,s,t.end.x,t.end.y]}if("gap"===r)return["M",t.end.x,t.end.y];if("cubic"===r){i=t.start.difference(t.end);var a=t.start.theta(t.end),o=.6*n,l=1.35*n;i.x<0&&i.y<0&&(l*=-1);var g=e.point(t.start.x+o,t.start.y+l).rotate(t.start,a),c=e.point(t.end.x-o,t.end.y+l).rotate(t.end,a);return["C",g.x,g.y,c.x,c.y,t.end.x,t.end.y]}}return["L",t.end.x,t.end.y]})).flatten().value();return[].concat(s,a).join(" ")}return function(l,g,c,h){var d,I;null==(I=(d=this).paper._jumpOverUpdateList)&&(I=d.paper._jumpOverUpdateList=[],d.paper.on("cell:pointerup",s),d.paper.model.on("reset",(function(){I=[]}))),I.indexOf(d)<0&&(I.push(d),d.listenToOnce(d.model,"change:connector remove",(function(){I.splice(I.indexOf(d),1)})));var u=h.size||5,p=h.jump&&(""+h.jump).toLowerCase(),C=h.ignoreConnectors||n;-1===i.indexOf(p)&&(p=i[0]);var A=this.paper,m=A.model.getLinks();if(1===m.length)return o(r(l,g,c),u,p);var f=this.model,y=m.indexOf(f),w=A.options.defaultConnector||{},b=m.filter((function(e,i){var n=e.get("connector")||w;return!(t.contains(C,n.name)||i>y&&"jumpover"===n.name)})),N=b.map((function(t){return A.findViewByModel(t)})),M=r(l,g,c),v=N.map((function(t){return null==t?[]:t===this?M:r(t.sourcePoint,t.targetPoint,t.route)}),this);return o(M.reduce((function(i,n){var r=t(b).map((function(e,i){return e===f?null:(r=n,s=v[i],t(s).map((function(t){return r.intersection(t)})).compact().value());var r,s})).flatten().compact().sortBy(t.partial(a,n.start)).value();return r.length>0?i.push.apply(i,function(t,i,n){return i.reduce((function(r,s,a){if(!0===s.skip)return r;var o=r.pop()||t,l=e.point(s).move(o.start,-n),g=e.point(s).move(o.start,+n),c=i[a+1];if(null!=c){var h=g.distance(c);h<=n&&(g=c.move(o.start,h),c.skip=!0)}else if(l.distance(o.end)<2*n+1)return r.push(o),r;if(g.distance(o.start)<2*n+1)return r.push(o),r;var d=e.line(l,g);return d.isJump=!0,r.push(e.line(o.start,l),d,e.line(g,o.end)),r}),[])}(n,r,u)):i.push(n),i}),[]),u,p)}}(r,o),function(t,e,i){function n(e,i,n){var r=e.toJSON();return r.angle=i||0,t.defaults({},n,r)}function r(i,r,s){return t.map(i,(function(t,e,i){var r=this.pointAt((e+.5)/i.length);return(t.dx||t.dy)&&r.offset(t.dx||0,t.dy||0),n(r.round(),0,t)}),e.line(r,s))}function s(i,r,s,a){var o=r.center(),l=r.width/r.height,g=r.topMiddle(),c=e.Ellipse.fromRect(r);return t.map(i,(function(t,e,i){var r=s+a(e,i.length),h=g.clone().rotate(o,-r).scale(l,1,o),d=t.compensateRotation?-c.tangentTheta(h):0;return(t.dx||t.dy)&&h.offset(t.dx||0,t.dy||0),t.dr&&h.move(o,t.dr),n(h.round(),d,t)}))}function a(i,n){var r=n.x;t.isString(r)&&(r=parseFloat(r)/100*i.width);var s=n.y;return t.isString(s)&&(s=parseFloat(s)/100*i.height),e.point(r||0,s||0)}i.layout.Port={absolute:function(e,i,n){return t.map(e,t.partial(a,i))},fn:function(t,e,i){return i.fn(t,e,i)},line:function(t,e,i){return r(t,a(e,i.start||e.origin()),a(e,i.end||e.corner()))},left:function(t,e,i){return r(t,e.origin(),e.bottomLeft())},right:function(t,e,i){return r(t,e.topRight(),e.corner())},top:function(t,e,i){return r(t,e.origin(),e.topRight())},bottom:function(t,e,i){return r(t,e.bottomLeft(),e.corner())},ellipseSpread:function(t,e,i){var n=i.startAngle||0,r=i.step||360/t.length;return s(t,e,n,(function(t){return t*r}))},ellipse:function(t,e,i){var n=i.startAngle||0,r=i.step||20;return s(t,e,n,(function(t,e){return(t+.5-e/2)*r}))}}}(r,o,c),function(t,e,i){function n(e,i){return t.defaultsDeep({},e,i,{x:0,y:0,angle:0,attrs:{".":{y:"0","text-anchor":"start"}}})}function r(e,i,r,a){a=t.defaults({},a,{offset:15});var o,l,g,c,h=i.center().theta(e),d=s(i),I=a.offset,u=0;h<d[1]||h>d[2]?(g=".3em",o=I,l=0,c="start"):h<d[0]?(g="0",o=0,l=-I,r?(u=-90,c="start"):c="middle"):h<d[3]?(g=".3em",o=-I,l=0,c="end"):(g=".6em",o=0,l=I,r?(u=90,c="start"):c="middle");var p=Math.round;return n({x:p(o),y:p(l),angle:u,attrs:{".":{y:g,"text-anchor":c}}})}function s(t){var e=t.center(),i=e.theta(t.origin()),n=e.theta(t.bottomLeft()),r=e.theta(t.corner());return[i,e.theta(t.topRight()),r,n]}function a(e,i,r,a){var o,l,g,c,h=i.center().theta(e),d=(a=t.defaults({},a,{offset:15})).offset,I=0,u=s(i);h<u[1]||h>u[2]?(g=".3em",o=-d,l=0,c="end"):h<u[0]?(g=".6em",o=0,l=d,r?(I=90,c="start"):c="middle"):h<u[3]?(g=".3em",o=d,l=0,c="start"):(g="0em",o=0,l=-d,r?(I=-90,c="start"):c="middle");var p=Math.round;return n({x:p(o),y:p(l),angle:I,attrs:{".":{y:g,"text-anchor":c}}})}function o(i,r,s){s=t.defaults({},s,{offset:20});var a,o=e.point(0,0),l=-i.theta(o),g=l,c=i.clone().move(o,s.offset).difference(i).round(),h=".3em";(l+90)%180==0?(a=r?"end":"middle",r||-270!==l||(h="0em")):l>-270&&l<-90?(a="start",g=l-180):a="end";var d=Math.round;return n({x:d(c.x),y:d(c.y),angle:r?g:0,attrs:{".":{y:h,"text-anchor":a}}})}i.layout.PortLabel={manual:t.rearg(n,2),left:function(t,e,i){return n(i,{x:-15,attrs:{".":{y:".3em","text-anchor":"end"}}})},right:function(t,e,i){return n(i,{x:15,attrs:{".":{y:".3em","text-anchor":"start"}}})},top:function(t,e,i){return n(i,{y:-15,attrs:{".":{"text-anchor":"middle"}}})},bottom:function(t,e,i){return n(i,{y:15,attrs:{".":{y:".6em","text-anchor":"middle"}}})},outsideOriented:function(t,e,i){return r(t,e,!0,i)},outside:function(t,e,i){return r(t,e,!1,i)},insideOriented:function(t,e,i){return a(t,e,!0,i)},inside:function(t,e,i){return a(t,e,!1,i)},radial:function(t,e,i){return o(t.difference(e.center()),!1,i)},radialOriented:function(t,e,i){return o(t.difference(e.center()),!0,i)}}}(r,o,c),c.highlighters.addClass={className:c.util.addClassNamePrefix("highlighted"),highlight:function(t,e,i){var n=(i||{}).className||this.className;a(e).addClass(n)},unhighlight:function(t,e,i){var n=(i||{}).className||this.className;a(e).removeClass(n)}},c.highlighters.opacity={highlight:function(t,e){a(e).addClass(c.util.addClassNamePrefix("highlight-opacity"))},unhighlight:function(t,e){a(e).removeClass(c.util.addClassNamePrefix("highlight-opacity"))}},c.highlighters.stroke={defaultOptions:{padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},_views:{},highlight:function(t,e,i){if(!this._views[e.id]){var n=r.defaults(i||{},this.defaultOptions),s=a(e),o=s.bbox(!0);try{var l=s.convertToPathData()}catch(t){l=a.rectToPath(r.extend({},n,o))}var g=a("path").attr({d:l,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"}).attr(n.attrs);g.transform(t.el.getCTM().inverse()),g.transform(e.getCTM());var h=n.padding;if(h){var d=o.x+o.width/2,I=o.y+o.height/2,u=(o.width+h)/o.width,p=(o.height+h)/o.height;g.transform({a:u,b:0,c:0,d:p,e:d-u*d,f:I-p*I})}var C=this._views[e.id]=new c.mvc.View({className:"highlight-stroke",el:g.node,$el:g});C.listenTo(t.model,"remove",C.remove),t.vel.append(g)}},unhighlight:function(t,e,i){this._views[e.id]&&(this._views[e.id].remove(),this._views[e.id]=null)}},c.shapes.erd={},c.shapes.erd.Entity=c.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:r.defaultsDeep({type:"erd.Entity",size:{width:150,height:60},attrs:{".outer":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"100,0 100,60 0,60 0,0"},".inner":{fill:"#2ECC71",stroke:"#27AE60","stroke-width":2,points:"95,5 95,55 5,55 5,5",display:"none"},text:{text:"Entity","font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},c.dia.Element.prototype.defaults)}),c.shapes.erd.WeakEntity=c.shapes.erd.Entity.extend({defaults:r.defaultsDeep({type:"erd.WeakEntity",attrs:{".inner":{display:"auto"},text:{text:"Weak Entity"}}},c.shapes.erd.Entity.prototype.defaults)}),c.shapes.erd.Relationship=c.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon class="outer"/><polygon class="inner"/></g><text/></g>',defaults:r.defaultsDeep({type:"erd.Relationship",size:{width:80,height:80},attrs:{".outer":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,0 80,40 40,80 0,40"},".inner":{fill:"#3498DB",stroke:"#2980B9","stroke-width":2,points:"40,5 75,40 40,75 5,40",display:"none"},text:{text:"Relationship","font-family":"Arial","font-size":12,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},c.dia.Element.prototype.defaults)}),c.shapes.erd.IdentifyingRelationship=c.shapes.erd.Relationship.extend({defaults:r.defaultsDeep({type:"erd.IdentifyingRelationship",attrs:{".inner":{display:"auto"},text:{text:"Identifying"}}},c.shapes.erd.Relationship.prototype.defaults)}),c.shapes.erd.Attribute=c.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><ellipse class="outer"/><ellipse class="inner"/></g><text/></g>',defaults:r.defaultsDeep({type:"erd.Attribute",size:{width:100,height:50},attrs:{ellipse:{transform:"translate(50, 25)"},".outer":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:50,ry:25,fill:"#E67E22"},".inner":{stroke:"#D35400","stroke-width":2,cx:0,cy:0,rx:45,ry:20,fill:"#E67E22",display:"none"},text:{"font-family":"Arial","font-size":14,"ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle"}}},c.dia.Element.prototype.defaults)}),c.shapes.erd.Multivalued=c.shapes.erd.Attribute.extend({defaults:r.defaultsDeep({type:"erd.Multivalued",attrs:{".inner":{display:"block"},text:{text:"multivalued"}}},c.shapes.erd.Attribute.prototype.defaults)}),c.shapes.erd.Derived=c.shapes.erd.Attribute.extend({defaults:r.defaultsDeep({type:"erd.Derived",attrs:{".outer":{"stroke-dasharray":"3,5"},text:{text:"derived"}}},c.shapes.erd.Attribute.prototype.defaults)}),c.shapes.erd.Key=c.shapes.erd.Attribute.extend({defaults:r.defaultsDeep({type:"erd.Key",attrs:{ellipse:{"stroke-width":4},text:{text:"key","font-weight":"800","text-decoration":"underline"}}},c.shapes.erd.Attribute.prototype.defaults)}),c.shapes.erd.Normal=c.shapes.erd.Attribute.extend({defaults:r.defaultsDeep({type:"erd.Normal",attrs:{text:{text:"Normal"}}},c.shapes.erd.Attribute.prototype.defaults)}),c.shapes.erd.ISA=c.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><polygon/></g><text/></g>',defaults:r.defaultsDeep({type:"erd.ISA",size:{width:100,height:50},attrs:{polygon:{points:"0,0 50,50 100,0",fill:"#F1C40F",stroke:"#F39C12","stroke-width":2},text:{text:"ISA","font-size":18,"ref-x":.5,"ref-y":.3,"y-alignment":"middle","text-anchor":"middle"}}},c.dia.Element.prototype.defaults)}),c.shapes.erd.Line=c.dia.Link.extend({defaults:{type:"erd.Line"},cardinality:function(t){this.set("labels",[{position:-20,attrs:{text:{dy:-8,text:t}}}])}}),c.shapes.fsa={},c.shapes.fsa.State=c.shapes.basic.Circle.extend({defaults:r.defaultsDeep({type:"fsa.State",attrs:{circle:{"stroke-width":3},text:{"font-weight":"800"}}},c.shapes.basic.Circle.prototype.defaults)}),c.shapes.fsa.StartState=c.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle/></g></g>',defaults:r.defaultsDeep({type:"fsa.StartState",size:{width:20,height:20},attrs:{circle:{transform:"translate(10, 10)",r:10,fill:"#000000"}}},c.dia.Element.prototype.defaults)}),c.shapes.fsa.EndState=c.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:r.defaultsDeep({type:"fsa.EndState",size:{width:20,height:20},attrs:{".outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#000000"},".inner":{transform:"translate(10, 10)",r:6,fill:"#000000"}}},c.dia.Element.prototype.defaults)}),c.shapes.fsa.Arrow=c.dia.Link.extend({defaults:r.defaultsDeep({type:"fsa.Arrow",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}},smooth:!0},c.dia.Link.prototype.defaults)}),c.shapes.org={},c.shapes.org.Member=c.dia.Element.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="card"/><image/></g><text class="rank"/><text class="name"/></g>',defaults:r.defaultsDeep({type:"org.Member",size:{width:180,height:70},attrs:{rect:{width:170,height:60},".card":{fill:"#FFFFFF",stroke:"#000000","stroke-width":2,"pointer-events":"visiblePainted",rx:10,ry:10},image:{width:48,height:48,ref:".card","ref-x":10,"ref-y":5},".rank":{"text-decoration":"underline",ref:".card","ref-x":.9,"ref-y":.2,"font-family":"Courier New","font-size":14,"text-anchor":"end"},".name":{"font-weight":"800",ref:".card","ref-x":.9,"ref-y":.6,"font-family":"Courier New","font-size":14,"text-anchor":"end"}}},c.dia.Element.prototype.defaults)}),c.shapes.org.Arrow=c.dia.Link.extend({defaults:{type:"org.Arrow",source:{selector:".card"},target:{selector:".card"},attrs:{".connection":{stroke:"#585858","stroke-width":3}},z:-1}}),c.shapes.chess={},c.shapes.chess.KingWhite=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;"><path      d="M 22.5,11.63 L 22.5,6"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 20,8 L 25,8"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path      d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"      style="fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 11.5,30 C 17,27 27,27 32.5,30"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5"      style="fill:none; stroke:#000000;" />    <path      d="M 11.5,37 C 17,34 27,34 32.5,37"      style="fill:none; stroke:#000000;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.KingWhite",size:{width:42,height:38}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.KingBlack=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path       d="M 22.5,11.63 L 22.5,6"       style="fill:none; stroke:#000000; stroke-linejoin:miter;"       id="path6570" />    <path       d="M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25"       style="fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;" />    <path       d="M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z "       style="fill:#000000; stroke:#000000;" />    <path       d="M 20,8 L 25,8"       style="fill:none; stroke:#000000; stroke-linejoin:miter;" />    <path       d="M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.KingBlack",size:{width:42,height:38}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.QueenWhite=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(-1,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(15.5,-5.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(32,-1)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(7,-4.5)" />    <path      d="M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z"      transform="translate(24,-4)" />    <path      d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z "      style="stroke-linecap:butt;" />    <path      d="M 11.5,30 C 15,29 30,29 33.5,30"      style="fill:none;" />    <path      d="M 12,33.5 C 18,32.5 27,32.5 33,33.5"      style="fill:none;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.QueenWhite",size:{width:42,height:38}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.QueenBlack=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:none;">      <circle cx="6"    cy="12" r="2.75" />      <circle cx="14"   cy="9"  r="2.75" />      <circle cx="22.5" cy="8"  r="2.75" />      <circle cx="31"   cy="9"  r="2.75" />      <circle cx="39"   cy="12" r="2.75" />    </g>    <path       d="M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"       style="stroke-linecap:butt; stroke:#000000;" />    <path       d="M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"       style="stroke-linecap:butt;" />    <path       d="M 11,38.5 A 35,35 1 0 0 34,38.5"       style="fill:none; stroke:#000000; stroke-linecap:butt;" />    <path       d="M 11,29 A 35,35 1 0 1 34,29"       style="fill:none; stroke:#ffffff;" />    <path       d="M 12.5,31.5 L 32.5,31.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"       style="fill:none; stroke:#ffffff;" />    <path       d="M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"       style="fill:none; stroke:#ffffff;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.QueenBlack",size:{width:42,height:38}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.RookWhite=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14"      style="stroke-linecap:butt;" />    <path      d="M 34,14 L 31,17 L 14,17 L 11,14" />    <path      d="M 31,17 L 31,29.5 L 14,29.5 L 14,17"      style="stroke-linecap:butt; stroke-linejoin:miter;" />    <path      d="M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.RookWhite",size:{width:32,height:34}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.RookBlack=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z "      style="stroke-linecap:butt;" />    <path      d="M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z "      style="stroke-linecap:butt;" />    <path      d="M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z "      style="stroke-linecap:butt;" />    <path      d="M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z "      style="stroke-linecap:butt;stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z "      style="stroke-linecap:butt;" />    <path      d="M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z "      style="stroke-linecap:butt;" />    <path      d="M 12,35.5 L 33,35.5 L 33,35.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 13,31.5 L 32,31.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,29.5 L 31,29.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 14,16.5 L 31,16.5"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />    <path      d="M 11,14 L 34,14"      style="fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.RookBlack",size:{width:32,height:34}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.BishopWhite=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#ffffff; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path      d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"      style="fill:none; stroke:#000000; stroke-linejoin:miter;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.BishopWhite",size:{width:38,height:38}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.BishopBlack=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <g style="fill:#000000; stroke:#000000; stroke-linecap:butt;">       <path        d="M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z" />      <path        d="M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z" />      <path        d="M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z" />    </g>    <path       d="M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18"       style="fill:none; stroke:#ffffff; stroke-linejoin:miter;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.BishopBlack",size:{width:38,height:38}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.KnightWhite=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#ffffff; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#000000; stroke:#000000;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#000000; stroke:#000000;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.KnightWhite",size:{width:38,height:37}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.KnightBlack=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><g style="opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;">    <path      d="M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18"      style="fill:#000000; stroke:#000000;" />    <path      d="M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"      style="fill:#000000; stroke:#000000;" />    <path      d="M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z"      transform="matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)"      style="fill:#ffffff; stroke:#ffffff;" />    <path      d="M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z "      style="fill:#ffffff; stroke:none;" />  </g></g></g>',defaults:r.defaultsDeep({type:"chess.KnightBlack",size:{width:38,height:37}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.PawnWhite=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:r.defaultsDeep({type:"chess.PawnWhite",size:{width:28,height:33}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.chess.PawnBlack=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><path d="M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z "  style="opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;" /></g></g>',defaults:r.defaultsDeep({type:"chess.PawnBlack",size:{width:28,height:33}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.pn={},c.shapes.pn.Place=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="root"/><g class="tokens" /></g><text class="label"/></g>',defaults:r.defaultsDeep({type:"pn.Place",size:{width:50,height:50},attrs:{".root":{r:25,fill:"#ffffff",stroke:"#000000",transform:"translate(25, 25)"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:".root",fill:"#000000","font-size":12},".tokens > circle":{fill:"#000000",r:5},".tokens.one > circle":{transform:"translate(25, 25)"},".tokens.two > circle:nth-child(1)":{transform:"translate(19, 25)"},".tokens.two > circle:nth-child(2)":{transform:"translate(31, 25)"},".tokens.three > circle:nth-child(1)":{transform:"translate(18, 29)"},".tokens.three > circle:nth-child(2)":{transform:"translate(25, 19)"},".tokens.three > circle:nth-child(3)":{transform:"translate(32, 29)"},".tokens.alot > text":{transform:"translate(25, 18)","text-anchor":"middle",fill:"#000000"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.pn.PlaceView=c.dia.ElementView.extend({initialize:function(){c.dia.ElementView.prototype.initialize.apply(this,arguments),this.model.on("change:tokens",(function(){this.renderTokens(),this.update()}),this)},render:function(){c.dia.ElementView.prototype.render.apply(this,arguments),this.renderTokens(),this.update()},renderTokens:function(){var t=this.$(".tokens").empty();t[0].className.baseVal="tokens";var e=this.model.get("tokens");if(e)switch(e){case 1:t[0].className.baseVal+=" one",t.append(a("<circle/>").node);break;case 2:t[0].className.baseVal+=" two",t.append(a("<circle/>").node,a("<circle/>").node);break;case 3:t[0].className.baseVal+=" three",t.append(a("<circle/>").node,a("<circle/>").node,a("<circle/>").node);break;default:t[0].className.baseVal+=" alot",t.append(a("<text/>").text(e+"").node)}}}),c.shapes.pn.Transition=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="root"/></g></g><text class="label"/>',defaults:r.defaultsDeep({type:"pn.Transition",size:{width:12,height:50},attrs:{rect:{width:12,height:50,fill:"#000000",stroke:"#000000"},".label":{"text-anchor":"middle","ref-x":.5,"ref-y":-20,ref:"rect",fill:"#000000","font-size":12}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.pn.Link=c.dia.Link.extend({defaults:r.defaultsDeep({type:"pn.Link",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z"}}},c.dia.Link.prototype.defaults)}),c.shapes.devs={},c.shapes.devs.Model=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><rect class="body"/><text class="label"/></g>',portMarkup:'<circle class="port-body"/>',portLabelMarkup:'<text class="port-label"/>',defaults:r.defaultsDeep({type:"devs.Model",inPorts:[],outPorts:[],size:{width:80,height:80},attrs:{".":{magnet:!1},".label":{text:"Model","ref-x":.5,"ref-y":10,"font-size":18,"text-anchor":"middle",fill:"#000"},".body":{"ref-width":"100%","ref-height":"100%",stroke:"#000"}},ports:{groups:{in:{position:{name:"left"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"left",args:{y:10}}}},out:{position:{name:"right"},attrs:{".port-label":{fill:"#000"},".port-body":{fill:"#fff",stroke:"#000",r:10,magnet:!0}},label:{position:{name:"right",args:{y:10}}}}}}},c.shapes.basic.Generic.prototype.defaults),initialize:function(){c.shapes.basic.Generic.prototype.initialize.apply(this,arguments),this.on("change:inPorts change:outPorts",this.updatePortItems,this),this.updatePortItems()},updatePortItems:function(t,e,i){var n=r.uniq(this.get("inPorts")),s=r.difference(r.uniq(this.get("outPorts")),n),a=this.createPortItems("in",n),o=this.createPortItems("out",s);this.prop("ports/items",a.concat(o),r.extend({rewrite:!0},i))},createPortItem:function(t,e){return{id:e,group:t,attrs:{".port-label":{text:e}}}},createPortItems:function(t,e){return r.map(e,r.bind(this.createPortItem,this,t))},_addGroupPort:function(t,e,i){var n=this.get(e);return this.set(e,r.isArray(n)?n.concat(t):[t],i)},addOutPort:function(t,e){return this._addGroupPort(t,"outPorts",e)},addInPort:function(t,e){return this._addGroupPort(t,"inPorts",e)},_removeGroupPort:function(t,e,i){return this.set(e,r.without(this.get(e),t),i)},removeOutPort:function(t,e){return this._removeGroupPort(t,"outPorts",e)},removeInPort:function(t,e){return this._removeGroupPort(t,"inPorts",e)},_changeGroup:function(t,e,i){return this.prop("ports/groups/"+t,r.isObject(e)?e:{},i)},changeInGroup:function(t,e){return this._changeGroup("in",t,e)},changeOutGroup:function(t,e){return this._changeGroup("out",t,e)}}),c.shapes.devs.Atomic=c.shapes.devs.Model.extend({defaults:r.defaultsDeep({type:"devs.Atomic",size:{width:80,height:80},attrs:{".label":{text:"Atomic"}}},c.shapes.devs.Model.prototype.defaults)}),c.shapes.devs.Coupled=c.shapes.devs.Model.extend({defaults:r.defaultsDeep({type:"devs.Coupled",size:{width:200,height:300},attrs:{".label":{text:"Coupled"}}},c.shapes.devs.Model.prototype.defaults)}),c.shapes.devs.Link=c.dia.Link.extend({defaults:{type:"devs.Link",attrs:{".connection":{"stroke-width":2}}}}),c.shapes.uml={},c.shapes.uml.Class=c.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-class-name-rect"/><rect class="uml-class-attrs-rect"/><rect class="uml-class-methods-rect"/>',"</g>",'<text class="uml-class-name-text"/><text class="uml-class-attrs-text"/><text class="uml-class-methods-text"/>',"</g>"].join(""),defaults:r.defaultsDeep({type:"uml.Class",attrs:{rect:{width:200},".uml-class-name-rect":{stroke:"black","stroke-width":2,fill:"#3498db"},".uml-class-attrs-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-methods-rect":{stroke:"black","stroke-width":2,fill:"#2980b9"},".uml-class-name-text":{ref:".uml-class-name-rect","ref-y":.5,"ref-x":.5,"text-anchor":"middle","y-alignment":"middle","font-weight":"bold",fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-attrs-text":{ref:".uml-class-attrs-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"},".uml-class-methods-text":{ref:".uml-class-methods-rect","ref-y":5,"ref-x":5,fill:"black","font-size":12,"font-family":"Times New Roman"}},name:[],attributes:[],methods:[]},c.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on("change:name change:attributes change:methods",(function(){this.updateRectangles(),this.trigger("uml-update")}),this),this.updateRectangles(),c.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},getClassName:function(){return this.get("name")},updateRectangles:function(){var t=this.get("attrs"),e=[{type:"name",text:this.getClassName()},{type:"attrs",text:this.get("attributes")},{type:"methods",text:this.get("methods")}],i=0;r.each(e,(function(e){var n=r.isArray(e.text)?e.text:[e.text],s=20*n.length+20;t[".uml-class-"+e.type+"-text"].text=n.join("\n"),t[".uml-class-"+e.type+"-rect"].height=s,t[".uml-class-"+e.type+"-rect"].transform="translate(0,"+i+")",i+=s}))}}),c.shapes.uml.ClassView=c.dia.ElementView.extend({initialize:function(){c.dia.ElementView.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"uml-update",(function(){this.update(),this.resize()}))}}),c.shapes.uml.Abstract=c.shapes.uml.Class.extend({defaults:r.defaultsDeep({type:"uml.Abstract",attrs:{".uml-class-name-rect":{fill:"#e74c3c"},".uml-class-attrs-rect":{fill:"#c0392b"},".uml-class-methods-rect":{fill:"#c0392b"}}},c.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Abstract>>",this.get("name")]}}),c.shapes.uml.AbstractView=c.shapes.uml.ClassView,c.shapes.uml.Interface=c.shapes.uml.Class.extend({defaults:r.defaultsDeep({type:"uml.Interface",attrs:{".uml-class-name-rect":{fill:"#f1c40f"},".uml-class-attrs-rect":{fill:"#f39c12"},".uml-class-methods-rect":{fill:"#f39c12"}}},c.shapes.uml.Class.prototype.defaults),getClassName:function(){return["<<Interface>>",this.get("name")]}}),c.shapes.uml.InterfaceView=c.shapes.uml.ClassView,c.shapes.uml.Generalization=c.dia.Link.extend({defaults:{type:"uml.Generalization",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"}}}}),c.shapes.uml.Implementation=c.dia.Link.extend({defaults:{type:"uml.Implementation",attrs:{".marker-target":{d:"M 20 0 L 0 10 L 20 20 z",fill:"white"},".connection":{"stroke-dasharray":"3,3"}}}}),c.shapes.uml.Aggregation=c.dia.Link.extend({defaults:{type:"uml.Aggregation",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"white"}}}}),c.shapes.uml.Composition=c.dia.Link.extend({defaults:{type:"uml.Composition",attrs:{".marker-target":{d:"M 40 10 L 20 20 L 0 10 L 20 0 z",fill:"black"}}}}),c.shapes.uml.Association=c.dia.Link.extend({defaults:{type:"uml.Association"}}),c.shapes.uml.State=c.shapes.basic.Generic.extend({markup:['<g class="rotatable">','<g class="scalable">','<rect class="uml-state-body"/>',"</g>",'<path class="uml-state-separator"/>','<text class="uml-state-name"/>','<text class="uml-state-events"/>',"</g>"].join(""),defaults:r.defaultsDeep({type:"uml.State",attrs:{".uml-state-body":{width:200,height:200,rx:10,ry:10,fill:"#ecf0f1",stroke:"#bdc3c7","stroke-width":3},".uml-state-separator":{stroke:"#bdc3c7","stroke-width":2},".uml-state-name":{ref:".uml-state-body","ref-x":.5,"ref-y":5,"text-anchor":"middle",fill:"#000000","font-family":"Courier New","font-size":14},".uml-state-events":{ref:".uml-state-separator","ref-x":5,"ref-y":5,fill:"#000000","font-family":"Courier New","font-size":14}},name:"State",events:[]},c.shapes.basic.Generic.prototype.defaults),initialize:function(){this.on({"change:name":this.updateName,"change:events":this.updateEvents,"change:size":this.updatePath},this),this.updateName(),this.updateEvents(),this.updatePath(),c.shapes.basic.Generic.prototype.initialize.apply(this,arguments)},updateName:function(){this.attr(".uml-state-name/text",this.get("name"))},updateEvents:function(){this.attr(".uml-state-events/text",this.get("events").join("\n"))},updatePath:function(){var t="M 0 20 L "+this.get("size").width+" 20";this.attr(".uml-state-separator/d",t,{silent:!0})}}),c.shapes.uml.StartState=c.shapes.basic.Circle.extend({defaults:r.defaultsDeep({type:"uml.StartState",attrs:{circle:{fill:"#34495e",stroke:"#2c3e50","stroke-width":2,rx:1}}},c.shapes.basic.Circle.prototype.defaults)}),c.shapes.uml.EndState=c.shapes.basic.Generic.extend({markup:'<g class="rotatable"><g class="scalable"><circle class="outer"/><circle class="inner"/></g></g>',defaults:r.defaultsDeep({type:"uml.EndState",size:{width:20,height:20},attrs:{"circle.outer":{transform:"translate(10, 10)",r:10,fill:"#ffffff",stroke:"#2c3e50"},"circle.inner":{transform:"translate(10, 10)",r:6,fill:"#34495e"}}},c.shapes.basic.Generic.prototype.defaults)}),c.shapes.uml.Transition=c.dia.Link.extend({defaults:{type:"uml.Transition",attrs:{".marker-target":{d:"M 10 0 L 0 5 L 10 10 z",fill:"#34495e",stroke:"#2c3e50"},".connection":{stroke:"#2c3e50"}}}}),c.shapes.logic={},c.shapes.logic.Gate=c.shapes.basic.Generic.extend({defaults:r.defaultsDeep({type:"logic.Gate",size:{width:80,height:40},attrs:{".":{magnet:!1},".body":{width:100,height:50},circle:{r:7,stroke:"black",fill:"transparent","stroke-width":2}}},c.shapes.basic.Generic.prototype.defaults),operation:function(){return!0}}),c.shapes.logic.IO=c.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><rect class="body"/></g><path class="wire"/><circle/><text/></g>',defaults:r.defaultsDeep({type:"logic.IO",size:{width:60,height:30},attrs:{".body":{fill:"white",stroke:"black","stroke-width":2},".wire":{ref:".body","ref-y":.5,stroke:"black"},text:{fill:"black",ref:".body","ref-x":.5,"ref-y":.5,"y-alignment":"middle","text-anchor":"middle","font-weight":"bold","font-variant":"small-caps","text-transform":"capitalize","font-size":"14px"}}},c.shapes.logic.Gate.prototype.defaults)}),c.shapes.logic.Input=c.shapes.logic.IO.extend({defaults:r.defaultsDeep({type:"logic.Input",attrs:{".wire":{"ref-dx":0,d:"M 0 0 L 23 0"},circle:{ref:".body","ref-dx":30,"ref-y":.5,magnet:!0,class:"output",port:"out"},text:{text:"input"}}},c.shapes.logic.IO.prototype.defaults)}),c.shapes.logic.Output=c.shapes.logic.IO.extend({defaults:r.defaultsDeep({type:"logic.Output",attrs:{".wire":{"ref-x":0,d:"M 0 0 L -23 0"},circle:{ref:".body","ref-x":-30,"ref-y":.5,magnet:"passive",class:"input",port:"in"},text:{text:"output"}}},c.shapes.logic.IO.prototype.defaults)}),c.shapes.logic.Gate11=c.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input"/><circle class="output"/></g>',defaults:r.defaultsDeep({type:"logic.Gate11",attrs:{".input":{ref:".body","ref-x":-2,"ref-y":.5,magnet:"passive",port:"in"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},c.shapes.logic.Gate.prototype.defaults)}),c.shapes.logic.Gate21=c.shapes.logic.Gate.extend({markup:'<g class="rotatable"><g class="scalable"><image class="body"/></g><circle class="input input1"/><circle  class="input input2"/><circle class="output"/></g>',defaults:r.defaultsDeep({type:"logic.Gate21",attrs:{".input1":{ref:".body","ref-x":-2,"ref-y":.3,magnet:"passive",port:"in1"},".input2":{ref:".body","ref-x":-2,"ref-y":.7,magnet:"passive",port:"in2"},".output":{ref:".body","ref-dx":2,"ref-y":.5,magnet:!0,port:"out"}}},c.shapes.logic.Gate.prototype.defaults)}),c.shapes.logic.Repeater=c.shapes.logic.Gate11.extend({defaults:r.defaultsDeep({type:"logic.Repeater",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo="}}},c.shapes.logic.Gate11.prototype.defaults),operation:function(t){return t}}),c.shapes.logic.Not=c.shapes.logic.Gate11.extend({defaults:r.defaultsDeep({type:"logic.Not",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K"}}},c.shapes.logic.Gate11.prototype.defaults),operation:function(t){return!t}}),c.shapes.logic.Or=c.shapes.logic.Gate21.extend({defaults:r.defaultsDeep({type:"logic.Or",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo="}}},c.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t||e}}),c.shapes.logic.And=c.shapes.logic.Gate21.extend({defaults:r.defaultsDeep({type:"logic.And",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},c.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return t&&e}}),c.shapes.logic.Nor=c.shapes.logic.Gate21.extend({defaults:r.defaultsDeep({type:"logic.Nor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},c.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t||e)}}),c.shapes.logic.Nand=c.shapes.logic.Gate21.extend({defaults:r.defaultsDeep({type:"logic.Nand",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},c.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return!(t&&e)}}),c.shapes.logic.Xor=c.shapes.logic.Gate21.extend({defaults:r.defaultsDeep({type:"logic.Xor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"}}},c.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||e)&&(t||!e)}}),c.shapes.logic.Xnor=c.shapes.logic.Gate21.extend({defaults:r.defaultsDeep({type:"logic.Xnor",attrs:{image:{"xlink:href":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg=="}}},c.shapes.logic.Gate21.prototype.defaults),operation:function(t,e){return(!t||!e)&&(t||e)}}),c.shapes.logic.Wire=c.dia.Link.extend({arrowheadMarkup:['<g class="marker-arrowhead-group marker-arrowhead-group-<%= end %>">','<circle class="marker-arrowhead" end="<%= end %>" r="7"/>',"</g>"].join(""),vertexMarkup:['<g class="marker-vertex-group" transform="translate(<%= x %>, <%= y %>)">','<circle class="marker-vertex" idx="<%= idx %>" r="10" />','<g class="marker-vertex-remove-group">','<path class="marker-vertex-remove-area" idx="<%= idx %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>','<path class="marker-vertex-remove" idx="<%= idx %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">',"<title>Remove vertex.</title>","</path>","</g>","</g>"].join(""),defaults:r.defaultsDeep({type:"logic.Wire",attrs:{".connection":{"stroke-width":2},".marker-vertex":{r:7}},router:{name:"orthogonal"},connector:{name:"rounded",args:{radius:10}}},c.dia.Link.prototype.defaults)}),c.layout.DirectedGraph={layout:function(t,e){var i;i=t instanceof c.dia.Graph?t:(new c.dia.Graph).resetCells(t,{dry:!0}),t=null,e=r.defaults(e||{},{resizeClusters:!0,clusterPadding:10});var n=i.toGraphLib({directed:!0,multigraph:!0,compound:!0,setNodeLabel:function(t){return{width:t.get("size").width,height:t.get("size").height,rank:t.get("rank")}},setEdgeLabel:function(t){return{minLen:t.get("minLen")||1}},setEdgeName:function(t){return t.id}}),s={},a=e.marginX||0,l=e.marginY||0;e.rankDir&&(s.rankdir=e.rankDir),e.align&&(s.align=e.align),e.nodeSep&&(s.nodesep=e.nodeSep),e.edgeSep&&(s.edgesep=e.edgeSep),e.rankSep&&(s.ranksep=e.rankSep),a&&(s.marginx=a),l&&(s.marginy=l),n.setGraph(s),dagre.layout(n,{debugTiming:!!e.debugTiming}),i.startBatch("layout"),i.fromGraphLib(n,{importNode:function(t,i){var n=this.getCell(t),r=i.node(t);e.setPosition?e.setPosition(n,r):n.set("position",{x:r.x-r.width/2,y:r.y-r.height/2})},importEdge:function(t,i){var n=this.getCell(t.name),r=i.edge(t).points||[];e.setLinkVertices&&(e.setVertices?e.setVertices(n,r):n.set("vertices",r.slice(1,r.length-1)))}}),e.resizeClusters&&r.chain(n.nodes()).filter((function(t){return n.children(t).length>0})).map(i.getCell,i).sortBy((function(t){return-t.getAncestors().length})).invoke("fitEmbeds",{padding:e.clusterPadding}).value(),i.stopBatch("layout");var g=n.graph();return o.Rect(a,l,Math.abs(g.width-2*a),Math.abs(g.height-2*l))},fromGraphLib:function(t,e){var i=(e=e||{}).importNode||r.noop,n=e.importEdge||r.noop,s=this instanceof c.dia.Graph?this:new c.dia.Graph;return t.nodes().forEach((function(n){i.call(s,n,t,s,e)})),t.edges().forEach((function(i){n.call(s,i,t,s,e)})),s},toGraphLib:function(t,e){e=e||{};var i=r.pick(e,"directed","compound","multigraph"),n=new graphlib.Graph(i),s=e.setNodeLabel||r.noop,a=e.setEdgeLabel||r.noop,o=e.setEdgeName||r.noop;return t.get("cells").each((function(t){if(t.isLink()){var e=t.get("source"),i=t.get("target");if(!e.id||!i.id)return;n.setEdge(e.id,i.id,a(t),o(t))}else n.setNode(t.id,s(t)),n.isCompound()&&t.has("parent")&&n.setParent(t.id,t.get("parent"))})),n}},c.dia.Graph.prototype.toGraphLib=function(t){return c.layout.DirectedGraph.toGraphLib(this,t)},c.dia.Graph.prototype.fromGraphLib=function(t,e){return c.layout.DirectedGraph.fromGraphLib.call(this,t,e)},c.g=o,c.V=c.Vectorizer=a,c}(0,r,s,a),n.g=n.joint.g,n.V=n.Vectorizer=n.joint.V})(0,{});